/*! For license information please see main.6dec5ef5.js.LICENSE.txt */
!function(){var e={463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,M=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case C:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Ae=!1}function je(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){De=!0,Me=e}};function qe(e,t,n,r,i,a,o,s,u){De=!1,Me=null,je.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,Ct,St=!1,Tt=[],It=null,Nt=null,Rt=null,Pt=new Map,Ot=new Map,At=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Ct(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),Ot.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&qt(It,e),null!==Nt&&qt(Nt,e),null!==Rt&&qt(Rt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Mt(n),null===n.blockedOn&&At.shift()}var Bt=k.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,a=Bt.transition;Bt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=bt,a=Bt.transition;Bt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Dt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Dt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Dt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Dt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=M({},ln,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},fn,{relatedTarget:0})),yn=an(M({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),kn=an(M({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Cn(){return En}var Sn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),In=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(M({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),An=[9,13,27,32],Ln=c&&"CompositionEvent"in window,jn=null;c&&"documentMode"in document&&(jn=document.documentMode);var Dn=c&&"TextEvent"in window&&!jn,Mn=c&&(!Ln||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Cr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Cr("animationend"),Tr=Cr("animationiteration"),Ir=Cr("animationstart"),Nr=Cr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),u(t,[e])}for(var Ar=0;Ar<Pr.length;Ar++){var Lr=Pr[Ar];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(qe.apply(this,arguments),De){if(!De)throw Error(a(198));var c=Me;De=!1,Me=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,l),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Sr:case Tr:case Ir:u=yn;break;case Nr:u=Rn;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&c.push(Wr(p,v,d)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ke||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(f=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ki(u),d=null==l?s:ki(l),(s=new c(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=d,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(h=l,p=0,d=c=u;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)c=Gr(c),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Gr(c),h=Gr(h)}c=null}else c=null;null!==u&&Qr(o,s,u,c,!1),null!==l&&null!==f&&Qr(o,f,l,c,!0)}if("select"===(u=(s=r?ki(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Hn(s))if(Xn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?ki(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Kr(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=qn(n))&&(b.data=g))),(g=Dn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Oe(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Ci(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ni=Ei(!1),Ri=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ci(Ni),Ci(Ii)}function Li(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Si(Ii,t),Si(Ni,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,Si(Ii,e),Si(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=ji(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(Ii),Si(Ii,e)):Ci(Ni),Si(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function qi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,zi),i}finally{bt=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ba=null,ka=null;function wa(){ka=ba=ga=null}function _a(e){var t=ya.current;Ci(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ka=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Ca(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ga)throw Error(a(308));ba=e,ga.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Aa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,c=l=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Du|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Aa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(nl(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Aa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(nl(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Aa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,r))&&(nl(t,e,r,n),ja(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ca(a):(i=Oi(t)?Ri:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ca(a):(a=Oi(t)?Ri:Ii.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Al(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ml(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=jl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ml(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Fl(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jl(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y,f=m}if(v===s.length)return n(i,f),ia&&Ji(i,v),l;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return ia&&Ji(i,v),l}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function m(i,s,u,l){var c=j(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var f=c=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,l);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===f?c=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,l))&&(s=o(g,s,m),null===f?c=g:f.sibling=g,f=g);return ia&&Ji(i,m),c}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===f?c=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ka(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=jl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Ll(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(j(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ml(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Za),Si(Za,t)}function io(){Ci(Za),Ci(eo),Ci(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ci(Za),Ci(eo))}var so=Ei(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,bo=!1,ko=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=ls,e=n(r,i)}while(bo)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Co(){var e=0!==ko;return ko=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var f=c.lane;if((po&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,vo.lanes|=f,Du|=f}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Du|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ks=!0),r=r.queue,Ho(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Mo(e)}function jo(e,t,n){return n((function(){Do(t)&&Mo(e)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function qo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Ho(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Du|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){bo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ca,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ca,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ca,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(jo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Nu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ca,useCallback:$o,useContext:Ca,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Aa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Wu=r),hs(0,t)},n}function vs(e,t,n){(n=Aa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Aa(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=k.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Co(),null===e||ks?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ol(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Al(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ks=!0)}}return Ts(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Au,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Au,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Au,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Au,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Oi(n)?Ri:Ii.current;return a=Pi(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Co(),null===e||ks?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Oi(n)){var a=!0;Di(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ca(l):l=Pi(t,l=Oi(n)?Ri:Ii.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Ha(t,o,r,l),Ra=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Ra?("function"===typeof c&&(Va(t,n,c,r),u=t.memoizedState),(s=Ra||za(t,n,s,r,h,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ca(u):u=Pi(t,u=Oi(n)?Ri:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Ha(t,o,r,u),Ra=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(l=Ra||za(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,As,Ls,js={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Dl(u,i,0,null),e=jl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=js,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Dl({mode:"visible",children:r.children},i,0,null),(o=jl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=js,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),ks||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nl(r,e,i,-1))}return vl(),Us(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Al(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Al(r,s):(s=jl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ds(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=js,i}return e=(s=e.child).sibling,i=Al(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Du|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Al(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Al(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oi(t.type)&&Ai(),Ks(t),null;case 3:return r=t.stateNode,io(),Ci(Ni),Ci(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Os(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ci(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):vl())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ks(t),null;case 10:return _a(t.type._context),Ks(t),null;case 19:if(Ci(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>zu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*Xe()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Si(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Ni),Ci(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){El(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Zs(n,t);case 6:var r=cu,i=fu;cu=null,hu(e,t,n),fu=i,null!==(cu=r)&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=fu,cu=n.stateNode.containerInfo,fu=!0,hu(e,t,n),cu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!$s&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,hu(e,t,n),$s=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,fu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){El(e,e.return,m)}try{nu(5,e,e.return)}catch(m){El(e,e.return,m)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){El(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var f=l[s],h=l[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,c)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){El(e,e.return,m)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){El(e,e.return,m)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){El(e,e.return,m)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=Xe())),4&r&&pu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||f,vu(t,e),$s=c):vu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Js=e,f=e.child;null!==f;){for(h=Js=f;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){El(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(h);continue}}null!==p?(p.return=d,Js=p):wu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){El(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){El(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Js=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Ys;var l=$s;if(Ys=o,($s=u)&&!l)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Js=u):_u(i);for(;null!==a;)Js=a,bu(a,t,n),a=a.sibling;Js=i,Ys=s,$s=l}ku(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):ku(e)}}function ku(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$s||512&t.flags&&iu(t)}catch(d){El(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _u(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var a=t.return;try{iu(t)}catch(u){El(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){El(t,o,u)}}}catch(u){El(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xu,Eu=Math.ceil,Cu=k.ReactCurrentDispatcher,Su=k.ReactCurrentOwner,Tu=k.ReactCurrentBatchConfig,Iu=0,Nu=null,Ru=null,Pu=0,Ou=0,Au=Ei(0),Lu=0,ju=null,Du=0,Mu=0,Fu=0,Uu=null,Vu=null,qu=0,zu=1/0,Bu=null,Hu=!1,Wu=null,Ku=null,Gu=!1,Qu=null,Yu=0,$u=0,Xu=null,Ju=-1,Zu=0;function el(){return 0!==(6&Iu)?Xe():-1!==Ju?Ju:Ju=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nl(e,t,n,r){if(50<$u)throw $u=0,Xu=null,Error(a(185));yt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(Mu|=n),4===Lu&&sl(e,Pu)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(zu=Xe()+500,Ui&&zi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Nu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(ul.bind(null,e)):qi(ul.bind(null,e)),oi((function(){0===(6&Iu)&&zi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ju=-1,Zu=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Iu;Iu|=2;var o=pl();for(Nu===e&&Pu===t||(Bu=null,zu=Xe()+500,hl(e,t));;)try{gl();break}catch(u){dl(e,u)}wa(),Cu.current=o,Iu=i,null!==Ru?t=0:(Nu=null,Pu=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=ju,hl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=ju,hl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Vu,Bu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=qu+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,Vu,Bu),t);break}wl(e,Vu,Bu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,Vu,Bu),r);break}wl(e,Vu,Bu);break;default:throw Error(a(329))}}}return rl(e,Xe()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Vu,Vu=n,null!==t&&ol(t)),e}function ol(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sl(e,t){for(t&=~Fu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(a(327));_l();var t=ht(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=ju,hl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Vu,Bu),rl(e,Xe()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(zu=Xe()+500,Ui&&zi())}}function cl(e){null!==Qu&&0===Qu.tag&&0===(6&Iu)&&_l();var t=Iu;Iu|=1;var n=Tu.transition,r=bt;try{if(Tu.transition=null,bt=1,e)return e()}finally{bt=r,Tu.transition=n,0===(6&(Iu=t))&&zi()}}function fl(){Ou=Au.current,Ci(Au)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:io(),Ci(Ni),Ci(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(so);break;case 10:_a(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Nu=e,Ru=e=Al(e.current,null),Pu=Ou=t,Lu=0,ju=null,Fu=Mu=Du=0,Vu=Uu=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dl(e,t){for(;;){var n=Ru;try{if(wa(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,bo=!1,ko=0,Su.current=null,null===n||null===n.return){Lu=1,ju=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Lu&&(Lu=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Da(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ku||!Ku.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Da(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}kl(n)}catch(k){t=k,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Cu.current;return Cu.current=os,null===e?os:e}function vl(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Nu||0===(268435455&Du)&&0===(268435455&Mu)||sl(Nu,Pu)}function ml(e,t){var n=Iu;Iu|=2;var r=pl();for(Nu===e&&Pu===t||(Bu=null,hl(e,t));;)try{yl();break}catch(i){dl(e,i)}if(wa(),Iu=n,Cu.current=r,null!==Ru)throw Error(a(261));return Nu=null,Pu=0,Lu}function yl(){for(;null!==Ru;)bl(Ru)}function gl(){for(;null!==Ru&&!Ye();)bl(Ru)}function bl(e){var t=xu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?kl(e):Ru=t,Su.current=null}function kl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ou)))return void(Ru=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function wl(e,t,n){var r=bt,i=Tu.transition;try{Tu.transition=null,bt=1,function(e,t,n,r){do{_l()}while(null!==Qu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Ru=Nu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nl(tt,(function(){return _l(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,Su.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++f===r&&(l=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){El(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,gu(n,e,i),$e(),Iu=u,bt=s,Tu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Wu,Wu=null,e;0!==(1&Yu)&&0!==e.tag&&_l(),o=e.pendingLanes,0!==(1&o)?e===Xu?$u++:($u=0,Xu=e):$u=0,zi()}(e,t,n,r)}finally{Tu.transition=i,bt=r}return null}function _l(){if(null!==Qu){var e=kt(Yu),t=Tu.transition,n=bt;try{if(Tu.transition=null,bt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var f=Js;switch(f.tag){case 0:case 11:case 15:nu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Js=h;else for(;null!==Js;){var d=(f=Js).sibling,p=f.return;if(au(f),f===c){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var k=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==k)k.return=s,Js=k;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){El(u,u.return,_)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Iu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Tu.transition=t}}return!1}function xl(e,t,n){e=La(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function El(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=La(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Pu&n)===n&&(4===Lu||3===Lu&&(130023424&Pu)===Pu&&500>Xe()-qu?hl(e,0):Fu|=n),rl(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Na(e,t))&&(yt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sl(e,n)}function Nl(e,t){return Ge(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Al(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return jl(n.children,i,o,t);case E:s=8,i|=8;break;case C:return(e=Pl(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Pl(19,n,t,i)).elementType=R,e.lanes=o,e;case A:return Dl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case I:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function jl(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Ml(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,a,o,s,u){return e=new Ul(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function ql(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zl(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return ji(e,n,t)}return t}function Bl(e,t,n,r,i,a,o,s,u){return(e=Vl(n,r,!0,e,0,a,0,s,u)).context=zl(null),n=e.current,(a=Aa(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,i),e.current.lanes=i,yt(e,i,r),rl(e,r),e}function Hl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Aa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(nl(e,i,o,a),ja(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Di(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Si(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Si(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return Ms(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Si(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Aa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ca(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bs(e,t),t.tag=1,Oi(r)?(e=!0,Di(t)):e=!1,Ea(t,n),Ba(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Cs(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wl(o);s.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wl(o);a.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wl(u);s.call(e)}}var u=Vl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),cl((function(){Hl(t,u,n,r)})),u}(n,t,e,i,r);return Wl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Hl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rl(t,Xe()),0===(6&Iu)&&(zu=Xe()+500,zi()))}break;case 13:cl((function(){var t=Na(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},xt=function(e){if(13===e.tag){var t=tl(e),n=Na(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Ne=cl;var tc={usingClientEntryPoint:!1,Events:[bi,ki,wi,Se,Te,ll]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return ql(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+I(s=e[l],l);u+=N(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,c=a+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,k(e),!v)if(null!==r(l))v=!0,A(_);else{var t=r(c);null!==t&&L(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(k(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),k(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&L(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,C=null,S=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?x():(E=!1,C=null)}}else E=!1}if("function"===typeof b)x=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=R,x=function(){O.postMessage(null)}}else x=function(){y(R,0)};function A(e){C=e,E||(E=!0,x())}function L(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(g(S),S=-1):m=!0,L(w,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,A(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},404:function(e,t,n){var r=n(861).default,i=n(728).default,a=n(690).default,o=n(993).default,s=n(115).default,u=n(655).default,l=n(389).default,c=n(496).default,f=n(704).default,h=function(){var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=function(t,n,r){return n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r},p=function(e,r){for(var i in r||(r={}))n.call(r,i)&&d(e,i,r[i]);if(t){var a,o=f(t(r));try{for(o.s();!(a=o.n()).done;){i=a.value;h.call(r,i)&&d(e,i,r[i])}}catch(s){o.e(s)}finally{o.f()}}return e},v={};!function(t,n){for(var r in function(t){e(t,"__esModule",{value:!0})}(t),n)e(t,r,{get:n[r],enumerable:!0})}(v,{DEFAULT_UUID_LENGTH:function(){return y},default:function(){return k}});var m="4.4.4",y=6,g={dictionary:"alphanum",shuffle:!0,debug:!1,length:y},b=function(e){"use strict";u(n,e);var t=l(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n),(e=t.call(this)).dictIndex=0,e.dictRange=[],e.lowerBound=0,e.upperBound=0,e.dictLength=0,e._digit_first_ascii=48,e._digit_last_ascii=58,e._alpha_lower_first_ascii=97,e._alpha_lower_last_ascii=123,e._hex_last_ascii=103,e._alpha_upper_first_ascii=65,e._alpha_upper_last_ascii=91,e._number_dict_ranges={digits:[e._digit_first_ascii,e._digit_last_ascii]},e._alpha_dict_ranges={lowerCase:[e._alpha_lower_first_ascii,e._alpha_lower_last_ascii],upperCase:[e._alpha_upper_first_ascii,e._alpha_upper_last_ascii]},e._alpha_lower_dict_ranges={lowerCase:[e._alpha_lower_first_ascii,e._alpha_lower_last_ascii]},e._alpha_upper_dict_ranges={upperCase:[e._alpha_upper_first_ascii,e._alpha_upper_last_ascii]},e._alphanum_dict_ranges={digits:[e._digit_first_ascii,e._digit_last_ascii],lowerCase:[e._alpha_lower_first_ascii,e._alpha_lower_last_ascii],upperCase:[e._alpha_upper_first_ascii,e._alpha_upper_last_ascii]},e._alphanum_lower_dict_ranges={digits:[e._digit_first_ascii,e._digit_last_ascii],lowerCase:[e._alpha_lower_first_ascii,e._alpha_lower_last_ascii]},e._alphanum_upper_dict_ranges={digits:[e._digit_first_ascii,e._digit_last_ascii],upperCase:[e._alpha_upper_first_ascii,e._alpha_upper_last_ascii]},e._hex_dict_ranges={decDigits:[e._digit_first_ascii,e._digit_last_ascii],alphaDigits:[e._alpha_lower_first_ascii,e._hex_last_ascii]},e.log=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a,o=[].concat(n);if((o[0]="[short-unique-id] ".concat(n[0]),!0===e.debug)&&("undefined"!==typeof console&&null!==console))return(a=console).log.apply(a,r(o))},e.setDictionary=function(t,n){var r;if(t&&Array.isArray(t)&&t.length>1)r=t;else{var i;r=[],e.dictIndex=i=0;var a="_".concat(t,"_dict_ranges"),o=e[a];Object.keys(o).forEach((function(t){var n=t;for(e.dictRange=o[n],e.lowerBound=e.dictRange[0],e.upperBound=e.dictRange[1],e.dictIndex=i=e.lowerBound;e.lowerBound<=e.upperBound?i<e.upperBound:i>e.upperBound;e.dictIndex=e.lowerBound<=e.upperBound?i+=1:i-=1)r.push(String.fromCharCode(e.dictIndex))}))}if(n){r=r.sort((function(){return Math.random()-.5}))}e.dict=r,e.dictLength=e.dict.length,e.counter=0},e.seq=function(){return e.sequentialUUID()},e.sequentialUUID=function(){var t,n,r="";t=e.counter;do{n=t%e.dictLength,t=Math.trunc(t/e.dictLength),r+=e.dict[n]}while(0!==t);return e.counter+=1,r},e.randomUUID=function(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength||y;if(null===i||"undefined"===typeof i||i<1)throw new Error("Invalid UUID Length Provided");for(t="",r=0;r<i;r+=1)n=parseInt((Math.random()*e.dictLength).toFixed(0),10)%e.dictLength,t+=e.dict[n];return t},e.availableUUIDs=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength;return parseFloat(Math.pow(r(new Set(e.dict)).length,t).toFixed(0))},e.approxMaxBeforeCollision=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength);return parseFloat(Math.sqrt(Math.PI/2*t).toFixed(20))},e.collisionProbability=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.uuidLength;return parseFloat((e.approxMaxBeforeCollision(t)/e.availableUUIDs(n)).toFixed(20))},e.uniqueness=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),n=parseFloat((1-e.approxMaxBeforeCollision(t)/t).toFixed(20));return n>1?1:n<0?0:n},e.getVersion=function(){return e.version},e.stamp=function(t){if("number"!==typeof t||t<10)throw new Error("Param finalLength must be number greater than 10");var n=Math.floor(+new Date/1e3).toString(16),r=t-9,i=Math.round(Math.random()*(r>15?15:r)),a=e.randomUUID(r);return"".concat(a.substr(0,i)).concat(n).concat(a.substr(i)).concat(i.toString(16))},e.parseStamp=function(e){if(e.length<10)throw new Error("Stamp length invalid");var t=parseInt(e.substr(e.length-1,1),16);return new Date(1e3*parseInt(e.substr(t,8),16))};var u=p(p({},g),i);e.counter=0,e.debug=!1,e.dict=[],e.version=m;var l=u.dictionary,c=u.shuffle,f=u.length;return e.uuidLength=f,e.setDictionary(l,c),e.debug=u.debug,e.log(e.dict),e.log("Generator instantiated with Dictionary Size ".concat(e.dictLength)),o(e,new Proxy(s(e),{apply:function(t,n,i){var a;return(a=e).randomUUID.apply(a,r(i))}}))}return i(n)}(c(Function)),k=b;return k.default=b,v}();e.exports=h.default,"undefined"!=typeof window&&(h=h.default)},897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},405:function(e,t,n){var r=n(897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},515:function(e,t,n){var r=n(15),i=n(617);function a(t,n,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},728:function(e,t,n){var r=n(62);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},704:function(e,t,n){var r=n(116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t,n){var r=n(808),i=n(617),a=n(993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},655:function(e,t,n){var r=n(15);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},35:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},993:function(e,t,n){var r=n(698).default,i=n(115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},15:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(405),i=n(498),a=n(116),o=n(281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},36:function(e,t,n){var r=n(698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},62:function(e,t,n){var r=n(698).default,i=n(36);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},116:function(e,t,n){var r=n(897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},496:function(e,t,n){var r=n(808),i=n(15),a=n(35),o=n(515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".7ef12ba9.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="cmaoyt:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var f=l[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcmaoyt=self.webpackChunkcmaoyt||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r={};!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(t,n){if(t){if("string"===typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function a(n){return function(t){if(Array.isArray(t))return e(t)}(n)||t(n)||i(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if(Array.isArray(e))return e}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||i(e,t)||s()}n.d(r,{Y:function(){return fL},q:function(){return hL}});var l=n(791),c=n.t(l,2),f=n(250);function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function p(){return p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p.apply(this,arguments)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Vc){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function k(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function w(e){var t=g();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function x(){x=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var f={};function h(){}function d(){}function p(){}var v={};u(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=c(e[r],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==b(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),u(g,s,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function E(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(nh){return void n(nh)}s.done?t(u):Promise.resolve(u).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){E(a,r,i,o,s,"next",e)}function s(e){E(a,r,i,o,s,"throw",e)}o(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function N(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t,n){return P=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},P.apply(null,arguments)}function O(e){var t="function"===typeof Map?new Map:void 0;return O=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return P(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},O(e)}var A=!1,L=!1,j="${JSCORE_VERSION}",D=function(e,t){if(!e)throw M(t)},M=function(e){return new Error("Firebase Database ("+j+") INTERNAL ASSERT FAILED: "+e)},F=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(F(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},V=function(e){var t=F(e);return U.encodeByteArray(t,!0)},q=function(e){return V(e).replace(/\./g,"")},z=function(e){try{return U.decodeString(e,!0)}catch(Vc){console.error("base64Decode failed: ",Vc)}return null};function B(e){return H(void 0,e)}function H(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=H(e[n],t[n]));return e}function W(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function K(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(W())}function G(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Vc){return!1}}function Q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Y(){return!0===A||!0===L}function $(){try{return"object"===typeof indexedDB}catch(Vc){return!1}}var X=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},J=function(){try{return X()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Vc){return}var t=e&&z(e[1]);return t&&JSON.parse(t)}}()}catch(Vc){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Vc))}},Z=function(e){var t,n;return null===(n=null===(t=J())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ee=function(e){var t=Z(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},te=function(){var e;return null===(e=J())||void 0===e?void 0:e.config},ne=function(e){var t;return null===(t=J())||void 0===t?void 0:t["_".concat(e)]},re=function(){function e(){var t=this;S(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return N(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ie(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(a)),""].join(".")}var ae=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(v(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(v(a),oe.prototype.create),a}return N(n)}(O(Error)),oe=function(){function e(t,n,r){S(this,e),this.service=t,this.serviceName=n,this.errors=r}return N(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?se(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ae(n,a,t);return o}}]),e}();function se(e,t){return e.replace(ue,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ue=/\{\$([^}]+)}/g;function le(e){return JSON.parse(e)}function ce(e){return JSON.stringify(e)}var fe=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=le(z(a[0])||""),n=le(z(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(Vc){}return{header:t,claims:n,data:r,signature:i}};function he(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function de(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function pe(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ve(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function me(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ye(s)&&ye(u)){if(!me(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function ye(e){return null!==e&&"object"===typeof e}function ge(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function be(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ke(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var we=function(){function e(){S(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return N(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^c&(f^h),u=1518500249):(s=c^f^h,u=1859775393):p<60?(s=c&f|h&(c|f),u=2400959708):(s=c^f^h,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var _e=function(){function e(t,n){var r=this;S(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return N(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=_(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xe),void 0===r.error&&(r.error=xe),void 0===r.complete&&(r.complete=xe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(Vc){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(Vc){"undefined"!==typeof console&&console.error&&console.error(Vc)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xe(){}function Ee(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Ce=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Se(e){return e&&e._delegate?e._delegate:e}var Te=function(){function e(t,n,r){S(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return N(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ie="[DEFAULT]",Ne=function(){function e(t,n){S(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return N(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new re;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(Vc){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Vc){if(r)return null;throw Vc}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch(Vc){}var t,n=_(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(Vc){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(a(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),a(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=_(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),l=s[0],c=s[1],f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(JO){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ie?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(JO){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return this.component?this.component.multipleInstances?e:Ie:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Re,Pe,Oe=function(){function e(t){S(this,e),this.name=t,this.providers=new Map}return N(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ne(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ae=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pe||(Pe={}));var Le={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},je=Pe.INFO,De=(R(Re={},Pe.DEBUG,"log"),R(Re,Pe.VERBOSE,"log"),R(Re,Pe.INFO,"info"),R(Re,Pe.WARN,"warn"),R(Re,Pe.ERROR,"error"),Re),Me=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=De[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Fe=function(){function e(t){S(this,e),this.name=t,this._logLevel=je,this._logHandler=Me,this._userLogHandler=null,Ae.push(this)}return N(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Le[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,Pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.INFO].concat(t)),this._logHandler.apply(this,[this,Pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.WARN].concat(t)),this._logHandler.apply(this,[this,Pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.ERROR].concat(t)),this._logHandler.apply(this,[this,Pe.ERROR].concat(t))}}]),e}();function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe,ze;var Be=new WeakMap,He=new WeakMap,We=new WeakMap,Ke=new WeakMap,Ge=new WeakMap;var Qe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return He.get(e);if("objectStoreNames"===t)return e.objectStoreNames||We.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ye(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ze||(ze=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Je(this),n),Xe(Be.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xe(e.apply(Je(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Je(this),t].concat(r));return We.set(a,t.sort?t.sort():[t]),Xe(a)}}function $e(e){return"function"===typeof e?Ye(e):(e instanceof IDBTransaction&&function(e){if(!He.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));He.set(e,t)}}(e),t=e,(qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Qe):e);var t}function Xe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Xe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Be.set(t,e)})).catch((function(){})),Ge.set(t,e),t}(e);if(Ke.has(e))return Ke.get(e);var t=$e(e);return t!==e&&(Ke.set(e,t),Ge.set(t,e)),t}var Je=function(e){return Ge.get(e)};var Ze,et,tt=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],rt=new Map;function it(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(rt.get(t))return rt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=nt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||tt.includes(n))){var a=function(){var e=C(x().mark((function e(t){var a,o,s,u,l,c,f=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=f[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return rt.set(t,a),a}}}Qe=function(e){return Ve(Ve({},e),{},{get:function(t,n,r){return it(t,n)||e.get(t,n,r)},has:function(t,n){return!!it(t,n)||e.has(t,n)}})}(Qe);var at=function(){function e(t){S(this,e),this.container=t}return N(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ot="@firebase/app",st="0.9.0",ut=new Fe("@firebase/app"),lt="[DEFAULT]",ct=(R(Ze={},ot,"fire-core"),R(Ze,"@firebase/app-compat","fire-core-compat"),R(Ze,"@firebase/analytics","fire-analytics"),R(Ze,"@firebase/analytics-compat","fire-analytics-compat"),R(Ze,"@firebase/app-check","fire-app-check"),R(Ze,"@firebase/app-check-compat","fire-app-check-compat"),R(Ze,"@firebase/auth","fire-auth"),R(Ze,"@firebase/auth-compat","fire-auth-compat"),R(Ze,"@firebase/database","fire-rtdb"),R(Ze,"@firebase/database-compat","fire-rtdb-compat"),R(Ze,"@firebase/functions","fire-fn"),R(Ze,"@firebase/functions-compat","fire-fn-compat"),R(Ze,"@firebase/installations","fire-iid"),R(Ze,"@firebase/installations-compat","fire-iid-compat"),R(Ze,"@firebase/messaging","fire-fcm"),R(Ze,"@firebase/messaging-compat","fire-fcm-compat"),R(Ze,"@firebase/performance","fire-perf"),R(Ze,"@firebase/performance-compat","fire-perf-compat"),R(Ze,"@firebase/remote-config","fire-rc"),R(Ze,"@firebase/remote-config-compat","fire-rc-compat"),R(Ze,"@firebase/storage","fire-gcs"),R(Ze,"@firebase/storage-compat","fire-gcs-compat"),R(Ze,"@firebase/firestore","fire-fst"),R(Ze,"@firebase/firestore-compat","fire-fst-compat"),R(Ze,"fire-js","fire-js"),R(Ze,"firebase","fire-js-all"),Ze),ft=new Map,ht=new Map;function dt(e,t){try{e.container.addComponent(t)}catch(Vc){ut.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Vc)}}function pt(e){var t=e.name;if(ht.has(t))return ut.debug("There were multiple attempts to register component ".concat(t,".")),!1;ht.set(t,e);var n,r=_(ft.values());try{for(r.s();!(n=r.n()).done;){dt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function vt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var mt=(R(et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),R(et,"bad-app-name","Illegal App name: '{$appName}"),R(et,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),R(et,"app-deleted","Firebase App named '{$appName}' already deleted"),R(et,"no-options","Need to provide options, when not being deployed to hosting via source."),R(et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),R(et,"invalid-log-argument","First argument to `onLog` must be null or a function."),R(et,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),R(et,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),R(et,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),R(et,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),et),yt=new oe("app","Firebase",mt),gt=function(){function e(t,n,r){var i=this;S(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Te("app",(function(){return i}),"PUBLIC"))}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}]),e}(),bt="9.15.0";function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:lt,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw yt.create("bad-app-name",{appName:String(a)});if(n||(n=te()),!n)throw yt.create("no-options");var o=ft.get(a);if(o){if(me(n,o.options)&&me(i,o.config))return o;throw yt.create("duplicate-app",{appName:a})}var s,u=new Oe(a),l=_(ht.values());try{for(l.s();!(s=l.n()).done;){var c=s.value;u.addComponent(c)}}catch(h){l.e(h)}finally{l.f()}var f=new gt(n,i,u);return ft.set(a,f),f}function wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=ft.get(e);if(!t&&e===lt)return kt();if(!t)throw yt.create("no-app",{appName:e});return t}function _t(e,t,n){var r,i=null!==(r=ct[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ut.warn(s.join(" "))}pt(new Te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var xt="firebase-heartbeat-store",Et=null;function Ct(){return Et||(Et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Xe(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Xe(s.result),e.oldVersion,e.newVersion,Xe(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(xt)}}).catch((function(e){throw yt.create("idb-open",{originalErrorMessage:e.message})}))),Et}function St(e){return Tt.apply(this,arguments)}function Tt(){return Tt=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct();case 3:return n=e.sent,e.abrupt("return",n.transaction(xt).objectStore(xt).get(Rt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ae?ut.warn(e.t0.message):(r=yt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ut.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Tt.apply(this,arguments)}function It(e,t){return Nt.apply(this,arguments)}function Nt(){return Nt=C(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct();case 3:return r=e.sent,i=r.transaction(xt,"readwrite"),a=i.objectStore(xt),e.next=8,a.put(n,Rt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ae?ut.warn(e.t0.message):(o=yt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ut.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Nt.apply(this,arguments)}function Rt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Pt=function(){function e(t){var n=this;S(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new jt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return N(e,[{key:"triggerHeartbeat",value:function(){var e=C(x().mark((function e(){var t,n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ot(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=C(x().mark((function e(){var t,n,r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ot(),n=At(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=q(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ot(){return(new Date).toISOString().substring(0,10)}function At(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=_(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Dt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Dt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Lt,jt=function(){function e(t){S(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return N(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(nh){t(nh)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,St(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",It(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",It(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(a(r.heartbeats),a(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dt(e){return q(JSON.stringify({version:2,heartbeats:e})).length}Lt="",pt(new Te("platform-logger",(function(e){return new at(e)}),"PRIVATE")),pt(new Te("heartbeat",(function(e){return new Pt(e)}),"PRIVATE")),_t(ot,st,Lt),_t(ot,st,"esm2017"),_t("fire-js","");function Mt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ft;Object.create;function Ut(){return R({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vt=Ut,qt=new oe("auth","Firebase",Ut()),zt=new Fe("@firebase/auth");function Bt(e){if(zt.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zt.error.apply(zt,["Auth (".concat(bt,"): ").concat(e)].concat(n))}}function Ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gt.apply(void 0,[e].concat(n))}function Wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt.apply(void 0,[e].concat(n))}function Kt(e,t,n){var r=Object.assign(Object.assign({},Vt()),R({},t,n));return new oe("auth","Firebase",r).create(t,{appName:e.name})}function Gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,o=n[0],s=a(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(a(s)))}return qt.create.apply(qt,[e].concat(n))}function Qt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Gt.apply(void 0,[t].concat(r))}}function Yt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Bt(t),new Error(t)}function $t(e,t){e||Yt(t)}var Xt=new Map;function Jt(e){$t(e instanceof Function,"Expected a class definition");var t=Xt.get(e);return t?($t(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xt.set(e,t),t)}function Zt(e,t){var n=vt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(me(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ht(r,"already-initialized")}return n.initialize({options:t})}function en(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tn(){return"http:"===nn()||"https:"===nn()}function nn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function rn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tn()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var an=function(){function e(t,n){S(this,e),this.shortDelay=t,this.longDelay=n,$t(n>t,"Short delay should be less than long delay!"),this.isMobile=K()||Q()}return N(e,[{key:"get",value:function(){return rn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function on(e,t){$t(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var sn=function(){function e(){S(this,e)}return N(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),un=(R(Ft={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),R(Ft,"MISSING_CUSTOM_TOKEN","internal-error"),R(Ft,"INVALID_IDENTIFIER","invalid-email"),R(Ft,"MISSING_CONTINUE_URI","internal-error"),R(Ft,"INVALID_PASSWORD","wrong-password"),R(Ft,"MISSING_PASSWORD","internal-error"),R(Ft,"EMAIL_EXISTS","email-already-in-use"),R(Ft,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),R(Ft,"INVALID_IDP_RESPONSE","invalid-credential"),R(Ft,"INVALID_PENDING_TOKEN","invalid-credential"),R(Ft,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),R(Ft,"MISSING_REQ_TYPE","internal-error"),R(Ft,"EMAIL_NOT_FOUND","user-not-found"),R(Ft,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),R(Ft,"EXPIRED_OOB_CODE","expired-action-code"),R(Ft,"INVALID_OOB_CODE","invalid-action-code"),R(Ft,"MISSING_OOB_CODE","internal-error"),R(Ft,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),R(Ft,"INVALID_ID_TOKEN","invalid-user-token"),R(Ft,"TOKEN_EXPIRED","user-token-expired"),R(Ft,"USER_NOT_FOUND","user-token-expired"),R(Ft,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),R(Ft,"INVALID_CODE","invalid-verification-code"),R(Ft,"INVALID_SESSION_INFO","invalid-verification-id"),R(Ft,"INVALID_TEMPORARY_PROOF","invalid-credential"),R(Ft,"MISSING_SESSION_INFO","missing-verification-id"),R(Ft,"SESSION_EXPIRED","code-expired"),R(Ft,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),R(Ft,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),R(Ft,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),R(Ft,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),R(Ft,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),R(Ft,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),R(Ft,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),R(Ft,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),R(Ft,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),R(Ft,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),R(Ft,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ft),ln=new an(3e4,6e4);function cn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function fn(e,t,n,r){return hn.apply(this,arguments)}function hn(){return hn=C(x().mark((function e(t,n,r,i){var a,o=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",dn(t,a,C(x().mark((function e(){var a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ge(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",sn.fetch()(yn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),hn.apply(this,arguments)}function dn(e,t,n){return pn.apply(this,arguments)}function pn(){return pn=C(x().mark((function e(t,n,r){var i,a,o,s,l,c,f,h,d,p;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},un),n),e.prev=2,a=new gn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw bn(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(l=o.ok?s.errorMessage:s.error.message,c=l.split(" : "),f=u(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw bn(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw bn(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw bn(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Kt(t,p,d);case 34:Ht(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ae)){e.next=41;break}throw e.t0;case 41:Ht(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),pn.apply(this,arguments)}function vn(e,t,n,r){return mn.apply(this,arguments)}function mn(){return mn=C(x().mark((function e(t,n,r,i){var a,o,s=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,fn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ht(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function yn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?on(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var gn=function(){function e(t){var n=this;S(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Wt(n.auth,"network-request-failed"))}),ln.get())}))}return N(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function bn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Wt(e,t,r);return i.customData._tokenResponse=n,i}function kn(e,t){return wn.apply(this,arguments)}function wn(){return wn=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function _n(e,t){return xn.apply(this,arguments)}function xn(){return xn=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function En(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Vc){}}function Cn(){return Cn=C(x().mark((function e(t){var n,r,i,a,o,s,u=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Se(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Qt((a=Tn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:En(Sn(a.auth_time)),issuedAtTime:En(Sn(a.iat)),expirationTime:En(Sn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Cn.apply(this,arguments)}function Sn(e){return 1e3*Number(e)}function Tn(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Bt("JWT malformed, contained fewer than 3 sections"),null;try{var a=z(r);return a?JSON.parse(a):(Bt("Failed to decode base64 JWT payload"),null)}catch(Vc){return Bt("Caught error parsing JWT payload as JSON",null===Vc||void 0===Vc?void 0:Vc.toString()),null}}function In(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=C(x().mark((function e(t,n){var r=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ae&&Rn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nn.apply(this,arguments)}function Rn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Pn=function(){function e(t){S(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return N(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(C(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),On=function(){function e(t,n){S(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return N(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function An(e){return Ln.apply(this,arguments)}function Ln(){return Ln=C(x().mark((function e(t){var n,r,i,a,o,s,u,l,c,f,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,In(t,_n(r,{idToken:i}));case 6:Qt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Mn(o.providerUserInfo):[],u=Dn(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!l&&c,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new On(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function jn(){return(jn=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Se(t),e.next=3,An(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(a(n),a(t))}function Mn(e){return e.map((function(e){var t=e.providerId,n=Mt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Fn(e,t){return Un.apply(this,arguments)}function Un(){return Un=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn(t,{},C(x().mark((function e(){var r,i,a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ge({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=yn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",sn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Un.apply(this,arguments)}var Vn=function(){function e(){S(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return N(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Qt(e.idToken,"internal-error"),Qt("undefined"!==typeof e.idToken,"internal-error"),Qt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Tn(e);return Qt(t,"internal-error"),Qt("undefined"!==typeof t.exp,"internal-error"),Qt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=C(x().mark((function e(t){var n,r=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Qt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=C(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Yt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Qt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Qt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Qt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function qn(e,t){Qt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var zn=function(){function e(t){S(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=Mt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?a(o.providerData):[],this.metadata=new On(o.createdAt||void 0,o.lastLoginAt||void 0)}return N(e,[{key:"getIdToken",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Qt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Cn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=C(x().mark((function e(t){var n,r,i=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,An(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,In(this,kn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,l,c,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(l=n.createdAt)&&void 0!==l?l:void 0,g=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Qt(b&&x,t,"internal-error");var E=Vn.fromJSON(this.name,x);Qt("string"===typeof b,t,"internal-error"),qn(f,t.name),qn(h,t.name),Qt("boolean"===typeof k,t,"internal-error"),Qt("boolean"===typeof w,t,"internal-error"),qn(d,t.name),qn(p,t.name),qn(v,t.name),qn(m,t.name),qn(y,t.name),qn(g,t.name);var C=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(C.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(C._redirectEventId=m),C}},{key:"_fromIdTokenResponse",value:function(){var t=C(x().mark((function t(n,r){var i,a,o,s=arguments;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Vn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,An(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Bn=function(){function e(){S(this,e),this.type="NONE",this.storage={}}return N(e,[{key:"_isAvailable",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Bn.type="NONE";var Hn=Bn;function Wn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Kn=function(){function e(t,n,r){S(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Wn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Wn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return N(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?zn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=C(x().mark((function t(n,r){var i,a,o,s,u,l,c,f,h,d,p,v=arguments;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Jt(Hn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Jt(Hn),s=Wn(i,n.config.apiKey,n.name),u=null,l=_(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return f=c.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=zn._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Gn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zn(t))return"Blackberry";if(er(t))return"Webos";if(Yn(t))return"Safari";if((t.includes("chrome/")||$n(t))&&!t.includes("edge/"))return"Chrome";if(Jn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/firefox\//i.test(e)}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/crios\//i.test(e)}function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/iemobile/i.test(e)}function Jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/android/i.test(e)}function Zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/blackberry/i.test(e)}function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/webos/i.test(e)}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return tr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function rr(){return function(){var e=W();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();return tr(e)||Jn(e)||er(e)||Zn(e)||/windows phone/i.test(e)||Xn(e)}function ar(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gn(W());break;case"Worker":t="".concat(Gn(W()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(bt,"/").concat(r)}var or=function(){function e(t){S(this,e),this.auth=t,this.queue=[]}return N(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(Vc){r(Vc)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=C(x().mark((function e(t){var n,r,i,a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=_(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=_(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(Hc){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sr=function(){function e(t,n,r){S(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lr(this),this.idTokenSubscription=new lr(this),this.beforeStateQueue=new or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return N(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Jt(t)),this._initializationPromise=this.queue(C(x().mark((function r(){var i,a;return x().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Kn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=C(x().mark((function e(t){var n,r,i,a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Qt(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Se(t):null)&&Qt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=C(x().mark((function e(t){var n,r=this,i=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(C(x().mark((function n(){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Jt(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new oe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Qt(n=t&&Jt(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Kn.create(this,[Jt(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=C(x().mark((function e(t){var n=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Qt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ar(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=C(x().mark((function e(){var t,n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ur(e){return Se(e)}var lr=function(){function e(t){var n=this;S(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new _e(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return N(e,[{key:"next",get:function(){return Qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function cr(e,t,n){var r=ur(e);Qt(r._canInitEmulator,r,"emulator-config-failed"),Qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=fr(t),o=function(e){var t=fr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:hr(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:hr(o[1])}}(t),s=o.host,l=o.port,c=null===l?"":":".concat(l);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var dr=function(){function e(t,n){S(this,e),this.providerId=t,this.signInMethod=n}return N(e,[{key:"toJSON",value:function(){return Yt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Yt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Yt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Yt("not implemented")}}]),e}();function pr(e,t){return vr.apply(this,arguments)}function vr(){return vr=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),vr.apply(this,arguments)}function mr(e,t){return yr.apply(this,arguments)}function yr(){return yr=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithPassword",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function gr(e,t){return br.apply(this,arguments)}function br(){return br=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function kr(e,t){return wr.apply(this,arguments)}function wr(){return wr=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}var _r=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return N(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",gr(t,{email:this._email,oobCode:this._password}));case 5:Ht(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",pr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",kr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ht(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(dr);function xr(e,t){return Er.apply(this,arguments)}function Er(){return Er=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithIdp",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}var Cr=function(e){y(n,e);var t=w(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return N(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return xr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,xr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,xr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ge(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ht("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Mt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(dr);function Sr(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fn(t,"POST","/v1/accounts:sendVerificationCode",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Ir(){return Ir=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Nr(){return Nr=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw bn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}var Rr=R({},"USER_NOT_FOUND","user-not-found");function Pr(){return Pr=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",vn(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,r),Rr));case 2:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}var Or=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone","phone")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ir.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Nr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Pr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(dr);var Ar=function(){function e(t){var n,r,i,a,o,s;S(this,e);var u=be(ke(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,c=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Qt(l&&c&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=c,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return N(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=be(ke(e)).link,n=t?be(ke(t)).deep_link_id:null,r=be(ke(e)).deep_link_id;return(r?be(ke(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(JO){return null}}}]),e}();var Lr=function(){function e(){S(this,e),this.providerId=e.PROVIDER_ID}return N(e,null,[{key:"credential",value:function(e,t){return _r._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ar.parseLink(t);return Qt(n,"argument-error"),_r._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Lr.PROVIDER_ID="password",Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var jr=function(){function e(t){S(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return N(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Dr=function(e){y(n,e);var t=w(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).scopes=[],e}return N(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return a(this.scopes)}}]),n}(jr),Mr=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.call(this,"facebook.com")}return N(n,null,[{key:"credential",value:function(e){return Cr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(JO){return null}}}]),n}(Dr);Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mr.PROVIDER_ID="facebook.com";var Fr=function(e){y(n,e);var t=w(n);function n(){var e;return S(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return N(n,null,[{key:"credential",value:function(e,t){return Cr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(JO){return null}}}]),n}(Dr);Fr.GOOGLE_SIGN_IN_METHOD="google.com",Fr.PROVIDER_ID="google.com";var Ur=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.call(this,"github.com")}return N(n,null,[{key:"credential",value:function(e){return Cr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(JO){return null}}}]),n}(Dr);Ur.GITHUB_SIGN_IN_METHOD="github.com",Ur.PROVIDER_ID="github.com";var Vr=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.call(this,"twitter.com")}return N(n,null,[{key:"credential",value:function(e,t){return Cr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(JO){return null}}}]),n}(Dr);Vr.TWITTER_SIGN_IN_METHOD="twitter.com",Vr.PROVIDER_ID="twitter.com";var qr=function(){function e(t){S(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return N(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=C(x().mark((function t(n,r,i){var a,o,s,u,l=arguments;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,zn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=zr(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=C(x().mark((function t(n,r,i){var a;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=zr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function zr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Br=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,s;return S(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(v(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return N(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ae);function Hr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Br._fromErrorAndOperation(e,n,t,r);throw n}))}function Wr(e,t){return Kr.apply(this,arguments)}function Kr(){return Kr=C(x().mark((function e(t,n){var r,i,a=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=In,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Gr(e,t){return Qr.apply(this,arguments)}function Qr(){return Qr=C(x().mark((function e(t,n){var r,i,a,o,s,u,l=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,In(t,Hr(i,a,n,t),r);case 6:return Qt((o=e.sent).idToken,i,"internal-error"),Qt(s=Tn(o.idToken),i,"internal-error"),u=s.sub,Qt(t.uid===u,i,"user-mismatch"),e.abrupt("return",qr._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ht(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Qr.apply(this,arguments)}function Yr(e,t){return $r.apply(this,arguments)}function $r(){return $r=C(x().mark((function e(t,n){var r,i,a,o,s=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Hr(t,i,n);case 4:return a=e.sent,e.next=7,qr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Xr(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yr(ur(t),n));case 1:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Zr(e,t,n){return Xr(Se(e),Lr.credential(t,n))}function ei(e,t,n,r){return Se(e).onIdTokenChanged(t,n,r)}function ti(e,t,n){return Se(e).beforeAuthStateChanged(t,n)}function ni(e){return Se(e).signOut()}function ri(e,t){return fn(e,"POST","/v2/accounts/mfaEnrollment:start",cn(e,t))}new WeakMap;var ii="__sak",ai=function(){function e(t,n){S(this,e),this.storageRetriever=t,this.type=n}return N(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ii,"1"),this.storage.removeItem(ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(JO){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var oi=function(e){y(n,e);var t=w(n);function n(){var e;return S(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=W();return Yn(e)||tr(e)}()&&function(){try{return!(!window||window===window.top)}catch(Vc){return!1}}(),e.fallbackToPolling=ir(),e._shouldAllowMigration=!0,e}return N(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);rr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=C(x().mark((function e(t,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(h(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(x().mark((function e(t){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(h(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(h(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ai);oi.type="LOCAL";var si=oi,ui=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return N(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ai);ui.type="SESSION";var li=ui;function ci(e){return Promise.all(e.map(function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var fi=function(){function e(t){S(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return N(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=C(x().mark((function e(t){var n,r,i,a,o,s,u,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ci(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function hi(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}fi.receivers=[];var di=function(){function e(t){S(this,e),this.target=t,this.handlers=new Set}return N(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=C(x().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=hi("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function pi(){return window}function vi(){return"undefined"!==typeof pi().WorkerGlobalScope&&"function"===typeof pi().importScripts}function mi(){return yi.apply(this,arguments)}function yi(){return(yi=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function gi(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var bi="firebaseLocalStorageDb",ki="firebaseLocalStorage",wi="fbase_key",_i=function(){function e(t){S(this,e),this.request=t}return N(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function xi(e,t){return e.transaction([ki],t?"readwrite":"readonly").objectStore(ki)}function Ei(){var e=indexedDB.deleteDatabase(bi);return new _i(e).toPromise()}function Ci(){var e=indexedDB.open(bi,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ki,{keyPath:wi})}catch(Vc){n(Vc)}})),e.addEventListener("success",C(x().mark((function n(){var r;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ki)){n.next=12;break}return r.close(),n.next=5,Ei();case 5:return n.t0=t,n.next=8,Ci();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Si(e,t,n){return Ti.apply(this,arguments)}function Ti(){return Ti=C(x().mark((function e(t,n,r){var i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=xi(t,!0).put((R(i={},wi,n),R(i,"value",r),i)),e.abrupt("return",new _i(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ii(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xi(t,!1).get(n),e.next=3,new _i(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ri(e,t){var n=xi(e,!0).delete(t);return new _i(n).toPromise()}var Pi=function(){function e(){S(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return N(e,[{key:"_openDb",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ci();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=C(x().mark((function e(){var t=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=fi._getInstance(vi()?self:null),this.receiver._subscribe("keyChanged",function(){var e=C(x().mark((function e(n,r){var i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=C(x().mark((function e(){var t,n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new di(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&gi()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ci();case 5:return t=e.sent,e.next=8,Si(t,ii,"1");case 8:return e.next=10,Ri(t,ii);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=C(x().mark((function e(t,n){var r=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Si(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ii(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=C(x().mark((function e(t){var n=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ri(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=C(x().mark((function e(){var t,n,r,i,a,o,s,u,l,c,f;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=xi(e,!1).getAll();return new _i(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=_(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)f=c[l],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(C(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Pi.type="LOCAL";var Oi=Pi;function Ai(e,t){return fn(e,"POST","/v2/accounts/mfaSignIn:start",cn(e,t))}function Li(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Wt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ji(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}ji("rcb"),new an(3e4,6e4);var Di="recaptcha";function Mi(e,t,n){return Fi.apply(this,arguments)}function Fi(){return Fi=C(x().mark((function e(t,n,r){var i,a,o,s,u,l,c,f,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Qt("string"===typeof a,t,"argument-error"),Qt(r.type===Di,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Qt("enroll"===s.type,t,"internal-error"),e.next=13,ri(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Qt("signin"===s.type,t,"internal-error"),Qt(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ai(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Sr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Fi.apply(this,arguments)}var Ui=function(){function e(t){S(this,e),this.providerId=e.PROVIDER_ID,this.auth=ur(t)}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return Mi(this.auth,e,Se(t))}}],[{key:"credential",value:function(e,t){return Or._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Or._fromTokenResponse(n,r):null}}]),e}();function Vi(e,t){return t?Jt(t):(Qt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ui.PROVIDER_ID="phone",Ui.PHONE_SIGN_IN_METHOD="phone";var qi=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this,"custom","custom")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return xr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return xr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return xr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(dr);function zi(e){return Yr(e.auth,new qi(e),e.bypassAuthState)}function Bi(e){var t=e.auth,n=e.user;return Qt(n,t,"internal-error"),Gr(n,new qi(e),e.bypassAuthState)}function Hi(e){return Wi.apply(this,arguments)}function Wi(){return Wi=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Qt(r=t.user,n,"internal-error"),e.abrupt("return",Wr(r,new qi(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}var Ki=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];S(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return N(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=C(x().mark((function t(n,r){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=C(x().mark((function e(t){var n,r,i,a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zi;case"linkViaPopup":case"linkViaRedirect":return Hi;case"reauthViaPopup":case"reauthViaRedirect":return Bi;default:Ht(this.auth,"internal-error")}}},{key:"resolve",value:function(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Gi=new an(2e3,1e4);var Qi=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o){var s;return S(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=v(s),s}return N(n,[{key:"executeNotNull",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Qt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=C(x().mark((function e(){var t,n=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t(1===this.filter.length,"Popup operations only handle one event"),t=hi(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Wt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Wt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Wt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Gi.get())}()}}]),n}(Ki);Qi.currentPopupAction=null;var Yi=new Map,$i=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return N(n,[{key:"execute",value:function(){var e=C(x().mark((function e(){var t,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Yi.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Xi(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,p(h(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Yi.set(this.auth._key(),t);case 21:return this.bypassAuthState||Yi.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=C(x().mark((function e(t){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",p(h(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",p(h(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ki);function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=C(x().mark((function e(t,n){var r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(n),i=ea(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(e,t){Yi.set(e._key(),t)}function ea(e){return Jt(e._redirectPersistence)}function ta(e){return Wn("pendingRedirect",e.config.apiKey,e.name)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=C(x().mark((function e(t,n){var r,i,a,o,s,u=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=ur(t),a=Vi(i,n),o=new $i(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}var ia=function(){function e(t){S(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return N(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!oa(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(aa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function aa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function oa(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function sa(e){return ua.apply(this,arguments)}function ua(){return ua=C(x().mark((function e(t){var n,r=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",fn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}var la=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ca=/^https?/;function fa(){return fa=C(x().mark((function e(t){var n,r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,sa(t);case 4:n=e.sent,r=n.authorizedDomains,i=_(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ha(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ht(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),fa.apply(this,arguments)}function ha(e){var t=en(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ca.test(r))return!1;if(la.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var da=new an(3e4,6e4);function pa(){var e=pi().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=a(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var va=null;function ma(e){return va=va||function(e){return new Promise((function(t,n){var r,i,a;function o(){pa(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pa(),n(Wt(e,"network-request-failed"))},timeout:da.get()})}if(null===(i=null===(r=pi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=pi().gapi)||void 0===a?void 0:a.load)){var s=ji("iframefcb");return pi()[s]=function(){gapi.load?o():n(Wt(e,"network-request-failed"))},Li("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw va=null,e}))}(e),va}var ya=new an(5e3,15e3),ga={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ba=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ka(e){var t=e.config;Qt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?on(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:bt},i=ba.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ge(r).slice(1))}function wa(e){return _a.apply(this,arguments)}function _a(){return _a=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(t);case 2:return n=e.sent,Qt(r=pi().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ka(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ga,dontclear:!0},(function(e){return new Promise(function(){var n=C(x().mark((function n(r,i){var a,o,s;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){pi().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Wt(t,"network-request-failed"),o=pi().setTimeout((function(){i(a)}),ya.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),_a.apply(this,arguments)}var xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ea="_blank",Ca="http://localhost",Sa=function(){function e(t){S(this,e),this.window=t,this.associatedEvent=null}return N(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(Vc){}}}]),e}();function Ta(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",l=Object.assign(Object.assign({},xa),{width:r.toString(),height:i.toString(),top:a,left:o}),c=W().toLowerCase();n&&(s=$n(c)?Ea:n),Qn(c)&&(t=t||Ca,l.scrollbars="yes");var f=Object.entries(l).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(nr(c)&&"_self"!==s)return Ia(t||"",s),new Sa(null);var h=window.open(t||"",s,f);Qt(h,e,"popup-blocked");try{h.focus()}catch(Vc){}return new Sa(h)}function Ia(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Na="__/auth/handler",Ra="emulator/auth/handler";function Pa(e,t,n,r,i,a){Qt(e.config.authDomain,e,"auth-domain-config-required"),Qt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:bt,eventId:i};if(t instanceof jr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,l=Object.entries(a||{});s<l.length;s++){var c=u(l[s],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof Dr){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Na);return on(t,Ra)}(e),"?").concat(ge(p).slice(1))}var Oa="webStorageSupport",Aa=function(){function e(){S(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=li,this._completeRedirectFn=na,this._overrideRedirectResult=Zi}return N(e,[{key:"_openPopup",value:function(){var e=C(x().mark((function e(t,n,r,i){var a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Pa(t,n,r,en(),i),e.abrupt("return",Ta(t,o,hi()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=C(x().mark((function e(t,n,r,i){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Pa(t,n,r,en(),i),pi().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):($t(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wa(t);case 2:return n=e.sent,r=new ia(t),n.register("authEvent",(function(e){return Qt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Oa,{type:Oa},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Oa];void 0!==i&&t(!!i),Ht(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fa.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ir()||Yn()||tr()}}]),e}(),La=Aa,ja=function(){function e(t){S(this,e),this.factorId=t}return N(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Yt("unexpected MultiFactorSessionType")}}}]),e}(),Da=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone")).credential=e,r}return N(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return fn(e,"POST","/v2/accounts/mfaEnrollment:finalize",cn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return fn(e,"POST","/v2/accounts/mfaSignIn:finalize",cn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ja);(function(){function e(){S(this,e)}return N(e,null,[{key:"assertion",value:function(e){return Da._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Ma="@firebase/auth",Fa="0.21.0",Ua=function(){function e(t){S(this,e),this.auth=t,this.internalListeners=new Map}return N(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Va,qa=ne("authIdTokenMaxAge")||300,za=null,Ba=function(e){return function(){var t=C(x().mark((function t(n){var r,i,a;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>qa)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,za!==a){t.next=12;break}return t.abrupt("return");case 12:return za=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Ha(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(Vc){a(Vc)}}function s(e){try{u(r.throw(e))}catch(Vc){a(Vc)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Wa(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(Vc){a=[6,Vc],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Va="Browser",pt(new Te("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Qt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Qt(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Va,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ar(Va)},i=new sr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),pt(new Te("auth-internal",(function(e){return function(e){return new Ua(e)}(ur(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),_t(Ma,Fa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Va)),_t(Ma,Fa,"esm2017");var Ka,Ga=function(){return Ga=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ga.apply(this,arguments)},Qa=function(e){return{loading:void 0===e||null===e,value:e}},Ya=function(e){var t=e?e():void 0,n=(0,l.useReducer)((function(e,t){switch(t.type){case"error":return Ga(Ga({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Qa(t.defaultValue);case"value":return Ga(Ga({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Qa(t)),r=n[0],i=n[1],a=(0,l.useCallback)((function(){var t=e?e():void 0;i({type:"reset",defaultValue:t})}),[e]),o=(0,l.useCallback)((function(e){i({type:"error",error:e})}),[]),s=(0,l.useCallback)((function(e){i({type:"value",value:e})}),[]);return(0,l.useMemo)((function(){return{error:r.error,loading:r.loading,reset:a,setError:o,setValue:s,value:r.value}}),[r.error,r.loading,a,o,s,r.value])},$a=function(e,t){var n=Ya((function(){return e.currentUser})),r=n.error,i=n.loading,a=n.setError,o=n.setValue,s=n.value;return(0,l.useEffect)((function(){var n=function(e,t,n,r){return Se(e).onAuthStateChanged(t,n,r)}(e,(function(e){return Ha(void 0,void 0,void 0,(function(){var n;return Wa(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),a(n),[3,4];case 4:return o(e),[2]}}))}))}),a);return function(){n()}}),[e]),[s,i,r]};function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Ka||(Ka={}));var Ja,Za="popstate";function eo(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function to(e){return{usr:e.state,key:e.key}}function no(e,t,n,r){return void 0===n&&(n=null),Xa({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?io(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ro(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function io(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ao(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:ro(e);return eo(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function oo(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,l=o.history,c=Ka.Pop,f=null;function h(){c=Ka.Pop,f&&f({action:c,location:d.location})}var d={get action(){return c},get location(){return e(o,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Za,h),f=e,function(){o.removeEventListener(Za,h),f=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=ao("string"===typeof e?e:ro(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=Ka.Push;var r=no(d.location,e,t);n&&n(r,e);var i=to(r),a=d.createHref(r);try{l.pushState(i,"",a)}catch(nh){o.location.assign(a)}u&&f&&f({action:c,location:d.location})},replace:function(e,t){c=Ka.Replace;var r=no(d.location,e,t);n&&n(r,e);var i=to(r),a=d.createHref(r);l.replaceState(i,"",a),u&&f&&f({action:c,location:d.location})},go:function(e){return l.go(e)}};return d}function so(e,t,n){void 0===n&&(n="/");var r=yo(("string"===typeof t?io(t):t).pathname||"/",n);if(null==r)return null;var i=uo(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=po(i[o],mo(r));return a}function uo(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(eo(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=_o([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(eo(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),uo(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:ho(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=_(lo(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function lo(e){var n=e.split("/");if(0===n.length)return[];var r,u=o(r=n)||t(r)||i(r)||s(),l=u[0],c=u.slice(1),f=l.endsWith("?"),h=l.replace(/\?$/,"");if(0===c.length)return f?[h,""]:[h];var d=lo(c.join("/")),p=[];return p.push.apply(p,a(d.map((function(e){return""===e?h:[h,e].join("/")})))),f&&p.push.apply(p,a(d)),p.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ja||(Ja={}));var co=/^:\w+$/,fo=function(e){return"*"===e};function ho(e,t){var n=e.split("/"),r=n.length;return n.some(fo)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!fo(e)})).reduce((function(e,t){return e+(co.test(t)?3:""===t?1:10)}),r)}function po(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=vo({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var f=s.route;a.push({params:r,pathname:_o([i,c.pathname]),pathnameBase:xo(_o([i,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(i=_o([i,c.pathnameBase]))}return a}function vo(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);go("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";l=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(nh){return go(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+nh+")."),e}}(c[n]||"",t),e}),{});return{params:f,pathname:s,pathnameBase:l,pattern:e}}function mo(e){try{return decodeURI(e)}catch(nh){return go(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+nh+")."),e}}function yo(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function go(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Vc){}}}function bo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ko(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function wo(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=io(e):(eo(!(i=Xa({},e)).pathname||!i.pathname.includes("?"),bo("?","pathname","search",i)),eo(!i.pathname||!i.pathname.includes("#"),bo("#","pathname","hash",i)),eo(!i.search||!i.search.includes("#"),bo("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?io(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Eo(a),hash:Co(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!f&&!h||(c.pathname+="/"),c}var _o=function(e){return e.join("/").replace(/\/\/+/g,"/")},xo=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Eo=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Co=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},So=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(O(Error));var To=N((function e(t,n,r,i){S(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function Io(e){return e instanceof To}var No=["post","put","patch","delete"],Ro=(new Set(No),["get"].concat(No));new Set(Ro),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function Po(){return Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Po.apply(this,arguments)}var Oo="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Ao=l.useState,Lo=l.useEffect,jo=l.useLayoutEffect,Do=l.useDebugValue;function Mo(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Oo(n,r)}catch(nh){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,c.useSyncExternalStore;var Fo=l.createContext(null);var Uo=l.createContext(null);var Vo=l.createContext(null);var qo=l.createContext(null);var zo=l.createContext(null);var Bo=l.createContext({outlet:null,matches:[]});var Ho=l.createContext(null);function Wo(){return null!=l.useContext(zo)}function Ko(){return Wo()||eo(!1),l.useContext(zo).location}function Go(){Wo()||eo(!1);var e=l.useContext(qo),t=e.basename,n=e.navigator,r=l.useContext(Bo).matches,i=Ko().pathname,a=JSON.stringify(ko(r).map((function(e){return e.pathnameBase}))),o=l.useRef(!1);l.useEffect((function(){o.current=!0}));var s=l.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=wo(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:_o([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}else n.go(e)}),[t,n,a,i]);return s}function Qo(){var e=l.useContext(Bo).matches,t=e[e.length-1];return t?t.params:{}}function Yo(e,t){var n=(void 0===t?{}:t).relative,r=l.useContext(Bo).matches,i=Ko().pathname,a=JSON.stringify(ko(r).map((function(e){return e.pathnameBase})));return l.useMemo((function(){return wo(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function $o(){var e=function(){var e,t=l.useContext(Ho),n=ns(Jo.UseRouteError),r=rs(Jo.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Io(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unhandled Thrown Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:i},n):null,l.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),l.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",l.createElement("code",{style:a},"errorElement")," props on\xa0",l.createElement("code",{style:a},"<Route>")))}var Xo,Jo,Zo=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return N(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?l.createElement(Bo.Provider,{value:this.props.routeContext},l.createElement(Ho.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(l.Component);function es(e){var t=e.routeContext,n=e.match,r=e.children,i=l.useContext(Fo);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(Bo.Provider,{value:t},r)}function ts(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||eo(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((function(e,a,o){var s=a.route.id?null==i?void 0:i[a.route.id]:null,u=n?a.route.errorElement||l.createElement($o,null):null,c=t.concat(r.slice(0,o+1)),f=function(){return l.createElement(es,{match:a,routeContext:{outlet:e,matches:c}},s?u:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===o)?l.createElement(Zo,{location:n.location,component:u,error:s,children:f(),routeContext:{outlet:null,matches:c}}):f()}),null)}function ns(e){var t=l.useContext(Uo);return t||eo(!1),t}function rs(e){var t=function(e){var t=l.useContext(Bo);return t||eo(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||eo(!1),n.route.id}!function(e){e.UseRevalidator="useRevalidator"}(Xo||(Xo={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Jo||(Jo={}));var is;function as(e){var t=e.to,n=e.replace,r=e.state,i=e.relative;Wo()||eo(!1);var a=l.useContext(Uo),o=Go();return l.useEffect((function(){a&&"idle"!==a.navigation.state||o(t,{replace:n,state:r,relative:i})})),null}function os(e){eo(!1)}function ss(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,s=void 0===o?Ka.Pop:o,u=e.navigator,c=e.static,f=void 0!==c&&c;Wo()&&eo(!1);var h=n.replace(/^\/*/,"/"),d=l.useMemo((function(){return{basename:h,navigator:u,static:f}}),[h,u,f]);"string"===typeof a&&(a=io(a));var p=a,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,b=p.hash,k=void 0===b?"":b,w=p.state,_=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,C=l.useMemo((function(){var e=yo(m,h);return null==e?null:{pathname:e,search:g,hash:k,state:_,key:E}}),[h,m,g,k,_,E]);return null==C?null:l.createElement(qo.Provider,{value:d},l.createElement(zo.Provider,{children:i,value:{location:C,navigationType:s}}))}function us(e){var t=e.children,n=e.location,r=l.useContext(Fo);return function(e,t){Wo()||eo(!1);var n,r=l.useContext(qo).navigator,i=l.useContext(Uo),a=l.useContext(Bo).matches,o=a[a.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,Ko());if(t){var f,h="string"===typeof t?io(t):t;"/"===u||(null==(f=h.pathname)?void 0:f.startsWith(u))||eo(!1),n=h}else n=c;var d=n.pathname||"/",p=so(e,{pathname:"/"===u?d:d.slice(u.length)||"/"}),v=ts(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:_o([u,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:_o([u,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,i||void 0);return t&&v?l.createElement(zo.Provider,{value:{location:Po({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:Ka.Pop}},v):v}(r&&!t?r.router.routes:cs(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(is||(is={}));var ls=new Promise((function(){}));l.Component;function cs(e,t){void 0===t&&(t=[]);var n=[];return l.Children.forEach(e,(function(e,r){if(l.isValidElement(e))if(e.type!==l.Fragment){e.type!==os&&eo(!1),e.props.index&&e.props.children&&eo(!1);var i=[].concat(a(t),[r]),o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=cs(e.props.children,i)),n.push(o)}else n.push.apply(n,cs(e.props.children,t))})),n}function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fs.apply(this,arguments)}function hs(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ds=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ps=["aria-current","caseSensitive","className","end","style","to","children"];function vs(e){var t,n=e.basename,r=e.children,i=e.window,a=l.useRef();null==a.current&&(a.current=(void 0===(t={window:i,v5Compat:!0})&&(t={}),oo((function(e,t){var n=e.location;return no("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ro(t)}),null,t)));var o=a.current,s=u(l.useState({action:o.action,location:o.location}),2),c=s[0],f=s[1];return l.useLayoutEffect((function(){return o.listen(f)}),[o]),l.createElement(ss,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:o})}var ms=l.forwardRef((function(e,t){var n=e.onClick,r=e.relative,i=e.reloadDocument,a=e.replace,o=e.state,s=e.target,u=e.to,c=e.preventScrollReset,f=hs(e,ds),h=function(e,t){var n=(void 0===t?{}:t).relative;Wo()||eo(!1);var r=l.useContext(qo),i=r.basename,a=r.navigator,o=Yo(e,{relative:n}),s=o.hash,u=o.pathname,c=o.search,f=u;return"/"!==i&&(f="/"===u?i:_o([i,u])),a.createHref({pathname:f,search:c,hash:s})}(u,{relative:r}),d=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,a=n.state,o=n.preventScrollReset,s=n.relative,u=Go(),c=Ko(),f=Yo(e,{relative:s});return l.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==i?i:ro(c)===ro(f);u(e,{replace:n,state:a,preventScrollReset:o,relative:s})}}),[c,u,f,i,a,r,e,o,s])}(u,{replace:a,state:o,target:s,preventScrollReset:c,relative:r});return l.createElement("a",fs({},f,{href:h,onClick:i?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:s}))}));var ys=l.forwardRef((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.caseSensitive,a=void 0!==i&&i,o=e.className,s=void 0===o?"":o,u=e.end,c=void 0!==u&&u,f=e.style,h=e.to,d=e.children,p=hs(e,ps),v=Yo(h,{relative:p.relative}),m=Ko(),y=l.useContext(Uo),g=l.useContext(qo).navigator,b=g.encodeLocation?g.encodeLocation(v).pathname:v.pathname,k=m.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(k=k.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase());var _,x=k===b||!c&&k.startsWith(b)&&"/"===k.charAt(b.length),E=null!=w&&(w===b||!c&&w.startsWith(b)&&"/"===w.charAt(b.length)),C=x?r:void 0;_="function"===typeof s?s({isActive:x,isPending:E}):[s,x?"active":null,E?"pending":null].filter(Boolean).join(" ");var S="function"===typeof f?f({isActive:x,isPending:E}):f;return l.createElement(ms,fs({},p,{"aria-current":C,className:_,ref:t,style:S,to:h}),"function"===typeof d?d({isActive:x,isPending:E}):d)}));var gs,bs;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(gs||(gs={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(bs||(bs={}));var ks,ws=n(404),_s=n.n(ws);!function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(ks||(ks={}));var xs=function(){function e(t,n){S(this,e),this.text=void 0,this.level=void 0,this.id=void 0,this.text=t,this.level=n,this.id=new(_s())({length:8})()}return N(e,[{key:"getText",value:function(){return this.text}},{key:"getLevel",value:function(){return this.level}}]),e}();_t("firebase","9.15.0","app");var Es=kt({apiKey:"AIzaSyDpmQu_EB_9ott_-HWFYkZj-0dCVG-AQIk",authDomain:"cmaoyt.firebaseapp.com",databaseURL:"https://cmaoyt-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cmaoyt",storageBucket:"cmaoyt.appspot.com",messagingSenderId:"869221824076",appId:"1:869221824076:web:1755ad497227c5326366e9",measurementId:"G-ZEMPCX8DZG"}),Cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt(),t=vt(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Zt(e,{popupRedirectResolver:La,persistence:[Oi,si,li]}),r=ne("authTokenSyncURL");if(r){var i=Ba(r);ti(n,i,(function(){return i(n.currentUser)})),ei(n,(function(e){return i(e)}))}var a=Z("auth");return a&&cr(n,"http://".concat(a)),n}(Es),Ss=function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ts=function(){var e=C(x().mark((function e(t,n,r,i){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zr(Cs,t,n);case 3:i(!1),null===r||void 0===r||r.addMessage("Login successful",ks.Info),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),null===r||void 0===r||r.addMessage(e.t0,ks.Info);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Is=function(){var e=C(x().mark((function e(t,n,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ns=function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rs=function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ni(Cs);case 3:null===t||void 0===t||t.addMessage("Logout successful",ks.Info),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),null===t||void 0===t||t.addMessage(e.t0,ks.Info);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ps=n(184);var Os=function(){var e=u((0,l.useState)(""),2),t=e[0],n=e[1],r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)(""),2),s=o[0],c=o[1],f=u($a(Cs),2),h=f[0],d=f[1];return(0,l.useEffect)((function(){}),[h,d]),(0,Ps.jsx)("div",{className:"register",children:(0,Ps.jsxs)("div",{className:"register__container",children:[(0,Ps.jsx)("input",{type:"text",className:"register__textBox",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Full Name"}),(0,Ps.jsx)("input",{type:"text",className:"register__textBox",value:t,onChange:function(e){return n(e.target.value)},placeholder:"E-mail Address"}),(0,Ps.jsx)("input",{type:"password",className:"register__textBox",value:i,onChange:function(e){return a(e.target.value)},placeholder:"Password"}),(0,Ps.jsx)("button",{className:"register__btn",onClick:function(){s||alert("Please enter name"),Is(s,t,i)},children:"Register"}),(0,Ps.jsx)("button",{className:"register__btn register__google",onClick:Ss,children:"Register with Google"}),(0,Ps.jsxs)("div",{children:["Already have an account? ",(0,Ps.jsx)(ms,{to:"/",children:"Login"})," now."]})]})})};var As=function(){var e=u((0,l.useState)(""),2),t=e[0],n=e[1],r=u($a(Cs),3),i=r[0],a=r[1],o=(r[2],Go());return(0,l.useEffect)((function(){a||i&&o("/dashboard")}),[i,a]),(0,Ps.jsx)("div",{className:"reset",children:(0,Ps.jsxs)("div",{className:"reset__container",children:[(0,Ps.jsx)("input",{type:"text",className:"reset__textBox",value:t,onChange:function(e){return n(e.target.value)},placeholder:"E-mail Address"}),(0,Ps.jsx)("button",{className:"reset__btn",onClick:function(){return Ns(t)},children:"Send password reset email"}),(0,Ps.jsxs)("div",{children:["Don't have an account? ",(0,Ps.jsx)(ms,{to:"/register",children:"Register"})," now."]})]})})},Ls=n.p+"static/media/logo.1f8a2c573a4934509d43.png",js=n.p+"static/media/leaf.f07c80c5394865290fa7.png",Ds=function(){return(0,Ps.jsxs)("div",{className:"flex flex-wrap max-w-[75rem] mt-12 justify-center md:flex-nowrap",children:[(0,Ps.jsx)("img",{src:Ls,alt:"Logo",className:"aspect-square max-h-[600px] max-w-[600px] w-11/12 md:w-fit"}),(0,Ps.jsxs)("div",{className:"flex py-2 mx-3 sm:pt-10 sm:mx-4 md:block",children:[(0,Ps.jsxs)("div",{className:"text-4xl text-center sm:text-5xl lg:text-left text-navy-600",children:[(0,Ps.jsx)("h1",{children:"Cooking Meth &"}),(0,Ps.jsx)("h1",{className:"lg:mt-4 lg:pl-10",children:"Other Yummy Things"})]}),(0,Ps.jsx)("img",{className:"align-left pt-2 md:pl-10 md:mt-10 md:pt-10 aspect-square max-h-[380px] max-w-[380px] w-1/3 md:w-full",src:js,alt:"background"})]})]})},Ms="/",Fs="/403",Us=function(e,t,n){return void 0===n?"/".concat(e,"/").concat(t):"/".concat(e,"/category/").concat(n,"/").concat(t)},Vs="/desserts/index",qs="/meals/index",zs="/beverages/index",Bs="/recipe/new/",Hs=function(e,t,n){return void 0===n?"/edit/".concat(e,"/").concat(t):"/edit/".concat(e,"/category/").concat(n,"/").concat(t)};function Ws(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ks(e,t){if(e in t){for(var n=t[e],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return"function"==typeof n?n.apply(void 0,i):n}var o=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((function(e){return'"'.concat(e,'"')})).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(o,Ks),o}var Gs=["static"],Qs=["unmount"],Ys=["as","children","refName"],$s=function(e){return e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e}($s||{}),Xs=function(e){return e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e}(Xs||{});function Js(e){var t=e.ourProps,n=e.theirProps,r=e.slot,i=e.defaultTag,a=e.features,o=e.visible,s=void 0===o||o,u=e.name,l=tu(n,t);if(s)return Zs(l,r,i,u);var c=null!=a?a:0;if(2&c){var f=l.static,h=void 0!==f&&f,d=Ws(l,Gs);if(h)return Zs(d,r,i,u)}if(1&c){var p,v=l.unmount,m=void 0===v||v,y=Ws(l,Qs);return Ks(m?0:1,(R(p={},0,(function(){return null})),R(p,1,(function(){return Zs(Ve(Ve({},y),{},{hidden:!0,style:{display:"none"}}),r,i,u)})),p))}return Zs(l,r,i,u)}function Zs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=iu(e,["unmount","static"]),a=i.as,o=void 0===a?n:a,s=i.children,c=i.refName,f=void 0===c?"ref":c,h=Ws(i,Ys),d=void 0!==e.ref?R({},f,e.ref):{},p="function"==typeof s?s(t):s;h.className&&"function"==typeof h.className&&(h.className=h.className(t));var v={};if(t){for(var m=!1,y=[],g=0,b=Object.entries(t);g<b.length;g++){var k=u(b[g],2),w=k[0],_=k[1];"boolean"==typeof _&&(m=!0),!0===_&&y.push(w)}m&&(v["data-headlessui-state"]=y.join(" "))}if(o===l.Fragment&&Object.keys(ru(h)).length>0){if(!(0,l.isValidElement)(p)||Array.isArray(p)&&p.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(r,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(h).map((function(e){return"  - ".concat(e)})).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((function(e){return"  - ".concat(e)})).join("\n")].join("\n"));return(0,l.cloneElement)(p,Object.assign({},tu(p.props,ru(iu(h,["ref"]))),v,d,eu(p.ref,d.ref)))}return(0,l.createElement)(o,Object.assign({},iu(h,["ref"]),o!==l.Fragment&&d,o!==l.Fragment&&v),p)}function eu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every((function(e){return null==e}))?void 0:function(e){var n,r=_(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=i&&("function"==typeof i?i(e):i.current=e)}}catch(a){r.e(a)}finally{r.f()}}}}function tu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];for(var r={},i={},a=0,o=t;a<o.length;a++){var s=o[a];for(var u in s)u.startsWith("on")&&"function"==typeof s[u]?(null!=i[u]||(i[u]=[]),i[u].push(s[u])):r[u]=s[u]}if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((function(e){return[e,void 0]}))));var l=function(e){Object.assign(r,R({},e,(function(t){for(var n=i[e],r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var s,u=_(n);try{for(u.s();!(s=u.n()).done;){var l=s.value;if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;l.apply(void 0,[t].concat(a))}}catch(c){u.e(c)}finally{u.f()}})))};for(var c in i)l(c);return r}function nu(e){var t;return Object.assign((0,l.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function ru(e){var t=Object.assign({},e);for(var n in t)void 0===t[n]&&delete t[n];return t}function iu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.assign({},e),i=_(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a in r&&delete r[a]}}catch(o){i.e(o)}finally{i.f()}return r}var au="undefined"==typeof window||"undefined"==typeof document,ou=au?l.useEffect:l.useLayoutEffect;function su(e){var t=(0,l.useRef)(e);return ou((function(){t.current=e}),[e]),t}var uu=function(e){var t=su(e);return l.useCallback((function(){return t.current.apply(t,arguments)}),[t])},lu=Symbol();function cu(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,R({},lu,t))}function fu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,l.useRef)(t);(0,l.useEffect)((function(){r.current=t}),[t]);var i=uu((function(e){var t,n=_(r.current);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i&&("function"==typeof i?i(e):i.current=e)}}catch(a){n.e(a)}finally{n.f()}}));return t.every((function(e){return null==e||(null==e?void 0:e[lu])}))?void 0:i}var hu,du={serverHandoffComplete:!1};function pu(){var e=u((0,l.useState)(du.serverHandoffComplete),2),t=e[0],n=e[1];return(0,l.useEffect)((function(){!0!==t&&n(!0)}),[t]),(0,l.useEffect)((function(){!1===du.serverHandoffComplete&&(du.serverHandoffComplete=!0)}),[]),t}var vu=0;function mu(){return++vu}var yu=null!=(hu=l.useId)?hu:function(){var e=pu(),t=u(l.useState(e?mu:null),2),n=t[0],r=t[1];return ou((function(){null===n&&r(mu())}),[n]),null!=n?""+n:void 0},gu=function(e){return e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e}(gu||{});function bu(e){for(var t=e.parentElement,n=null;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;var r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;for(var t=e.previousElementSibling;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function ku(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function wu(){var e=[],t=[],n={enqueue:function(e){t.push(e)},addEventListener:function(e,t,r,i){return e.addEventListener(t,r,i),n.add((function(){return e.removeEventListener(t,r,i)}))},requestAnimationFrame:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=requestAnimationFrame.apply(void 0,arguments);return n.add((function(){return cancelAnimationFrame(e)}))})),nextFrame:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.requestAnimationFrame((function(){return n.requestAnimationFrame.apply(n,t)}))},setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=setTimeout.apply(void 0,arguments);return n.add((function(){return clearTimeout(e)}))})),microTask:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i={current:!0};return ku((function(){i.current&&t[0]()})),n.add((function(){i.current=!1}))},add:function(t){return e.push(t),function(){var n=e.indexOf(t);n>=0&&(0,u(e.splice(n,1),1)[0])()}},dispose:function(){var t,n=_(e.splice(0));try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(r){n.e(r)}finally{n.f()}},workQueue:function(){return C(x().mark((function e(){var n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_(t.splice(0)),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()}};return n}function _u(e){return au?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}var xu,Eu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((function(e){return"".concat(e,":not([tabindex='-1'])")})).join(","),Cu=((xu=Cu||{})[xu.First=1]="First",xu[xu.Previous=2]="Previous",xu[xu.Next=4]="Next",xu[xu.Last=8]="Last",xu[xu.WrapAround=16]="WrapAround",xu[xu.NoScroll=32]="NoScroll",xu),Su=function(e){return e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e}(Su||{}),Tu=function(e){return e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e}(Tu||{});function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(Eu)).sort((function(e,t){return Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))}))}var Nu=function(e){return e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e}(Nu||{});function Ru(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e!==(null==(n=_u(e))?void 0:n.body)&&Ks(r,(R(t={},0,(function(){return e.matches(Eu)})),R(t,1,(function(){for(var t=e;null!==t;){if(t.matches(Eu))return!0;t=t.parentElement}return!1})),t))}function Pu(e){var t=_u(e);wu().nextFrame((function(){t&&!Ru(t.activeElement,0)&&Ou(e)}))}function Ou(e){null==e||e.focus({preventScroll:!0})}var Au=["textarea","input"].join(",");function Lu(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Au))&&n}function ju(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e.slice().sort((function(e,n){var r=t(e),i=t(n);if(null===r||null===i)return 0;var a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function Du(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sorted,i=void 0===r||r,a=n.relativeTo,o=void 0===a?null:a,s=n.skipElements,u=void 0===s?[]:s,l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?i?ju(e):e:Iu(e);u.length>0&&(c=c.filter((function(e){return!u.includes(e)}))),o=null!=o?o:l.activeElement;var f,h=function(){if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),d=function(){if(1&t)return 0;if(2&t)return Math.max(0,c.indexOf(o))-1;if(4&t)return Math.max(0,c.indexOf(o))+1;if(8&t)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),p=32&t?{preventScroll:!0}:{},v=0,m=c.length;do{if(v>=m||v+m<=0)return 0;var y=d+v;if(16&t)y=(y+m)%m;else{if(y<0)return 3;if(y>=m)return 1}null==(f=c[y])||f.focus(p),v+=h}while(f!==l.activeElement);return 6&t&&Lu(f)&&f.select(),f.hasAttribute("tabindex")||f.setAttribute("tabindex","0"),2}var Mu=(0,l.createContext)(null);Mu.displayName="OpenClosedContext";var Fu=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(Fu||{});function Uu(){return(0,l.useContext)(Mu)}function Vu(e){var t=e.value,n=e.children;return l.createElement(Mu.Provider,{value:t},n)}function qu(e){var t;if(e.type)return e.type;var n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function zu(e,t){var n=u((0,l.useState)((function(){return qu(e)})),2),r=n[0],i=n[1];return ou((function(){i(qu(e))}),[e.type,e.as]),ou((function(){r||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&i("button")}),[r,t]),r}function Bu(e,t,n){var r=su(t);(0,l.useEffect)((function(){function t(e){r.current(e)}return document.addEventListener(e,t,n),function(){return document.removeEventListener(e,t,n)}}),[e,n])}function Hu(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,l.useRef)(!1);function i(n,i){if(r.current&&!n.defaultPrevented){var a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e),o=i(n);if(null!==o&&o.getRootNode().contains(o)){var s,u=_(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(null!==l){var c=l instanceof HTMLElement?l:l.current;if(null!=c&&c.contains(o)||n.composed&&n.composedPath().includes(c))return}}}catch(f){u.e(f)}finally{u.f()}return!Ru(o,Nu.Loose)&&-1!==o.tabIndex&&n.preventDefault(),t(n,o)}}}(0,l.useEffect)((function(){requestAnimationFrame((function(){r.current=n}))}),[n]);var a=(0,l.useRef)(null);Bu("mousedown",(function(e){var t,n;r.current&&(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),Bu("click",(function(e){!a.current||(i(e,(function(){return a.current})),a.current=null)}),!0),Bu("blur",(function(e){return i(e,(function(){return window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null}))}),!0)}function Wu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.useMemo)((function(){return _u.apply(void 0,t)}),[].concat(t))}function Ku(e,t,n,r){var i=su(n);(0,l.useEffect)((function(){function n(e){i.current(e)}return(e=null!=e?e:window).addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}),[e,t,r])}var Gu=["features"],Qu=function(e){return e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e}(Qu||{}),Yu=nu((function(e,t){var n=e.features,r=void 0===n?1:n,i=Ws(e,Gu);return Js({ourProps:{ref:t,"aria-hidden":2===(2&r)||void 0,style:Ve({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},4===(4&r)&&2!==(2&r)&&{display:"none"})},theirProps:i,slot:{},defaultTag:"div",name:"Hidden"})}));var $u=function(e){return e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e}($u||{});function Xu(){var e=(0,l.useRef)(0);return function(e,t,n){var r=su(t);(0,l.useEffect)((function(){function t(e){r.current(e)}return window.addEventListener(e,t,n),function(){return window.removeEventListener(e,t,n)}}),[e,n])}("keydown",(function(t){"Tab"===t.key&&(e.current=t.shiftKey?1:0)}),!0),e}var Ju,Zu=["id"],el=["id"],tl=["id","focus"],nl=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(nl||{}),rl=function(e){return e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e}(rl||{}),il=(R(Ju={},0,(function(e){var t;return Ve(Ve({},e),{},{popoverState:Ks(e.popoverState,(t={},R(t,0,1),R(t,1,0),t))})})),R(Ju,1,(function(e){return 1===e.popoverState?e:Ve(Ve({},e),{},{popoverState:1})})),R(Ju,2,(function(e,t){return e.button===t.button?e:Ve(Ve({},e),{},{button:t.button})})),R(Ju,3,(function(e,t){return e.buttonId===t.buttonId?e:Ve(Ve({},e),{},{buttonId:t.buttonId})})),R(Ju,4,(function(e,t){return e.panel===t.panel?e:Ve(Ve({},e),{},{panel:t.panel})})),R(Ju,5,(function(e,t){return e.panelId===t.panelId?e:Ve(Ve({},e),{},{panelId:t.panelId})})),Ju),al=(0,l.createContext)(null);function ol(e){var t=(0,l.useContext)(al);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,ol),n}return t}al.displayName="PopoverContext";var sl=(0,l.createContext)(null);function ul(e){var t=(0,l.useContext)(sl);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,ul),n}return t}sl.displayName="PopoverAPIContext";var ll=(0,l.createContext)(null);function cl(){return(0,l.useContext)(ll)}ll.displayName="PopoverGroupContext";var fl=(0,l.createContext)(null);function hl(e,t){return Ks(t.type,il,e,t)}fl.displayName="PopoverPanelContext";var dl=nu((function(e,t){var n,r,i=(0,l.useRef)(null),a=fu(t,cu((function(e){i.current=e}))),o=(0,l.useReducer)(hl,{popoverState:1,buttons:[],button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,l.createRef)(),afterPanelSentinel:(0,l.createRef)()}),s=u(o,2),c=s[0],f=c.popoverState,h=c.button,d=c.buttonId,p=c.panel,v=c.panelId,m=c.beforePanelSentinel,y=c.afterPanelSentinel,g=s[1],b=Wu(null!=(r=i.current)?r:h),k=(0,l.useMemo)((function(){if(!h||!p)return!1;var e,t=_(document.querySelectorAll("body > *"));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(Number(null==n?void 0:n.contains(h))^Number(null==n?void 0:n.contains(p)))return!0}}catch(l){t.e(l)}finally{t.f()}var r=Iu(),i=r.indexOf(h),a=(i+r.length-1)%r.length,o=(i+1)%r.length,s=r[a],u=r[o];return!p.contains(s)&&!p.contains(u)}),[h,p]),w=su(d),x=su(v),E=(0,l.useMemo)((function(){return{buttonId:w,panelId:x,close:function(){return g({type:1})}}}),[w,x,g]),C=cl(),S=null==C?void 0:C.registerPopover,T=uu((function(){var e;return null!=(e=null==C?void 0:C.isFocusWithinPopoverGroup())?e:(null==b?void 0:b.activeElement)&&((null==h?void 0:h.contains(b.activeElement))||(null==p?void 0:p.contains(b.activeElement)))}));(0,l.useEffect)((function(){return null==S?void 0:S(E)}),[S,E]),Ku(null==b?void 0:b.defaultView,"focus",(function(e){var t,n,r,i;0===f&&(T()||!h||!p||e.target!==window&&(null!=(n=null==(t=m.current)?void 0:t.contains)&&n.call(t,e.target)||null!=(i=null==(r=y.current)?void 0:r.contains)&&i.call(r,e.target)||g({type:1})))}),!0),Hu([h,p],(function(e,t){g({type:1}),Ru(t,Nu.Loose)||(e.preventDefault(),null==h||h.focus())}),0===f);var I=uu((function(e){g({type:1});var t=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:h:h;null==t||t.focus()})),N=(0,l.useMemo)((function(){return{close:I,isPortalled:k}}),[I,k]),P=(0,l.useMemo)((function(){return{open:0===f,close:I}}),[f,I]),O=e,A={ref:a};return l.createElement(al.Provider,{value:o},l.createElement(sl.Provider,{value:N},l.createElement(Vu,{value:Ks(f,(n={},R(n,0,Fu.Open),R(n,1,Fu.Closed),n))},Js({ourProps:A,theirProps:O,slot:P,defaultTag:"div",name:"Popover"}))))})),pl=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-popover-button-".concat(n):r,a=Ws(e,Zu),o=u(ol("Popover.Button"),2),s=o[0],c=o[1],f=ul("Popover.Button").isPortalled,h=(0,l.useRef)(null),d="headlessui-focus-sentinel-".concat(yu()),p=cl(),v=null==p?void 0:p.closeOthers,m=(0,l.useContext)(fl),y=null!==m&&m===s.panelId;(0,l.useEffect)((function(){if(!y)return c({type:3,buttonId:i}),function(){c({type:3,buttonId:null})}}),[i,c]);var g=fu(h,t,y?null:function(e){if(e)s.buttons.push(i);else{var t=s.buttons.indexOf(i);-1!==t&&s.buttons.splice(t,1)}s.buttons.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),e&&c({type:2,button:e})}),b=fu(h,t),k=Wu(h),w=uu((function(e){var t,n,r;if(y){if(1===s.popoverState)return;switch(e.key){case gu.Space:case gu.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),c({type:1}),null==(r=s.button)||r.focus()}}else switch(e.key){case gu.Space:case gu.Enter:e.preventDefault(),e.stopPropagation(),1===s.popoverState&&(null==v||v(s.buttonId)),c({type:0});break;case gu.Escape:if(0!==s.popoverState)return null==v?void 0:v(s.buttonId);if(!h.current||(null==k?void 0:k.activeElement)&&!h.current.contains(k.activeElement))return;e.preventDefault(),e.stopPropagation(),c({type:1})}})),_=uu((function(e){y||e.key===gu.Space&&e.preventDefault()})),x=uu((function(t){var n,r;bu(t.currentTarget)||e.disabled||(y?(c({type:1}),null==(n=s.button)||n.focus()):(t.preventDefault(),t.stopPropagation(),1===s.popoverState&&(null==v||v(s.buttonId)),c({type:0}),null==(r=s.button)||r.focus()))})),E=uu((function(e){e.preventDefault(),e.stopPropagation()})),C=0===s.popoverState,S=(0,l.useMemo)((function(){return{open:C}}),[C]),T=zu(e,h),I=y?{ref:b,type:T,onKeyDown:w,onClick:x}:{ref:g,id:s.buttonId,type:T,"aria-expanded":e.disabled?void 0:0===s.popoverState,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:w,onKeyUp:_,onClick:x,onMouseDown:E},N=Xu(),P=uu((function(){var e=s.panel;e&&function(){var t;Ks(N.current,(R(t={},$u.Forwards,(function(){return Du(e,Cu.First)})),R(t,$u.Backwards,(function(){return Du(e,Cu.Last)})),t))}()}));return l.createElement(l.Fragment,null,Js({ourProps:I,theirProps:a,slot:S,defaultTag:"button",name:"Popover.Button"}),C&&!y&&f&&l.createElement(Yu,{id:d,features:Qu.Focusable,as:"button",type:"button",onFocus:P}))})),vl=$s.RenderStrategy|$s.Static,ml=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-popover-overlay-".concat(n):r,a=Ws(e,el),o=u(ol("Popover.Overlay"),2),s=o[0].popoverState,c=o[1],f=fu(t),h=Uu(),d=null!==h?h===Fu.Open:0===s,p=uu((function(e){if(bu(e.currentTarget))return e.preventDefault();c({type:1})}));return Js({ourProps:{ref:f,id:i,"aria-hidden":!0,onClick:p},theirProps:a,slot:(0,l.useMemo)((function(){return{open:0===s}}),[s]),defaultTag:"div",features:vl,visible:d,name:"Popover.Overlay"})})),yl=$s.RenderStrategy|$s.Static,gl=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-popover-panel-".concat(n):r,o=e.focus,s=void 0!==o&&o,c=Ws(e,tl),f=u(ol("Popover.Panel"),2),h=f[0],d=f[1],p=ul("Popover.Panel"),v=p.close,m=p.isPortalled,y="headlessui-focus-sentinel-before-".concat(yu()),g="headlessui-focus-sentinel-after-".concat(yu()),b=(0,l.useRef)(null),k=fu(b,t,(function(e){d({type:4,panel:e})})),w=Wu(b);(0,l.useEffect)((function(){return d({type:5,panelId:i}),function(){d({type:5,panelId:null})}}),[i,d]);var x=Uu(),E=null!==x?x===Fu.Open:0===h.popoverState,C=uu((function(e){var t;if(e.key===gu.Escape){if(0!==h.popoverState||!b.current||(null==w?void 0:w.activeElement)&&!b.current.contains(w.activeElement))return;e.preventDefault(),e.stopPropagation(),d({type:1}),null==(t=h.button)||t.focus()}}));(0,l.useEffect)((function(){var t;e.static||1===h.popoverState&&(null==(t=e.unmount)||t)&&d({type:4,panel:null})}),[h.popoverState,e.unmount,e.static,d]),(0,l.useEffect)((function(){if(s&&0===h.popoverState&&b.current){var e=null==w?void 0:w.activeElement;b.current.contains(e)||Du(b.current,Cu.First)}}),[s,b,h.popoverState]);var S=(0,l.useMemo)((function(){return{open:0===h.popoverState,close:v}}),[h,v]),T={ref:k,id:h.panelId,onKeyDown:C,onBlur:s&&0===h.popoverState?function(e){var t,n,r,i,a,o=e.relatedTarget;!o||!b.current||null!=(t=b.current)&&t.contains(o)||(d({type:1}),((null==(r=null==(n=h.beforePanelSentinel.current)?void 0:n.contains)?void 0:r.call(n,o))||(null==(a=null==(i=h.afterPanelSentinel.current)?void 0:i.contains)?void 0:a.call(i,o)))&&o.focus({preventScroll:!0}))}:void 0,tabIndex:-1},I=Xu(),N=uu((function(){var e=b.current;e&&function(){var t;Ks(I.current,(R(t={},$u.Forwards,(function(){Du(e,Cu.First)})),R(t,$u.Backwards,(function(){var e;null==(e=h.button)||e.focus({preventScroll:!0})})),t))}()})),P=uu((function(){var e=b.current;e&&function(){var t;Ks(I.current,(R(t={},$u.Forwards,(function(){var e,t,n;if(h.button){var r,i=Iu(),o=i.indexOf(h.button),s=i.slice(0,o+1),u=[].concat(a(i.slice(o+1)),a(s)),l=_(u.slice());try{for(l.s();!(r=l.n()).done;){var c=r.value;if((null==(t=null==(e=null==c?void 0:c.id)?void 0:e.startsWith)?void 0:t.call(e,"headlessui-focus-sentinel-"))||(null==(n=h.panel)?void 0:n.contains(c))){var f=u.indexOf(c);-1!==f&&u.splice(f,1)}}}catch(d){l.e(d)}finally{l.f()}Du(u,Cu.First,{sorted:!1})}})),R(t,$u.Backwards,(function(){return Du(e,Cu.Last)})),t))}()}));return l.createElement(fl.Provider,{value:h.panelId},E&&m&&l.createElement(Yu,{id:y,ref:h.beforePanelSentinel,features:Qu.Focusable,as:"button",type:"button",onFocus:N}),Js({ourProps:T,theirProps:c,slot:S,defaultTag:"div",features:yl,visible:E,name:"Popover.Panel"}),E&&m&&l.createElement(Yu,{id:g,ref:h.afterPanelSentinel,features:Qu.Focusable,as:"button",type:"button",onFocus:P}))})),bl=nu((function(e,t){var n=(0,l.useRef)(null),r=fu(n,t),i=u((0,l.useState)([]),2),o=i[0],s=i[1],c=uu((function(e){s((function(t){var n=t.indexOf(e);if(-1!==n){var r=t.slice();return r.splice(n,1),r}return t}))})),f=uu((function(e){return s((function(t){return[].concat(a(t),[e])})),function(){return c(e)}})),h=uu((function(){var e,t=_u(n);if(!t)return!1;var r=t.activeElement;return!(null==(e=n.current)||!e.contains(r))||o.some((function(e){var n,i;return(null==(n=t.getElementById(e.buttonId.current))?void 0:n.contains(r))||(null==(i=t.getElementById(e.panelId.current))?void 0:i.contains(r))}))})),d=uu((function(e){var t,n=_(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.buttonId.current!==e&&r.close()}}catch(i){n.e(i)}finally{n.f()}})),p=(0,l.useMemo)((function(){return{registerPopover:f,unregisterPopover:c,isFocusWithinPopoverGroup:h,closeOthers:d}}),[f,c,h,d]),v=(0,l.useMemo)((function(){return{}}),[]),m=e,y={ref:r};return l.createElement(ll.Provider,{value:p},Js({ourProps:y,theirProps:m,slot:v,defaultTag:"div",name:"Popover.Group"}))})),kl=Object.assign(dl,{Button:pl,Overlay:ml,Panel:gl,Group:bl});function wl(){var e=(0,l.useRef)(!1);return ou((function(){return e.current=!0,function(){e.current=!1}}),[]),e}function _l(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&r.length>0&&(t=e.classList).add.apply(t,r)}function xl(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&r.length>0&&(t=e.classList).remove.apply(t,r)}function El(e,t,n,r){var i=n?"enter":"leave",o=wu(),s=void 0!==r?function(e){var t={called:!1};return function(){if(!t.called)return t.called=!0,e.apply(void 0,arguments)}}(r):function(){};"enter"===i&&(e.removeAttribute("hidden"),e.style.display="");var l=Ks(i,{enter:function(){return t.enter},leave:function(){return t.leave}}),c=Ks(i,{enter:function(){return t.enterTo},leave:function(){return t.leaveTo}}),f=Ks(i,{enter:function(){return t.enterFrom},leave:function(){return t.leaveFrom}});return xl.apply(void 0,[e].concat(a(t.enter),a(t.enterTo),a(t.enterFrom),a(t.leave),a(t.leaveFrom),a(t.leaveTo),a(t.entered))),_l.apply(void 0,[e].concat(a(l),a(f))),o.nextFrame((function(){xl.apply(void 0,[e].concat(a(f))),_l.apply(void 0,[e].concat(a(c))),function(e,t){var n=wu();if(!e)return n.dispose;var r=getComputedStyle(e),i=[r.transitionDuration,r.transitionDelay].map((function(e){var t=e.split(",").filter(Boolean).map((function(e){return e.includes("ms")?parseFloat(e):1e3*parseFloat(e)})).sort((function(e,t){return t-e})),n=u(t,1)[0];return void 0===n?0:n})),a=u(i,2);if(a[0]+a[1]!==0)var o=n.addEventListener(e,"transitionend",(function(e){e.target===e.currentTarget&&(t(),o())}));else t();n.add((function(){return t()})),n.dispose}(e,(function(){return xl.apply(void 0,[e].concat(a(l))),_l.apply(void 0,[e].concat(a(t.entered))),s()}))})),o.dispose}function Cl(){var e=u((0,l.useState)(wu),1)[0];return(0,l.useEffect)((function(){return function(){return e.dispose()}}),[e]),e}function Sl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var Tl=["beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],Il=["show","appear","unmount"];function Nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").filter((function(e){return e.trim().length>1}))}var Rl=(0,l.createContext)(null);Rl.displayName="TransitionContext";var Pl=function(e){return e.Visible="visible",e.Hidden="hidden",e}(Pl||{});var Ol=(0,l.createContext)(null);function Al(e){return"children"in e?Al(e.children):e.current.filter((function(e){return null!==e.el.current})).filter((function(e){return"visible"===e.state})).length>0}function Ll(e,t){var n=su(e),r=(0,l.useRef)([]),i=wl(),a=Cl(),o=uu((function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xs.Hidden,s=r.current.findIndex((function(t){return t.el===e}));-1!==s&&(Ks(o,(R(t={},Xs.Unmount,(function(){r.current.splice(s,1)})),R(t,Xs.Hidden,(function(){r.current[s].state="hidden"})),t)),a.microTask((function(){var e;!Al(r)&&i.current&&(null==(e=n.current)||e.call(n))})))})),s=uu((function(e){var t=r.current.find((function(t){return t.el===e}));return t?"visible"!==t.state&&(t.state="visible"):r.current.push({el:e,state:"visible"}),function(){return o(e,Xs.Unmount)}})),c=(0,l.useRef)([]),f=(0,l.useRef)(Promise.resolve()),h=(0,l.useRef)({enter:[],leave:[],idle:[]}),d=uu((function(e,n,r){c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter((function(t){return u(t,1)[0]!==e}))),null==t||t.chains.current[n].push([e,new Promise((function(e){c.current.push(e)}))]),null==t||t.chains.current[n].push([e,new Promise((function(e){Promise.all(h.current[n].map((function(e){var t=u(e,2);t[0];return t[1]}))).then((function(){return e()}))}))]),"enter"===n?f.current=f.current.then((function(){return null==t?void 0:t.wait.current})).then((function(){return r(n)})):r(n)})),p=uu((function(e,t,n){Promise.all(h.current[t].splice(0).map((function(e){var t=u(e,2);t[0];return t[1]}))).then((function(){var e;null==(e=c.current.shift())||e()})).then((function(){return n(t)}))}));return(0,l.useMemo)((function(){return{children:r,register:s,unregister:o,onStart:d,onStop:p,wait:f,chains:h}}),[s,o,r,d,p,h,f])}function jl(){}Ol.displayName="NestingContext";var Dl=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Ml(e){for(var t,n={},r=0,i=Dl;r<i.length;r++){var a=i[r];n[a]=null!=(t=e[a])?t:jl}return n}var Fl=$s.RenderStrategy,Ul=nu((function(e,t){var n,r=e.beforeEnter,i=e.afterEnter,o=e.beforeLeave,s=e.afterLeave,c=e.enter,f=e.enterFrom,h=e.enterTo,d=e.entered,p=e.leave,v=e.leaveFrom,m=e.leaveTo,y=Ws(e,Tl),g=(0,l.useRef)(null),b=fu(g,t),k=y.unmount?Xs.Unmount:Xs.Hidden,w=function(){var e=(0,l.useContext)(Rl);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),_=w.show,x=w.appear,E=w.initial,C=u((0,l.useState)(_?"visible":"hidden"),2),S=C[0],T=C[1],I=function(){var e=(0,l.useContext)(Ol);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),N=I.register,P=I.unregister,O=(0,l.useRef)(null);(0,l.useEffect)((function(){return N(g)}),[N,g]),(0,l.useEffect)((function(){var e;if(k===Xs.Hidden&&g.current)return _&&"visible"!==S?void T("visible"):Ks(S,(R(e={},"hidden",(function(){return P(g)})),R(e,"visible",(function(){return N(g)})),e))}),[S,g,N,P,_,k]);var A=su({enter:Nl(c),enterFrom:Nl(f),enterTo:Nl(h),entered:Nl(d),leave:Nl(p),leaveFrom:Nl(v),leaveTo:Nl(m)}),L=function(e){var t=(0,l.useRef)(Ml(e));return(0,l.useEffect)((function(){t.current=Ml(e)}),[e]),t}({beforeEnter:r,afterEnter:i,beforeLeave:o,afterLeave:s}),j=pu();(0,l.useEffect)((function(){if(j&&"visible"===S&&null===g.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[g,S,j]);var D=E&&!x,M=!j||D||O.current===_?"idle":_?"enter":"leave",F=uu((function(e){return Ks(e,{enter:function(){return L.current.beforeEnter()},leave:function(){return L.current.beforeLeave()},idle:function(){}})})),U=uu((function(e){return Ks(e,{enter:function(){return L.current.afterEnter()},leave:function(){return L.current.afterLeave()},idle:function(){}})})),V=Ll((function(){T("hidden"),P(g)}),I);(function(e){var t=e.container,n=e.direction,r=e.classes,i=e.onStart,a=e.onStop,o=wl(),s=Cl(),u=su(n);ou((function(){var e=wu();s.add(e.dispose);var n=t.current;if(n&&"idle"!==u.current&&o.current)return e.dispose(),i.current(u.current),e.add(El(n,r.current,"enter"===u.current,(function(){e.dispose(),a.current(u.current)}))),e.dispose}),[n])})({container:g,classes:A,direction:M,onStart:su((function(e){V.onStart(g,e,F)})),onStop:su((function(e){V.onStop(g,e,U),"leave"===e&&!Al(V)&&(T("hidden"),P(g))}))}),(0,l.useEffect)((function(){!D||(k===Xs.Hidden?O.current=null:O.current=_)}),[_,D,S]);var q=y,z={ref:b};return x&&_&&("undefined"==typeof window||"undefined"==typeof document)&&(q=Ve(Ve({},q),{},{className:Sl.apply(void 0,[y.className].concat(a(A.current.enter),a(A.current.enterFrom)))})),l.createElement(Ol.Provider,{value:V},l.createElement(Vu,{value:Ks(S,(n={},R(n,"visible",Fu.Open),R(n,"hidden",Fu.Closed),n))},Js({ourProps:z,theirProps:q,defaultTag:"div",features:Fl,visible:"visible"===S,name:"Transition.Child"})))})),Vl=nu((function(e,t){var n,r=e.show,i=e.appear,a=void 0!==i&&i,o=e.unmount,s=Ws(e,Il),c=(0,l.useRef)(null),f=fu(c,t);pu();var h=Uu();if(void 0===r&&null!==h&&(r=Ks(h,(R(n={},Fu.Open,!0),R(n,Fu.Closed,!1),n))),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");var d=u((0,l.useState)(r?"visible":"hidden"),2),p=d[0],v=d[1],m=Ll((function(){v("hidden")})),y=u((0,l.useState)(!0),2),g=y[0],b=y[1],k=(0,l.useRef)([r]);ou((function(){!1!==g&&k.current[k.current.length-1]!==r&&(k.current.push(r),b(!1))}),[k,r]);var w=(0,l.useMemo)((function(){return{show:r,appear:a,initial:g}}),[r,a,g]);(0,l.useEffect)((function(){if(r)v("visible");else if(Al(m)){var e=c.current;if(!e)return;var t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&v("hidden")}else v("hidden")}),[r,m]);var _={unmount:o};return l.createElement(Ol.Provider,{value:m},l.createElement(Rl.Provider,{value:w},Js({ourProps:Ve(Ve({},_),{},{as:l.Fragment,children:l.createElement(Ul,Ve(Ve({ref:f},_),s))}),theirProps:{},defaultTag:l.Fragment,features:Fl,visible:"visible"===p,name:"Transition"})))})),ql=nu((function(e,t){var n=null!==(0,l.useContext)(Rl),r=null!==Uu();return l.createElement(l.Fragment,null,!n&&r?l.createElement(Vl,Ve({ref:t},e)):l.createElement(Ul,Ve({ref:t},e)))})),zl=Object.assign(Vl,{Child:ql,Root:Vl}),Bl=["title","titleId"];var Hl=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Bl);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))})),Wl=["title","titleId"];var Kl=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Wl);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))})),Gl=["title","titleId"];var Ql=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Gl);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))})),Yl=["title","titleId"];var $l=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Yl);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 011.5 0v3.75a3 3 0 01-3 3h-6a3 3 0 01-3-3V5.25a3 3 0 013-3h6a3 3 0 013 3V9A.75.75 0 0115 9V5.25a1.5 1.5 0 00-1.5-1.5h-6zm10.72 4.72a.75.75 0 011.06 0l3 3a.75.75 0 010 1.06l-3 3a.75.75 0 11-1.06-1.06l1.72-1.72H9a.75.75 0 010-1.5h10.94l-1.72-1.72a.75.75 0 010-1.06z",clipRule:"evenodd"}))})),Xl=["title","titleId"];var Jl=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Xl);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 011.5 0v3.75a3 3 0 01-3 3h-6a3 3 0 01-3-3V5.25a3 3 0 013-3h6a3 3 0 013 3V9A.75.75 0 0115 9V5.25a1.5 1.5 0 00-1.5-1.5h-6zm5.03 4.72a.75.75 0 010 1.06l-1.72 1.72h10.94a.75.75 0 010 1.5H10.81l1.72 1.72a.75.75 0 11-1.06 1.06l-3-3a.75.75 0 010-1.06l3-3a.75.75 0 011.06 0z",clipRule:"evenodd"}))}));var Zl=function(e){return e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e}(Zl||{});function ec(e,t){var n=t.resolveItems();if(n.length<=0)return null;var r=t.resolveActiveIndex(),i=null!=r?r:-1,a=function(){switch(e.focus){case 0:return n.findIndex((function(e){return!t.resolveDisabled(e)}));case 1:var r=n.slice().reverse().findIndex((function(e,n,r){return!(-1!==i&&r.length-n-1>=i)&&!t.resolveDisabled(e)}));return-1===r?r:n.length-1-r;case 2:return n.findIndex((function(e,n){return!(n<=i)&&!t.resolveDisabled(e)}));case 3:var a=n.slice().reverse().findIndex((function(e){return!t.resolveDisabled(e)}));return-1===a?a:n.length-1-a;case 4:return n.findIndex((function(n){return t.resolveId(n)===e.id}));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}();return-1===a?r:a}function tc(e){var t=e.container,n=e.accept,r=e.walk,i=e.enabled,a=void 0===i||i,o=(0,l.useRef)(n),s=(0,l.useRef)(r);(0,l.useEffect)((function(){o.current=n,s.current=r}),[n,r]),ou((function(){if(t&&a){var e=_u(t);if(e)for(var n=o.current,r=s.current,i=Object.assign((function(e){return n(e)}),{acceptNode:n}),u=e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,i,!1);u.nextNode();)r(u.currentNode)}}),[t,a,o,s])}function nc(e){return[e.screenX,e.screenY]}function rc(){var e=(0,l.useRef)([-1,-1]);return{wasMoved:function(t){var n=nc(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update:function(t){e.current=nc(t)}}}var ic,ac=["id"],oc=["id"],sc=["id","disabled"],uc=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(uc||{}),lc=function(e){return e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e}(lc||{}),cc=function(e){return e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e}(cc||{});function fc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=ju(t(e.items.slice()),(function(e){return e.dataRef.current.domRef.current})),i=n?r.indexOf(n):null;return-1===i&&(i=null),{items:r,activeItemIndex:i}}var hc=(R(ic={},1,(function(e){return 1===e.menuState?e:Ve(Ve({},e),{},{activeItemIndex:null,menuState:1})})),R(ic,0,(function(e){return 0===e.menuState?e:Ve(Ve({},e),{},{menuState:0})})),R(ic,2,(function(e,t){var n,r=fc(e),i=ec(t,{resolveItems:function(){return r.items},resolveActiveIndex:function(){return r.activeItemIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return Ve(Ve(Ve({},e),r),{},{searchQuery:"",activeItemIndex:i,activationTrigger:null!=(n=t.trigger)?n:1})})),R(ic,3,(function(e,t){var n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((function(e){var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),a=i?e.items.indexOf(i):-1;return-1===a||a===e.activeItemIndex?Ve(Ve({},e),{},{searchQuery:r}):Ve(Ve({},e),{},{searchQuery:r,activeItemIndex:a,activationTrigger:1})})),R(ic,4,(function(e){return""===e.searchQuery?e:Ve(Ve({},e),{},{searchQuery:"",searchActiveItemIndex:null})})),R(ic,5,(function(e,t){var n=fc(e,(function(e){return[].concat(a(e),[{id:t.id,dataRef:t.dataRef}])}));return Ve(Ve({},e),n)})),R(ic,6,(function(e,t){var n=fc(e,(function(e){var n=e.findIndex((function(e){return e.id===t.id}));return-1!==n&&e.splice(n,1),e}));return Ve(Ve(Ve({},e),n),{},{activationTrigger:1})})),ic),dc=(0,l.createContext)(null);function pc(e){var t=(0,l.useContext)(dc);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,pc),n}return t}function vc(e,t){return Ks(t.type,hc,e,t)}dc.displayName="MenuContext";var mc=l.Fragment,yc=nu((function(e,t){var n,r=(0,l.useReducer)(vc,{menuState:1,buttonRef:(0,l.createRef)(),itemsRef:(0,l.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),i=u(r,2),a=i[0],o=a.menuState,s=a.itemsRef,c=a.buttonRef,f=i[1],h=fu(t);Hu([c,s],(function(e,t){var n;f({type:1}),Ru(t,Nu.Loose)||(e.preventDefault(),null==(n=c.current)||n.focus())}),0===o);var d=uu((function(){f({type:1})})),p=(0,l.useMemo)((function(){return{open:0===o,close:d}}),[o,d]),v=e,m={ref:h};return l.createElement(dc.Provider,{value:r},l.createElement(Vu,{value:Ks(o,(n={},R(n,0,Fu.Open),R(n,1,Fu.Closed),n))},Js({ourProps:m,theirProps:v,slot:p,defaultTag:mc,name:"Menu"})))})),gc=nu((function(e,t){var n,r=yu(),i=e.id,a=void 0===i?"headlessui-menu-button-".concat(r):i,o=Ws(e,ac),s=u(pc("Menu.Button"),2),c=s[0],f=s[1],h=fu(c.buttonRef,t),d=Cl(),p=uu((function(e){switch(e.key){case gu.Space:case gu.Enter:case gu.ArrowDown:e.preventDefault(),e.stopPropagation(),f({type:0}),d.nextFrame((function(){return f({type:2,focus:Zl.First})}));break;case gu.ArrowUp:e.preventDefault(),e.stopPropagation(),f({type:0}),d.nextFrame((function(){return f({type:2,focus:Zl.Last})}))}})),v=uu((function(e){if(e.key===gu.Space)e.preventDefault()})),m=uu((function(t){if(bu(t.currentTarget))return t.preventDefault();e.disabled||(0===c.menuState?(f({type:1}),d.nextFrame((function(){var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),f({type:0})))})),y=(0,l.useMemo)((function(){return{open:0===c.menuState}}),[c]);return Js({ourProps:{ref:h,id:a,type:zu(e,c.buttonRef),"aria-haspopup":"menu","aria-controls":null==(n=c.itemsRef.current)?void 0:n.id,"aria-expanded":e.disabled?void 0:0===c.menuState,onKeyDown:p,onKeyUp:v,onClick:m},theirProps:o,slot:y,defaultTag:"button",name:"Menu.Button"})})),bc=$s.RenderStrategy|$s.Static,kc=nu((function(e,t){var n,r,i=yu(),a=e.id,o=void 0===a?"headlessui-menu-items-".concat(i):a,s=Ws(e,oc),c=u(pc("Menu.Items"),2),f=c[0],h=c[1],d=fu(f.itemsRef,t),p=Wu(f.itemsRef),v=Cl(),m=Uu(),y=null!==m?m===Fu.Open:0===f.menuState;(0,l.useEffect)((function(){var e=f.itemsRef.current;!e||0===f.menuState&&e!==(null==p?void 0:p.activeElement)&&e.focus({preventScroll:!0})}),[f.menuState,f.itemsRef,p]),tc({container:f.itemsRef.current,enabled:0===f.menuState,accept:function(e){return"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk:function(e){e.setAttribute("role","none")}});var g=uu((function(e){var t,n;switch(v.dispose(),e.key){case gu.Space:if(""!==f.searchQuery)return e.preventDefault(),e.stopPropagation(),h({type:3,value:e.key});case gu.Enter:if(e.preventDefault(),e.stopPropagation(),h({type:1}),null!==f.activeItemIndex)null==(n=null==(t=f.items[f.activeItemIndex].dataRef.current)?void 0:t.domRef.current)||n.click();Pu(f.buttonRef.current);break;case gu.ArrowDown:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:Zl.Next});case gu.ArrowUp:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:Zl.Previous});case gu.Home:case gu.PageUp:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:Zl.First});case gu.End:case gu.PageDown:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:Zl.Last});case gu.Escape:e.preventDefault(),e.stopPropagation(),h({type:1}),wu().nextFrame((function(){var e;return null==(e=f.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case gu.Tab:e.preventDefault(),e.stopPropagation(),h({type:1}),wu().nextFrame((function(){!function(e,t){Du(Iu(),t,{relativeTo:e})}(f.buttonRef.current,e.shiftKey?Cu.Previous:Cu.Next)}));break;default:1===e.key.length&&(h({type:3,value:e.key}),v.setTimeout((function(){return h({type:4})}),350))}})),b=uu((function(e){if(e.key===gu.Space)e.preventDefault()})),k=(0,l.useMemo)((function(){return{open:0===f.menuState}}),[f]);return Js({ourProps:{"aria-activedescendant":null===f.activeItemIndex||null==(n=f.items[f.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(r=f.buttonRef.current)?void 0:r.id,id:o,onKeyDown:g,onKeyUp:b,role:"menu",tabIndex:0,ref:d},theirProps:s,slot:k,defaultTag:"div",features:bc,visible:y,name:"Menu.Items"})})),wc=l.Fragment,_c=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-menu-item-".concat(n):r,a=e.disabled,o=void 0!==a&&a,s=Ws(e,sc),c=u(pc("Menu.Item"),2),f=c[0],h=c[1],d=null!==f.activeItemIndex&&f.items[f.activeItemIndex].id===i,p=(0,l.useRef)(null),v=fu(t,p);ou((function(){if(0===f.menuState&&d&&0!==f.activationTrigger){var e=wu();return e.requestAnimationFrame((function(){var e,t;null==(t=null==(e=p.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}}),[p,d,f.menuState,f.activationTrigger,f.activeItemIndex]);var m=(0,l.useRef)({disabled:o,domRef:p});ou((function(){m.current.disabled=o}),[m,o]),ou((function(){var e,t;m.current.textValue=null==(t=null==(e=p.current)?void 0:e.textContent)?void 0:t.toLowerCase()}),[m,p]),ou((function(){return h({type:5,id:i,dataRef:m}),function(){return h({type:6,id:i})}}),[m,i]);var y=uu((function(){h({type:1})})),g=uu((function(e){if(o)return e.preventDefault();h({type:1}),Pu(f.buttonRef.current)})),b=uu((function(){if(o)return h({type:2,focus:Zl.Nothing});h({type:2,focus:Zl.Specific,id:i})})),k=rc(),w=uu((function(e){return k.update(e)})),_=uu((function(e){!k.wasMoved(e)||o||d||h({type:2,focus:Zl.Specific,id:i,trigger:0})})),x=uu((function(e){!k.wasMoved(e)||o||!d||h({type:2,focus:Zl.Nothing})})),E=(0,l.useMemo)((function(){return{active:d,disabled:o,close:y}}),[d,o,y]);return Js({ourProps:{id:i,ref:v,role:"menuitem",tabIndex:!0===o?void 0:-1,"aria-disabled":!0===o||void 0,disabled:void 0,onClick:g,onFocus:b,onPointerEnter:w,onMouseEnter:w,onPointerMove:_,onMouseMove:_,onPointerLeave:x,onMouseLeave:x},theirProps:s,slot:E,defaultTag:wc,name:"Menu.Item"})})),xc=Object.assign(yc,{Button:gc,Items:kc,Item:_c}),Ec=["title","titleId"];var Cc=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Ec);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"}))})),Sc=function(e){var t=e.dbUser,n=e.handleLogout,r=e.handleLogin;return null!==t&&void 0!==t&&t.isLogged?(0,Ps.jsxs)(xc,{as:"div",children:[(0,Ps.jsx)("div",{children:(0,Ps.jsxs)(xc.Button,{className:"flex rounded-full text-amber-400 hover:text-white",children:[(0,Ps.jsx)("span",{className:"sr-only",children:"Profile"}),(0,Ps.jsx)(Cc,{className:"h-8 w-8 text-white hover:text-amber-400","aria-hidden":"true"})]})}),(0,Ps.jsx)(zl,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,Ps.jsxs)(xc.Items,{className:"z-40 origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,Ps.jsx)(xc.Item,{children:(0,Ps.jsxs)("p",{className:"block px-4 py-2 text-gray-400",children:["Logged as ",t.name]})}),(0,Ps.jsx)(xc.Item,{children:(0,Ps.jsx)("button",{className:"cursor-pointer block px-4 py-2 text-gray-700",onClick:n,children:"Logout"})})]})})]}):(0,Ps.jsx)("button",{onClick:r,className:"whitespace-nowrap inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-navy-700 bg-white hover:bg-yellow-500 hover:text-white",children:"Login"})},Tc=function(){return(0,Ps.jsxs)("div",{className:"absolute left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2",children:[(0,Ps.jsx)("div",{className:"text-center pb-2",children:(0,Ps.jsxs)("svg",{role:"status",className:"inline w-16 h-16 mr-2 text-gray-200 animate-spin dark:text-gray-400 fill-navy-700",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ps.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,Ps.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}),(0,Ps.jsx)("p",{children:"Loading"})]})};function Ic(e,t){var n=(0,l.useRef)([]),r=uu(e);(0,l.useEffect)((function(){var e,i=a(n.current),o=_(t.entries());try{for(o.s();!(e=o.n()).done;){var s=u(e.value,2),l=s[0],c=s[1];if(n.current[l]!==c){var f=r(t,i);return n.current=t,f}}}catch(h){o.e(h)}finally{o.f()}}),[r].concat(a(t)))}var Nc=["initialFocus","containers","features"],Rc=function(e){return e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e}(Rc||{}),Pc=Object.assign(nu((function(e,t){var n=(0,l.useRef)(null),r=fu(n,t),i=e.initialFocus,a=e.containers,o=e.features,s=void 0===o?30:o,u=Ws(e,Nc);pu()||(s=1);var c=Wu(n);Oc({ownerDocument:c},Boolean(16&s));var f=function(e,t){var n=e.ownerDocument,r=e.container,i=e.initialFocus,a=(0,l.useRef)(null),o=wl();return Ic((function(){if(t){var e=r.current;!e||ku((function(){if(o.current){var t=null==n?void 0:n.activeElement;if(null!=i&&i.current){if((null==i?void 0:i.current)===t)return void(a.current=t)}else if(e.contains(t))return void(a.current=t);null!=i&&i.current?Ou(i.current):Du(e,Cu.First)===Su.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=null==n?void 0:n.activeElement}}))}}),[t]),a}({ownerDocument:c,container:n,initialFocus:i},Boolean(2&s));Ac({ownerDocument:c,container:n,containers:a,previousActiveElement:f},Boolean(8&s));var h=Xu(),d=uu((function(e){var t=n.current;t&&function(){var n;Ks(h.current,(R(n={},$u.Forwards,(function(){return Du(t,Cu.First,{skipElements:[e.relatedTarget]})})),R(n,$u.Backwards,(function(){return Du(t,Cu.Last,{skipElements:[e.relatedTarget]})})),n))}()})),p=Cl(),v=(0,l.useRef)(!1),m={ref:r,onKeyDown:function(e){"Tab"==e.key&&(v.current=!0,p.requestAnimationFrame((function(){v.current=!1})))},onBlur:function(e){var t,r=new Set(null==a?void 0:a.current);r.add(n);var i=e.relatedTarget;!i||"true"!==i.dataset.headlessuiFocusGuard&&(Lc(r,i)||(v.current?Du(n.current,Ks(h.current,(R(t={},$u.Forwards,(function(){return Cu.Next})),R(t,$u.Backwards,(function(){return Cu.Previous})),t))|Cu.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&Ou(e.target)))}};return l.createElement(l.Fragment,null,Boolean(4&s)&&l.createElement(Yu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Qu.Focusable}),Js({ourProps:m,theirProps:u,defaultTag:"div",name:"FocusTrap"}),Boolean(4&s)&&l.createElement(Yu,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:Qu.Focusable}))})),{features:Rc});function Oc(e,t){var n=e.ownerDocument,r=(0,l.useRef)(null);Ku(null==n?void 0:n.defaultView,"focusout",(function(e){!t||r.current||(r.current=e.target)}),!0),Ic((function(){t||((null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&Ou(r.current),r.current=null)}),[t]);var i=(0,l.useRef)(!1);(0,l.useEffect)((function(){return i.current=!1,function(){i.current=!0,ku((function(){!i.current||(Ou(r.current),r.current=null)}))}}),[])}function Ac(e,t){var n=e.ownerDocument,r=e.container,i=e.containers,a=e.previousActiveElement,o=wl();Ku(null==n?void 0:n.defaultView,"focus",(function(e){if(t&&o.current){var n=new Set(null==i?void 0:i.current);n.add(r);var s=a.current;if(s){var u=e.target;u&&u instanceof HTMLElement?Lc(n,u)?(a.current=u,Ou(u)):(e.preventDefault(),e.stopPropagation(),Ou(s)):Ou(a.current)}}}),!0)}function Lc(e,t){var n,r,i=_(e);try{for(i.s();!(r=i.n()).done;){if(null!=(n=r.value.current)&&n.contains(t))return!0}}catch(a){i.e(a)}finally{i.f()}return!1}var jc=new Set,Dc=new Map;function Mc(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function Fc(e){var t=Dc.get(e);!t||(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}var Uc=n(164),Vc=(0,l.createContext)(!1);function qc(){return(0,l.useContext)(Vc)}function zc(e){return l.createElement(Vc.Provider,{value:e.force},e.children)}var Bc=["target"];var Hc=l.Fragment,Wc=nu((function(e,t){var n=e,r=(0,l.useRef)(null),i=fu(cu((function(e){r.current=e})),t),a=Wu(r),o=function(e){var t=qc(),n=(0,l.useContext)(Gc),r=Wu(e),i=(0,l.useState)((function(){if(!t&&null!==n||au)return null;var e=null==r?void 0:r.getElementById("headlessui-portal-root");if(e)return e;if(null===r)return null;var i=r.createElement("div");return i.setAttribute("id","headlessui-portal-root"),r.body.appendChild(i)})),a=u(i,2),o=a[0],s=a[1];return(0,l.useEffect)((function(){null!==o&&(null!=r&&r.body.contains(o)||null==r||r.body.appendChild(o))}),[o,r]),(0,l.useEffect)((function(){t||null!==n&&s(n.current)}),[n,s,t]),o}(r),s=(0,l.useState)((function(){var e;return au?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),c=u(s,1)[0],f=pu(),h=(0,l.useRef)(!1);return ou((function(){if(h.current=!1,o&&c)return o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c)),function(){h.current=!0,ku((function(){var e;!h.current||!o||!c||(o.removeChild(c),o.childNodes.length<=0&&(null==(e=o.parentElement)||e.removeChild(o)))}))}}),[o,c]),f&&o&&c?(0,Uc.createPortal)(Js({ourProps:{ref:i},theirProps:n,defaultTag:Hc,name:"Portal"}),c):null})),Kc=l.Fragment,Gc=(0,l.createContext)(null),Qc=nu((function(e,t){var n=e.target,r=Ws(e,Bc),i={ref:fu(t)};return l.createElement(Gc.Provider,{value:n},Js({ourProps:i,theirProps:r,defaultTag:Kc,name:"Popover.Group"}))})),Yc=Object.assign(Wc,{Group:Qc}),$c=["id"],Xc=(0,l.createContext)(null);function Jc(){var e=(0,l.useContext)(Xc);if(null===e){var t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Jc),t}return e}var Zc=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-description-".concat(n):r,a=Ws(e,$c),o=Jc(),s=fu(t);return ou((function(){return o.register(i)}),[i,o.register]),Js({ourProps:Ve(Ve({ref:s},o.props),{},{id:i}),theirProps:a,slot:o.slot||{},defaultTag:"p",name:o.name||"Description"})})),ef=(0,l.createContext)((function(){}));ef.displayName="StackContext";var tf=function(e){return e[e.Add=0]="Add",e[e.Remove=1]="Remove",e}(tf||{});function nf(e){var t=e.children,n=e.onUpdate,r=e.type,i=e.element,a=e.enabled,o=(0,l.useContext)(ef),s=uu((function(){null==n||n.apply(void 0,arguments),o.apply(void 0,arguments)}));return ou((function(){var e=void 0===a||!0===a;return e&&s(0,r,i),function(){e&&s(1,r,i)}}),[s,r,i,a]),l.createElement(ef.Provider,{value:s},t)}function rf(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}var af=["id","open","onClose","initialFocus","__demoMode"],of=["id"],sf=["id"],uf=["id"],lf=["id"],cf=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(cf||{}),ff=function(e){return e[e.SetTitleId=0]="SetTitleId",e}(ff||{}),hf=R({},0,(function(e,t){return e.titleId===t.id?e:Ve(Ve({},e),{},{titleId:t.id})})),df=(0,l.createContext)(null);function pf(e){var t=(0,l.useContext)(df);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,pf),n}return t}function vf(e,t){return Ks(t.type,hf,e,t)}df.displayName="DialogContext";var mf=$s.RenderStrategy|$s.Static,yf=nu((function(e,t){var n,r=yu(),i=e.id,o=void 0===i?"headlessui-dialog-".concat(r):i,s=e.open,c=e.onClose,f=e.initialFocus,h=e.__demoMode,d=void 0!==h&&h,p=Ws(e,af),v=u((0,l.useState)(0),2),m=v[0],y=v[1],g=Uu();void 0===s&&null!==g&&(s=Ks(g,(R(n={},Fu.Open,!0),R(n,Fu.Closed,!1),n)));var b=(0,l.useRef)(new Set),k=(0,l.useRef)(null),w=fu(k,t),x=(0,l.useRef)(null),E=Wu(k),C=e.hasOwnProperty("open")||null!==g,S=e.hasOwnProperty("onClose");if(!C&&!S)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!C)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!S)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof s)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(s));if("function"!=typeof c)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(c));var T=s?0:1,I=u((0,l.useReducer)(vf,{titleId:null,descriptionId:null,panelRef:(0,l.createRef)()}),2),N=I[0],P=I[1],O=uu((function(){return c(!1)})),A=uu((function(e){return P({type:0,id:e})})),L=!!pu()&&(!d&&0===T),j=m>1,D=null!==(0,l.useContext)(df),M=j?"parent":"leaf";!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ou((function(){if(t&&e.current){var n=e.current,r=_u(n);if(r){jc.add(n);var i,a=_(Dc.keys());try{for(a.s();!(i=a.n()).done;){var o=i.value;o.contains(n)&&(Fc(o),Dc.delete(o))}}catch(s){a.e(s)}finally{a.f()}return r.querySelectorAll("body > *").forEach((function(e){if(e instanceof HTMLElement){var t,n=_(jc);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.contains(r))return}}catch(s){n.e(s)}finally{n.f()}1===jc.size&&(Dc.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Mc(e))}})),function(){if(jc.delete(n),jc.size>0)r.querySelectorAll("body > *").forEach((function(e){if(e instanceof HTMLElement&&!Dc.has(e)){var t,n=_(jc);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.contains(r))return}}catch(s){n.e(s)}finally{n.f()}Dc.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),Mc(e)}}));else{var e,t=_(Dc.keys());try{for(t.s();!(e=t.n()).done;){var i=e.value;Fc(i),Dc.delete(i)}}catch(s){t.e(s)}finally{t.f()}}}}}}),[t])}(k,!!j&&L);var F=uu((function(){var e,t;return[].concat(a(Array.from(null!=(e=null==E?void 0:E.querySelectorAll("body > *, [data-headlessui-portal]"))?e:[]).filter((function(e){return!(!(e instanceof HTMLElement)||e.contains(x.current)||N.panelRef.current&&e.contains(N.panelRef.current))}))),[null!=(t=N.panelRef.current)?t:k.current])}));Hu((function(){return F()}),O,L&&!j),Ku(null==E?void 0:E.defaultView,"keydown",(function(e){e.defaultPrevented||e.key===gu.Escape&&0===T&&(j||(e.preventDefault(),e.stopPropagation(),O()))})),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[document.body]};(0,l.useEffect)((function(){var r;if(t&&e){var i=wu(),a=window.pageYOffset,o=e.documentElement,s=(null!=(r=e.defaultView)?r:window).innerWidth-o.clientWidth;if(c(o,"overflow","hidden"),s>0){var u=o.clientWidth-o.offsetWidth;c(o,"paddingRight","".concat(s-u,"px"))}if(rf()){c(e.body,"marginTop","-".concat(a,"px")),window.scrollTo(0,0);var l=null;i.addEventListener(e,"click",(function(t){if(t.target instanceof HTMLElement)try{var r=t.target.closest("a");if(!r)return;var i=new URL(r.href).hash,a=e.querySelector(i);a&&!n().some((function(e){return e.contains(a)}))&&(l=a)}catch(o){}}),!0),i.addEventListener(e,"touchmove",(function(e){e.target instanceof HTMLElement&&!n().some((function(t){return t.contains(e.target)}))&&e.preventDefault()}),{passive:!1}),i.add((function(){window.scrollTo(0,window.pageYOffset+a),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)}))}return i.dispose}function c(e,t,n){var r=e.style.getPropertyValue(t);return Object.assign(e.style,R({},t,n)),i.add((function(){Object.assign(e.style,R({},t,r))}))}}),[e,t])}(E,0===T&&!D,F),(0,l.useEffect)((function(){if(0===T&&k.current){var e=new IntersectionObserver((function(e){var t,n=_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;0===r.boundingClientRect.x&&0===r.boundingClientRect.y&&0===r.boundingClientRect.width&&0===r.boundingClientRect.height&&O()}}catch(i){n.e(i)}finally{n.f()}}));return e.observe(k.current),function(){return e.disconnect()}}}),[T,k,O]);var U=function(){var e=u((0,l.useState)([]),2),t=e[0],n=e[1];return[t.length>0?t.join(" "):void 0,(0,l.useMemo)((function(){return function(e){var t=uu((function(e){return n((function(t){return[].concat(a(t),[e])})),function(){return n((function(t){var n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))}})),r=(0,l.useMemo)((function(){return{register:t,slot:e.slot,name:e.name,props:e.props}}),[t,e.slot,e.name,e.props]);return l.createElement(Xc.Provider,{value:r},e.children)}}),[n])]}(),V=u(U,2),q=V[0],z=V[1],B=(0,l.useMemo)((function(){return[{dialogState:T,close:O,setTitleId:A},N]}),[T,N,O,A]),H=(0,l.useMemo)((function(){return{open:0===T}}),[T]),W={ref:w,id:o,role:"dialog","aria-modal":0===T||void 0,"aria-labelledby":N.titleId,"aria-describedby":q};return l.createElement(nf,{type:"Dialog",enabled:0===T,element:k,onUpdate:uu((function(e,t,n){var r;"Dialog"===t&&Ks(e,(R(r={},tf.Add,(function(){b.current.add(n),y((function(e){return e+1}))})),R(r,tf.Remove,(function(){b.current.add(n),y((function(e){return e-1}))})),r))}))},l.createElement(zc,{force:!0},l.createElement(Yc,null,l.createElement(df.Provider,{value:B},l.createElement(Yc.Group,{target:k},l.createElement(zc,{force:!1},l.createElement(z,{slot:H,name:"Dialog.Description"},l.createElement(Pc,{initialFocus:f,containers:b,features:L?Ks(M,{parent:Pc.features.RestoreFocus,leaf:Pc.features.All&~Pc.features.FocusLock}):Pc.features.None},Js({ourProps:W,theirProps:p,slot:H,defaultTag:"div",features:mf,visible:0===T,name:"Dialog"})))))))),l.createElement(Yu,{features:Qu.Hidden,ref:x}))})),gf=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-dialog-overlay-".concat(n):r,a=Ws(e,of),o=u(pf("Dialog.Overlay"),1)[0],s=o.dialogState,c=o.close,f=fu(t),h=uu((function(e){if(e.target===e.currentTarget){if(bu(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),c()}}));return Js({ourProps:{ref:f,id:i,"aria-hidden":!0,onClick:h},theirProps:a,slot:(0,l.useMemo)((function(){return{open:0===s}}),[s]),defaultTag:"div",name:"Dialog.Overlay"})})),bf=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-dialog-backdrop-".concat(n):r,a=Ws(e,sf),o=u(pf("Dialog.Backdrop"),2),s=o[0].dialogState,c=o[1],f=fu(t);(0,l.useEffect)((function(){if(null===c.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[c.panelRef]);var h=(0,l.useMemo)((function(){return{open:0===s}}),[s]);return l.createElement(zc,{force:!0},l.createElement(Yc,null,Js({ourProps:{ref:f,id:i,"aria-hidden":!0},theirProps:a,slot:h,defaultTag:"div",name:"Dialog.Backdrop"})))})),kf=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-dialog-panel-".concat(n):r,a=Ws(e,uf),o=u(pf("Dialog.Panel"),2),s=o[0].dialogState,c=fu(t,o[1].panelRef),f=(0,l.useMemo)((function(){return{open:0===s}}),[s]),h=uu((function(e){e.stopPropagation()}));return Js({ourProps:{ref:c,id:i,onClick:h},theirProps:a,slot:f,defaultTag:"div",name:"Dialog.Panel"})})),wf=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-dialog-title-".concat(n):r,a=Ws(e,lf),o=u(pf("Dialog.Title"),1)[0],s=o.dialogState,c=o.setTitleId,f=fu(t);(0,l.useEffect)((function(){return c(i),function(){return c(null)}}),[i,c]);var h=(0,l.useMemo)((function(){return{open:0===s}}),[s]);return Js({ourProps:{ref:f,id:i},theirProps:a,slot:h,defaultTag:"h2",name:"Dialog.Title"})})),_f=Object.assign(yf,{Backdrop:bf,Panel:kf,Overlay:gf,Title:wf,Description:Zc}),xf=function(){return(0,Ps.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-amber-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ps.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ps.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Ef=function(){return(0,Ps.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-navy-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ps.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ps.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},Cf=function(e){var t=e.open,n=e.setOpen,r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)(""),2),s=o[0],c=o[1],f=u($a(Cs),2),h=f[0],d=f[1],p=u((0,l.useState)(!1),2),v=p[0],m=p[1],y=(0,l.useContext)(hL),g=Go();(0,l.useEffect)((function(){h&&g(Ms)}),[h]);var b=function(){n(!1)};return(0,Ps.jsx)(Ps.Fragment,{children:d?(0,Ps.jsx)(Tc,{}):(0,Ps.jsx)(zl,{appear:!0,show:t,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:b,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsx)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,Ps.jsxs)("div",{className:"flex",children:[(0,Ps.jsx)(Cc,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Login"]})}),(0,Ps.jsxs)("div",{className:"mt-4 px-2 w-1/2 grid grid-flow-row-dense gap-y-2 grid-cols-2 auto-rows-max",children:[(0,Ps.jsx)("div",{children:(0,Ps.jsx)("label",{htmlFor:"email",children:"Email: "})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)("input",{id:"email",type:"text",className:"w-50 mx-2 px-2 border rounded-md text-md",value:i,onChange:function(e){return a(e.target.value)},placeholder:"E-mail Address"})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)("label",{htmlFor:"password",children:"Password: "})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)("input",{id:"password",type:"password",className:"w-50 mx-2 px-2 border rounded-md text-md",value:s,onChange:function(e){return c(e.target.value)},placeholder:"Password"})})]}),(0,Ps.jsxs)("div",{className:"mt-8",children:[(0,Ps.jsxs)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){m(!0),Ts(i,s,y,m),n(!1)},children:[v&&(0,Ps.jsx)(Ef,{}),"Login"]}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:b,children:"Cancel"})]})]})})})})]})})})},Sf=["title","titleId"];var Tf=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Sf);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))})),If=function(e){var t=e.user,n=e.handleLogout,r=e.handleLogin;return(0,Ps.jsxs)(kl,{children:[(0,Ps.jsx)("div",{className:"-mr-2 -my-2 md:hidden",children:(0,Ps.jsxs)(kl.Button,{className:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:[(0,Ps.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,Ps.jsx)(Kl,{className:"h-6 w-6 text-navy-600","aria-hidden":"true"})]})}),(0,Ps.jsx)(zl,{as:l.Fragment,enter:"duration-200 ease-out",enterFrom:"opacity-0 scale-100",enterTo:"opacity-100 scale-100",leave:"duration-100 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-100",children:(0,Ps.jsx)(kl.Panel,{focus:!0,className:"absolute top-0 z-40 inset-x-0 p-2 transition transform origin-top-right md:hidden",children:(0,Ps.jsxs)("div",{className:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50",children:[(0,Ps.jsxs)("div",{className:"pt-5 pb-6 px-5",children:[(0,Ps.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ps.jsx)("div",{className:"-mr-2",children:(0,Ps.jsxs)(kl.Button,{className:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-navy-500",children:[(0,Ps.jsx)("span",{className:"sr-only",children:"Close menu"}),(0,Ps.jsx)(Ql,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)(ys,{to:Ms,children:(0,Ps.jsx)("span",{className:"text-amber-400",children:"CMAOYT"})})})]}),(0,Ps.jsx)("div",{className:"mt-6",children:(0,Ps.jsxs)("nav",{className:"grid gap-y-8",children:[(0,Ps.jsx)(ys,{to:Ms,children:(0,Ps.jsx)(kl.Button,{className:" w-full -m-3 p-3 flex items-center rounded-md text-gray-900 hover:bg-gray-50 hover:text-amber-400",children:(0,Ps.jsx)("span",{className:"ml-3 text-base font-medium",children:"Home"})})}),(0,Ps.jsx)(ys,{to:Vs,children:(0,Ps.jsx)(kl.Button,{className:" w-full -m-3 p-3 flex items-center rounded-md text-gray-900 hover:bg-gray-50 hover:text-amber-400",children:(0,Ps.jsx)("span",{className:"ml-3 text-base font-medium",children:"Desserts"})})}),(0,Ps.jsx)(ys,{to:qs,children:(0,Ps.jsx)(kl.Button,{className:" w-full -m-3 p-3 flex items-center rounded-md text-gray-900 hover:bg-gray-50 hover:text-amber-400",children:(0,Ps.jsx)("span",{className:"ml-3 text-base font-medium",children:"Meals"})})}),(0,Ps.jsx)(ys,{to:zs,children:(0,Ps.jsx)(kl.Button,{className:" w-full -m-3 p-3 flex items-center rounded-md text-gray-900 hover:bg-gray-50 hover:text-amber-400",children:(0,Ps.jsx)("span",{className:"ml-3 text-base font-medium",children:"Beverages"})})})]})}),(0,Ps.jsxs)("div",{className:"pt-4",children:["admin"===(null===t||void 0===t?void 0:t.role)&&(0,Ps.jsx)(ys,{to:Bs,children:(0,Ps.jsxs)(kl.Button,{className:"w-full flex items-center justify-center px-4 py-2 mb-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-navy-600 hover:bg-navy-700",children:[(0,Ps.jsx)(Hl,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create"]})}),t&&(0,Ps.jsx)(ys,{to:"/settings",children:(0,Ps.jsxs)(kl.Button,{className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-navy-600 hover:bg-navy-700",children:[(0,Ps.jsx)(Tf,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Settings"]})})]})]}),(0,Ps.jsxs)("div",{className:"py-6 px-5 space-y-6",children:[t&&(0,Ps.jsxs)("div",{children:["Logged as ",t.name]}),(0,Ps.jsx)("div",{children:t?(0,Ps.jsx)("div",{onClick:n,children:(0,Ps.jsxs)(kl.Button,{className:"w-full flex items-center justify-center px-4 py-2 border  rounded-md shadow-sm text-base font-medium",children:[(0,Ps.jsx)($l,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Logout"]})}):(0,Ps.jsx)("div",{onClick:r,children:(0,Ps.jsxs)(kl.Button,{className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-navy-600 hover:bg-navy-700",children:[(0,Ps.jsx)(Jl,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Login"]})})})]})]})})})]})},Nf=function(e){var t=e.user,n=e.handleLogout,r=e.handleLogin;return(0,Ps.jsxs)("div",{className:"absolute hidden inset-y-0 right-0 md:flex items-center pr-2 md:static md:inset-auto md:ml-6 md:pr-0",children:["admin"===(null===t||void 0===t?void 0:t.role)&&(0,Ps.jsx)(ys,{title:"Create",to:Bs,children:(0,Ps.jsxs)("div",{className:"mr-4 whitespace-nowrap inline-flex items-center justify-center px-4 py-2 border border-transparent ring-2 ring-white rounded-md shadow-sm text-base font-medium text-white bg-navy-700 hover:ring-amber-400 hover:text-amber-400",children:[(0,Ps.jsx)(Hl,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Create"]})}),(0,Ps.jsx)("div",{className:"ml-2",children:(0,Ps.jsx)(Sc,{dbUser:t,handleLogout:n,handleLogin:r})})]})},Rf=function(){return(0,Ps.jsxs)("div",{className:"flex-1 flex items-center justify-center md:justify-start",children:[(0,Ps.jsx)("div",{className:"flex-shrink-0 flex",children:(0,Ps.jsx)(ys,{to:Ms,children:(0,Ps.jsx)("span",{className:"text-amber-400 text-lg",children:"CMAOYT"})})}),(0,Ps.jsx)("div",{className:"hidden md:block md:ml-12",children:(0,Ps.jsxs)("div",{className:"flex space-x-6",children:[(0,Ps.jsx)(ys,{to:Ms,title:"Home",className:"text-gray-200 text-lg hover:text-amber-400",children:"Home"}),(0,Ps.jsx)(ys,{to:Vs,title:"Desserts",className:"text-gray-200 text-lg hover:text-amber-400",children:"Desserts"}),(0,Ps.jsx)(ys,{to:qs,title:"Meals",className:"text-gray-200 text-lg hover:text-amber-400",children:"Meals"}),(0,Ps.jsx)(ys,{to:zs,title:"Beverages",className:"text-gray-200 text-lg hover:text-amber-400",children:"Beverages"})]})})]})},Pf=function(){var e=(0,l.useContext)(fL),t=(0,l.useContext)(hL),n=u((0,l.useState)(!1),2),r=n[0],i=n[1],a=Go(),o=function(){var n=C(x().mark((function n(r){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),e.isLogged=!1,e.name="",e.role="",Rs(t),a(Ms);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s=function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Cf,{open:r,setOpen:i}),(0,Ps.jsx)("nav",{className:"w-full border-b bg-navy-700",children:(0,Ps.jsx)("div",{className:"max-w-7xl mx-auto px-2 md:px-6 lg:px-8",children:(0,Ps.jsxs)("div",{className:"relative flex items-center justify-between h-16",children:[(0,Ps.jsx)(If,{user:e,handleLogout:o,handleLogin:s}),(0,Ps.jsx)(Rf,{}),(0,Ps.jsx)(Nf,{user:e,handleLogout:o,handleLogin:s})]})})})]})},Of=function(){return(0,Ps.jsx)("div",{className:"flex flex-row justify-center items-center bg-navy-700 w-full p-4 text-gray-300 text-sm py-5",children:(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("span",{className:"text-amber-400",children:"\xa9 CMAOYT - "}),(0,Ps.jsx)("a",{href:"https://github.com/cmsigrist/cmaoyt.git",target:"_blank",rel:"noreferrer",children:"https://github.com/cmsigrist/cmaoyt.git"})]})})},Af=function(e){return e.toLowerCase().replace(/\W/g,"_")},Lf=function(e){var t=e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));return t.join(" ")},jf=function(e){var t={id:e.id,title:e.title,ingredients:e.ingredients,preparation:e.preparation,yield:e.yield,preparationTime:e.preparationTime,type:e.type,imgURL:e.imgURL};return void 0!==e.ovenTemperature&&(t=Ve(Ve({},t),{},{ovenTemperature:e.ovenTemperature})),void 0!==e.quote&&(t=Ve(Ve({},t),{},{quote:e.quote})),void 0!==e.source&&(t=Ve(Ve({},t),{},{source:e.source})),void 0!==e.category&&(t=Ve(Ve({},t),{},{category:e.category})),t},Df=function(e){var t,n,r=e.metadata;return(0,Ps.jsxs)(ms,{to:(t=r.type,n=r.title,"/".concat(t,"/category/").concat(n)),children:[(0,Ps.jsxs)("div",{className:"flex h-[480px]",children:[1===r.recipes.length&&(0,Ps.jsx)("img",{src:r.recipes[0].imgURL,alt:"",className:"object-cover "}),r.recipes.length>=2&&r.recipes.length<4&&r.recipes.slice(0,2).map((function(e,t){return(0,Ps.jsx)("img",{src:e.imgURL,alt:"",className:"object-cover w-[150px]"})})),r.recipes.length>=4&&r.recipes.slice(0,4).map((function(e,t){return(0,Ps.jsx)("img",{src:e.imgURL,alt:"",className:"object-cover h-[240px] w-[150px]"})}))]}),(0,Ps.jsx)("p",{className:"pt-2 text-md",children:Lf(r.title)})]})},Mf=function(e){var t=e.recipe,n=e.category;return(0,Ps.jsxs)(ms,{to:Us(t.type,t.id,n),children:[(0,Ps.jsx)("img",{src:t.imgURL,alt:"",className:"object-cover h-[480px]"}),(0,Ps.jsx)("p",{className:"pt-2 text-md",children:t.title})]})},Ff=function(e){var t=e.title,n=e.metadata,r=e.category,i=e.loading;return(0,Ps.jsxs)("div",{className:"max-w-[75rem] lg:w-[60rem]",children:[(0,Ps.jsx)("h1",{className:"w-full text-4xl sm:text-5xl break-words py-8",children:t}),i?(0,Ps.jsx)(Tc,{}):(0,Ps.jsx)("div",{className:"my-4 grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-4",children:n.map((function(e){return(0,Ps.jsxs)("div",{className:"hover:text-amber-400 w-[300px] mx-4 md:mx-0",children:[void 0===e.recipes&&(0,Ps.jsx)(Mf,{recipe:e,category:r}),void 0!==e.recipes&&(0,Ps.jsx)(Df,{metadata:e})]},e.title)}))})]})},Uf="@firebase/database",Vf="0.14.0",qf="";var zf=function(){function e(t){S(this,e),this.domStorage_=t,this.prefix_="firebase:"}return N(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ce(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:le(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Bf=function(){function e(){S(this,e),this.cache_={},this.isInMemoryStorage=!0}return N(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return he(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Hf=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zf(t)}}catch(Vc){}return new Bf},Wf=Hf("localStorage"),Kf=Hf("sessionStorage"),Gf=new Fe("@firebase/database"),Qf=function(){var e=1;return function(){return e++}}(),Yf=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,D(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new we;n.update(t);var r=n.digest();return U.encodeByteArray(r)},$f=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ce(r):r,t+=" "}return t},Xf=null,Jf=!0,Zf=function(e,t){D(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Gf.logLevel=Pe.VERBOSE,Xf=Gf.log.bind(Gf),t&&Kf.set("logging_enabled",!0)):"function"===typeof e?Xf=e:(Xf=null,Kf.remove("logging_enabled"))},eh=function(){if(!0===Jf&&(Jf=!1,null===Xf&&!0===Kf.get("logging_enabled")&&Zf(!0)),Xf){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=$f.apply(null,t);Xf(r)}},th=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];eh.apply(void 0,[e].concat(n))}},nh=function(){var e="FIREBASE INTERNAL ERROR: "+$f.apply(void 0,arguments);Gf.error(e)},rh=function(){var e="FIREBASE FATAL ERROR: ".concat($f.apply(void 0,arguments));throw Gf.error(e),new Error(e)},ih=function(){var e="FIREBASE WARNING: "+$f.apply(void 0,arguments);Gf.warn(e)},ah=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},oh="[MIN_NAME]",sh="[MAX_NAME]",uh=function(e,t){if(e===t)return 0;if(e===oh||t===sh)return-1;if(t===oh||e===sh)return 1;var n=mh(e),r=mh(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},lh=function(e,t){return e===t?0:e<t?-1:1},ch=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ce(t))},fh=function e(t){if("object"!==typeof t||null===t)return ce(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ce(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},hh=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function dh(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ph=function(e){D(!ah(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var vh=new RegExp("^-?(0*)\\d{1,10}$"),mh=function(e){if(vh.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},yh=function(e){try{e()}catch(Vc){setTimeout((function(){var t=Vc.stack||"";throw ih("Exception was thrown by user callback.",t),Vc}),Math.floor(0))}},gh=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},bh=function(){function e(t,n){var r=this;S(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ih('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),kh=function(){function e(t,n,r){var i=this;S(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(eh("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ih(e)}}]),e}(),wh=function(){function e(t){S(this,e),this.accessToken=t}return N(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();wh.OWNER="owner";var _h="5",xh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Eh="ac",Ch="websocket",Sh="long_polling",Th=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];S(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wf.get("host:"+t)||this._host}return N(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wf.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Ih(e,t,n){var r;if(D("string"===typeof t,"typeof type must == string"),D("object"===typeof n,"typeof params must == object"),t===Ch)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Sh)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return dh(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Nh=function(){function e(){S(this,e),this.counters_={}}return N(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;he(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return B(this.counters_)}}]),e}(),Rh={},Ph={};function Oh(e){var t=e.toString();return Rh[t]||(Rh[t]=new Nh),Rh[t]}var Ah=function(){function e(t){S(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return N(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&yh((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Lh="start",jh="close",Dh=function(){function e(t,n,r,i,a,o,s){var u=this;S(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=th(t),this.stats_=Oh(n),this.urlFn=function(e){return u.appCheckToken&&(e[Eh]=u.appCheckToken),Ih(n,Sh,e)}}return N(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ah(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Y()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Mh((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Lh)n.id=a,n.password=o;else{if(i!==jh)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Lh]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=_h,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Eh]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&xh.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ce(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=V(t),r=hh(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Y()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ce(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Y()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Mh=function(){function e(t,n,r,i){if(S(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Y())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Qf(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(Vc){eh("frame writing exception"),Vc.stack&&eh(Vc.stack),eh(Vc)}}}return N(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Y()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){eh("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(Vc){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||eh("No IE domain setting required")}catch(Vc){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Fh=null;"undefined"!==typeof MozWebSocket?Fh=MozWebSocket:"undefined"!==typeof WebSocket&&(Fh=WebSocket);var Uh=function(){function e(t,n,r,i,a,o,s){S(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=th(this.connId),this.stats_=Oh(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return N(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wf.set("previous_websocket_failure",!0);try{var r;if(Y()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(_h,"/").concat(qf,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Fh(this.connURL,[],r)}catch(Vc){this.log_("Error instantiating WebSocket.");var s=Vc.message||Vc.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Wf.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=le(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(D(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ce(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=hh(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(Vc){this.log_("Exception thrown from WebSocket.send():",Vc.message||Vc.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=_h,!Y()&&"undefined"!==typeof location&&location.hostname&&xh.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Eh]=r),i&&(a.p=i),Ih(e,Ch,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Fh&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Wf.isInMemoryStorage||!0===Wf.get("previous_websocket_failure")}}]),e}();Uh.responsesRequiredToBeHealthy=2,Uh.healthyTimeout=3e4;var Vh=function(){function e(t){S(this,e),this.initTransports_(t)}return N(e,[{key:"initTransports_",value:function(t){var n=Uh&&Uh.isAvailable(),r=n&&!Uh.previouslyFailed();if(t.webSocketOnly&&(n||ih("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Uh];else{var i,a=this.transports_=[],o=_(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Dh,Uh]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Vh.globalTransportInitialized_=!1;var qh=function(){function e(t,n,r,i,a,o,s,u,l,c){S(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=th("c:"+this.id+":"),this.transportManager_=new Vh(n),this.log_("Connection created"),this.start_()}return N(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=gh((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=ch("t",e),n=ch("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=ch("t",e),n=ch("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=ch("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?nh("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nh("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),_h!==n&&ih("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gh((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gh((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),zh=function(){function e(){S(this,e)}return N(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Bh=function(){function e(t){S(this,e),this.allowedEvents_=t,this.listeners_={},D(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return N(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=a(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){D(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Hh=function(e){y(n,e);var t=w(n);function n(){var e;return S(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||K()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return N(n,[{key:"getInitialEvent",value:function(e){return D("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Bh),Wh=function(){function e(t,n){if(S(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return N(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Kh(){return new Wh("")}function Gh(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Qh(e){return e.pieces_.length-e.pieceNum_}function Yh(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Wh(e.pieces_,t)}function $h(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Xh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Jh(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Wh(t,0)}function Zh(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Wh)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Wh(n,0)}function ed(e){return e.pieceNum_>=e.pieces_.length}function td(e,t){var n=Gh(e),r=Gh(t);if(null===n)return t;if(n===r)return td(Yh(e),Yh(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function nd(e,t){if(Qh(e)!==Qh(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function rd(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Qh(e)>Qh(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var id=N((function e(t,n){S(this,e),this.errorPrefix_=n,this.parts_=Xh(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ce(this.parts_[r]);ad(this)}));function ad(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+od(e))}function od(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var sd=function(e){y(n,e);var t=w(n);function n(){var e,r,i;return S(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return N(n,[{key:"getInitialEvent",value:function(e){return D("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Bh),ud=1e3,ld=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,s,u,l){var c;if(S(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=th("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=ud,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!Y())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return sd.getInstance().on("visible",c.onVisible_,v(c)),-1===e.host.indexOf("fblocal")&&Hh.getInstance().on("online",c.onOnline_,v(c)),c}return N(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ce(i)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new re,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=fe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=fe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ce(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):nh("Unrecognized action received from server: "+ce(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ud,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ud,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ud),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=C(x().mark((function e(){var t,r,i,a,o,s,l,c,f,h,d,p,v,m,y=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,l=null,c=function(){l?l.close():(s=!0,i())},f=function(e){D(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:c,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=u(d,2),v=p[0],m=p[1],s?eh("getToken() completed but was canceled"):(eh("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,l=new qh(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ih(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&ih(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){eh("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){eh("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pe(this.interruptReasons_)&&(this.reconnectDelay_=ud,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return fh(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Wh(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){eh("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){eh("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=_(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=_(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Y()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+qf.replace(/\./g,"-")]=1,K()?e["framework.cordova"]=1:Q()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Hh.getInstance().currentlyOnline();return pe(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&he(e,"w")){var n=de(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ih("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(zh);ld.nextPersistentConnectionId_=0,ld.nextConnectionId_=0;var cd,fd=function(){function e(t,n){S(this,e),this.name=t,this.node=n}return N(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),hd=function(){function e(){S(this,e)}return N(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new fd(oh,e),r=new fd(oh,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return fd.MIN}}]),e}(),dd=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){return uh(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw M("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return fd.MIN}},{key:"maxPost",value:function(){return new fd(sh,cd)}},{key:"makePost",value:function(e,t){return D("string"===typeof e,"KeyIndex indexValue must always be a string."),new fd(e,cd)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return cd},set:function(e){cd=e}}]),n}(hd),pd=new dd,vd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;S(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return N(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),md=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:bd.EMPTY_NODE,this.right=null!=a?a:bd.EMPTY_NODE}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return bd.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return bd.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();md.RED=!0,md.BLACK=!1;var yd,gd=function(){function e(){S(this,e)}return N(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new md(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),bd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;S(this,e),this.comparator_=t,this.root_=n}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,md.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,md.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new vd(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new vd(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new vd(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new vd(this.root_,null,this.comparator_,!0,e)}}]),e}();function kd(e,t){return uh(e.name,t.name)}function wd(e,t){return uh(e,t)}bd.EMPTY_NODE=new gd;var _d,xd,Ed,Cd=function(e){return"number"===typeof e?"number:"+ph(e):"string:"+e},Sd=function(e){if(e.isLeafNode()){var t=e.val();D("string"===typeof t||"number"===typeof t||"object"===typeof t&&he(t,".sv"),"Priority must be a string or number.")}else D(e===yd||e.isEmpty(),"priority of unexpected type.");D(e===yd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Td=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;S(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,D(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Sd(this.priorityNode_)}return N(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ed(t)?this:".priority"===Gh(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Gh(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(D(".priority"!==r||1===Qh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yh(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Cd(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ph(this.value_):this.value_,this.lazyHash_=Yf(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(D(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return D(i>=0,"Unknown leaf type: "+n),D(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return _d},set:function(e){_d=e}}]),e}();Td.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Id,Nd,Rd=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?uh(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return fd.MIN}},{key:"maxPost",value:function(){return new fd(sh,new Td("[PRIORITY-POST]",Ed))}},{key:"makePost",value:function(e,t){var n=xd(e);return new fd(t,new Td("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(hd),Pd=new Rd,Od=Math.log(2),Ad=function(){function e(t){S(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Od,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return N(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ld=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new md(o,a.node,md.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new md(o,a.node,md.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],f=n?n(c):c;u(new md(f,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),f=Math.pow(2,t.count-(l+1));c?s(f,md.BLACK):(s(f,md.BLACK),s(f,md.RED))}return a}(new Ad(e.length));return new bd(r||t,a)},jd={},Dd=function(){function e(t,n){S(this,e),this.indexes_=t,this.indexSet_=n}return N(e,[{key:"get",value:function(e){var t=de(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bd?t:null}},{key:"hasIndex",value:function(e){return he(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){D(t!==pd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(fd.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Ld(i,t.getCompare()):jd;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ve(this.indexes_,(function(e,i){var a=de(r.indexSet_,i);if(D(a,"Missing index implementation for "+i),e===jd){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(fd.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Ld(o,a.getCompare())}return jd}var l=n.get(t.name),c=e;return l&&(c=c.remove(new fd(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ve(this.indexes_,(function(e){if(e===jd)return e;var r=n.get(t.name);return r?e.remove(new fd(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return D(jd&&Pd,"ChildrenNode.ts has not been loaded"),Id=Id||new e({".priority":jd},{".priority":Pd})}}]),e}(),Md=function(){function e(t,n,r){S(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Sd(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return N(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Nd}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Nd:t}},{key:"getChild",value:function(e){var t=Gh(e);return null===t?this:this.getImmediateChild(t).getChild(Yh(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(D(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new fd(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Nd:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Gh(e);if(null===n)return t;D(".priority"!==Gh(e)||1===Qh(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Yh(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Pd,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Cd(this.getPriority().val())+":"),this.forEachChild(Pd,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Yf(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fd(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new fd(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new fd(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,fd.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,fd.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fd?-1:0}},{key:"withIndex",value:function(t){if(t===pd||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===pd||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Pd),r=t.getIterator(Pd),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===pd?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Nd||(Nd=new e(new bd(wd),null,Dd.Default))}}]),e}();Md.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Fd=new(function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.call(this,new bd(wd),Md.EMPTY_NODE,Dd.Default)}return N(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Md.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Md));Object.defineProperties(fd,{MIN:{value:new fd(oh,Md.EMPTY_NODE)},MAX:{value:new fd(sh,Fd)}}),dd.__EMPTY_NODE=Md.EMPTY_NODE,Td.__childrenNodeConstructor=Md,yd=Fd,function(e){Ed=e}(Fd);function Ud(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Md.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),D(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Td(n,Ud(t))}if(e instanceof Array){var r=Md.EMPTY_NODE;return dh(e,(function(t,n){if(he(e,t)&&"."!==t.substring(0,1)){var i=Ud(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Ud(t))}var i=[],a=!1,o=e;if(dh(o,(function(e,t){if("."!==e.substring(0,1)){var n=Ud(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new fd(e,n)))}})),0===i.length)return Md.EMPTY_NODE;var s=Ld(i,kd,(function(e){return e.name}),wd);if(a){var u=Ld(i,Pd.getCompare());return new Md(s,Ud(t),new Dd({".priority":u},{".priority":Pd}))}return new Md(s,Ud(t),Dd.Default)}!function(e){xd=e}(Ud);var Vd=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).indexPath_=e,D(!ed(e)&&".priority"!==Gh(e),"Can't create PathIndex with empty path or .priority key"),r}return N(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?uh(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ud(e),r=Md.EMPTY_NODE.updateChild(this.indexPath_,n);return new fd(t,r)}},{key:"maxPost",value:function(){var e=Md.EMPTY_NODE.updateChild(this.indexPath_,Fd);return new fd(sh,e)}},{key:"toString",value:function(){return Xh(this.indexPath_,0).join("/")}}]),n}(hd),qd=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?uh(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return fd.MIN}},{key:"maxPost",value:function(){return fd.MAX}},{key:"makePost",value:function(e,t){var n=Ud(e);return new fd(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(hd),zd=new qd;function Bd(e){return{type:"value",snapshotNode:e}}function Hd(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Wd(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Kd(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Gd=function(){function e(t){S(this,e),this.index_=t}return N(e,[{key:"updateChild",value:function(e,t,n,r,i,a){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Wd(t,o)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Hd(t,n)):a.trackChildChange(Kd(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Pd,(function(e,r){t.hasChild(e)||n.trackChildChange(Wd(e,r))})),t.isLeafNode()||t.forEachChild(Pd,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Kd(t,r,i))}else n.trackChildChange(Hd(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Md.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Qd=function(){function e(t){S(this,e),this.indexedFilter_=new Gd(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return N(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new fd(t,n))||(n=Md.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Md.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Md.EMPTY_NODE);var i=this;return t.forEachChild(Pd,(function(e,t){i.matches(new fd(e,t))||(r=r.updateImmediateChild(e,Md.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Yd=function(){function e(t){var n=this;S(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Qd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return N(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new fd(t,n))||(n=Md.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Md.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Md.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Md.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:r=r.updateImmediateChild(l.name,Md.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;D(s.numChildren()===this.limit_,"");var u=new fd(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,l,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Kd(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Wd(t,f));var p=s.updateImmediateChild(t,Md.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(Hd(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:c&&a(l,u)>=0?(null!=i&&(i.trackChildChange(Wd(l.name,l.node)),i.trackChildChange(Hd(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Md.EMPTY_NODE)):e}}]),e}(),$d=function(){function e(){S(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pd}return N(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:oh}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sh}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Pd}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Xd(e){var t,n={};if(e.isDefault())return n;if(e.index_===Pd?t="$priority":e.index_===zd?t="$value":e.index_===pd?t="$key":(D(e.index_ instanceof Vd,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ce(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ce(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ce(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ce(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ce(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Jd(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Pd&&(t.i=e.index_.toString()),t}var Zd=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=th("p:rest:"),o.listens_={},o}return N(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=Xd(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),de(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Xd(e._queryParams),r=e._path.toString(),i=new re;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=u(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var l=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ge(n);t.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=le(c.responseText)}catch(Vc){ih("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&ih("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(zh),ep=function(){function e(){S(this,e),this.rootNode_=Md.EMPTY_NODE}return N(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function tp(){return{value:null,children:new Map}}function np(e,t,n){if(ed(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Gh(t);e.children.has(r)||e.children.set(r,tp()),np(e.children.get(r),t=Yh(t),n)}}function rp(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){rp(r,new Wh(t.toString()+"/"+e),n)}))}var ip,ap=function(){function e(t){S(this,e),this.collection_=t,this.last_=null}return N(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&dh(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),op=function(){function e(t,n){S(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new ap(t);var r=1e4+2e4*Math.random();gh(this.reportStats_.bind(this),Math.floor(r))}return N(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;dh(t,(function(t,i){i>0&&he(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),gh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function sp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ip||(ip={}));var up,lp=function(){function e(t,n,r){S(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ip.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return N(e,[{key:"operationForChild",value:function(t){if(ed(this.path)){if(null!=this.affectedTree.value)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Wh(t));return new e(Kh(),n,this.revert)}return D(Gh(this.path)===t,"operationForChild called for unrelated child."),new e(Yh(this.path),this.affectedTree,this.revert)}}]),e}(),cp=function(){function e(t,n){S(this,e),this.source=t,this.path=n,this.type=ip.LISTEN_COMPLETE}return N(e,[{key:"operationForChild",value:function(t){return ed(this.path)?new e(this.source,Kh()):new e(this.source,Yh(this.path))}}]),e}(),fp=function(){function e(t,n,r){S(this,e),this.source=t,this.path=n,this.snap=r,this.type=ip.OVERWRITE}return N(e,[{key:"operationForChild",value:function(t){return ed(this.path)?new e(this.source,Kh(),this.snap.getImmediateChild(t)):new e(this.source,Yh(this.path),this.snap)}}]),e}(),hp=function(){function e(t,n,r){S(this,e),this.source=t,this.path=n,this.children=r,this.type=ip.MERGE}return N(e,[{key:"operationForChild",value:function(t){if(ed(this.path)){var n=this.children.subtree(new Wh(t));return n.isEmpty()?null:n.value?new fp(this.source,Kh(),n.value):new e(this.source,Kh(),n)}return D(Gh(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Yh(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),dp=function(){function e(t,n,r){S(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return N(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ed(e))return this.isFullyInitialized()&&!this.filtered_;var t=Gh(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),pp=N((function e(t){S(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function vp(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw M("Should only compare child_ events.");var r=new fd(t.childName,t.snapshotNode),i=new fd(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function mp(e,t){return{eventCache:e,serverCache:t}}function yp(e,t,n,r){return mp(new dp(t,n,r),e.serverCache)}function gp(e,t,n,r){return mp(e.eventCache,new dp(t,n,r))}function bp(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function kp(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var wp=function(){return up||(up=new bd(lh)),up},_p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wp();S(this,e),this.value=t,this.children=n}return N(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Kh(),value:this.value};if(ed(e))return null;var n=Gh(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Yh(e),t);return null!=i?{path:Zh(new Wh(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ed(t))return this;var n=Gh(t),r=this.children.get(n);return null!==r?r.subtree(Yh(t)):new e(null)}},{key:"set",value:function(t,n){if(ed(t))return new e(n,this.children);var r=Gh(t),i=(this.children.get(r)||new e(null)).set(Yh(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ed(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Gh(t),r=this.children.get(n);if(r){var i,a=r.remove(Yh(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ed(e))return this.value;var t=Gh(e),n=this.children.get(t);return n?n.get(Yh(e)):null}},{key:"setTree",value:function(t,n){if(ed(t))return n;var r,i=Gh(t),a=(this.children.get(i)||new e(null)).setTree(Yh(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Kh(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Zh(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Kh(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ed(e))return null;var i=Gh(e),a=this.children.get(i);return a?a.findOnPath_(Yh(e),Zh(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Kh(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ed(t))return this;this.value&&r(n,this.value);var i=Gh(t),a=this.children.get(i);return a?a.foreachOnPath_(Yh(t),Zh(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Kh(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Zh(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return dh(t,(function(e,t){n=n.set(new Wh(e),t)})),n}}]),e}(),xp=function(){function e(t){S(this,e),this.writeTree_=t}return N(e,null,[{key:"empty",value:function(){return new e(new _p(null))}}]),e}();function Ep(e,t,n){if(ed(t))return new xp(new _p(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=td(i,t);return a=a.updateChild(o,n),new xp(e.writeTree_.set(i,a))}var s=new _p(n),u=e.writeTree_.setTree(t,s);return new xp(u)}function Cp(e,t,n){var r=e;return dh(n,(function(e,n){r=Ep(r,Zh(t,e),n)})),r}function Sp(e,t){if(ed(t))return xp.empty();var n=e.writeTree_.setTree(t,new _p(null));return new xp(n)}function Tp(e,t){return null!=Ip(e,t)}function Ip(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(td(n.path,t)):null}function Np(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Pd,(function(e,n){t.push(new fd(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new fd(e,n.value))})),t}function Rp(e,t){if(ed(t))return e;var n=Ip(e,t);return new xp(null!=n?new _p(n):e.writeTree_.subtree(t))}function Pp(e){return e.writeTree_.isEmpty()}function Op(e,t){return Ap(Kh(),e.writeTree_,t)}function Ap(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(D(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ap(Zh(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Zh(e,".priority"),r)),n}function Lp(e,t){return Qp(t,e)}function jp(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Dp(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));D(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Mp(s,r.path)?i=!1:rd(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Up(e.allWrites,Fp,Kh()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Sp(e.visibleWrites,r.path):dh(r.children,(function(t){e.visibleWrites=Sp(e.visibleWrites,Zh(r.path,t))}));return!0}return!1}function Mp(e,t){if(e.snap)return rd(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&rd(Zh(e.path,n),t))return!0;return!1}function Fp(e){return e.visible}function Up(e,t,n){for(var r=xp.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)rd(n,o)?r=Ep(r,s=td(n,o),a.snap):rd(o,n)&&(s=td(o,n),r=Ep(r,Kh(),a.snap.getChild(s)));else{if(!a.children)throw M("WriteRecord should have .snap or .children");if(rd(n,o))r=Cp(r,s=td(n,o),a.children);else if(rd(o,n))if(ed(s=td(o,n)))r=Cp(r,Kh(),a.children);else{var u=de(a.children,Gh(s));if(u){var l=u.getChild(Yh(s));r=Ep(r,Kh(),l)}}}}}return r}function Vp(e,t,n,r,i){if(r||i){var a=Rp(e.visibleWrites,t);if(!i&&Pp(a))return n;if(i||null!=n||Tp(a,Kh())){return Op(Up(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(rd(e.path,t)||rd(t,e.path))}),t),n||Md.EMPTY_NODE)}return null}var o=Ip(e.visibleWrites,t);if(null!=o)return o;var s=Rp(e.visibleWrites,t);return Pp(s)?n:null!=n||Tp(s,Kh())?Op(s,n||Md.EMPTY_NODE):null}function qp(e,t,n,r){return Vp(e.writeTree,e.treePath,t,n,r)}function zp(e,t){return function(e,t,n){var r=Md.EMPTY_NODE,i=Ip(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Pd,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Rp(e.visibleWrites,t);return n.forEachChild(Pd,(function(e,t){var n=Op(Rp(a,new Wh(e)),t);r=r.updateImmediateChild(e,n)})),Np(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Np(Rp(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Bp(e,t,n,r){return function(e,t,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Zh(t,n);if(Tp(e.visibleWrites,a))return null;var o=Rp(e.visibleWrites,a);return Pp(o)?i.getChild(n):Op(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Hp(e,t){return function(e,t){return Ip(e.visibleWrites,t)}(e.writeTree,Zh(e.treePath,t))}function Wp(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Rp(e.visibleWrites,t),l=Ip(u,Kh());if(null!=l)s=l;else{if(null==n)return[];s=Op(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&c.length<i;)0!==f(d,r)&&c.push(d),d=h.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function Kp(e,t,n){return function(e,t,n,r){var i=Zh(t,n),a=Ip(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Op(Rp(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Gp(e,t){return Qp(Zh(e.treePath,t),e.writeTree)}function Qp(e,t){return{treePath:e,writeTree:t}}var Yp=function(){function e(){S(this,e),this.changeMap=new Map}return N(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;D("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),D(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Kd(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Wd(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Hd(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw M("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Kd(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),$p=new(function(){function e(){S(this,e)}return N(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Xp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return N(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new dp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kp(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:kp(this.viewCache_),i=Wp(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Jp(e,t,n,r,i){var a,o,s=new Yp;if(n.type===ip.OVERWRITE){var u=n;u.source.fromUser?a=tv(e,t,u.path,u.snap,r,i,s):(D(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!ed(u.path),a=ev(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===ip.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Zh(n,r);nv(t,Gh(l))&&(s=tv(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Zh(n,r);nv(t,Gh(l))||(s=tv(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(D(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=iv(e,t,l.path,l.children,r,i,o,s))}else if(n.type===ip.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=Hp(r,n))return t;var s,u=new Xp(r,t,i),l=t.eventCache.getNode();if(ed(n)||".priority"===Gh(n)){var c;if(t.serverCache.isFullyInitialized())c=qp(r,kp(t));else{var f=t.serverCache.getNode();D(f instanceof Md,"serverChildren would be complete if leaf node"),c=zp(r,f)}s=e.filter.updateFullNode(l,c,a)}else{var h=Gh(n),d=Kp(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(l,h,d,Yh(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(l,h,Md.EMPTY_NODE,Yh(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=qp(r,kp(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Hp(r,Kh()),yp(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Hp(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ed(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ev(e,t,n,u.getNode().getChild(n),i,a,s,o);if(ed(n)){var l=new _p(null);return u.getNode().forEachChild(pd,(function(e,t){l=l.set(new Wh(e),t)})),iv(e,t,n,l,i,a,s,o)}return t}var c=new _p(null);return r.foreach((function(e,t){var r=Zh(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),iv(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==ip.LISTEN_COMPLETE)throw M("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=gp(t,a.getNode(),a.isFullyInitialized()||ed(n),a.isFiltered());return Zp(e,o,n,r,$p,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=bp(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Bd(bp(t)))}}(t,a,f),{viewCache:a,changes:f}}function Zp(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Hp(r,n))return t;if(ed(n))if(D(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=kp(t),c=zp(r,l instanceof Md?l:Md.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var f=qp(r,kp(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Gh(n);if(".priority"===h){D(1===Qh(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Bp(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Yh(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var y=Bp(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(h).updateChild(m,y):u.getNode().getImmediateChild(h)}else v=Kp(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,m,i,a):u.getNode()}}return yp(t,o,u.isFullyInitialized()||ed(n),e.filter.filtersNodes())}function ev(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(ed(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{var h=Gh(n);if(!l.isCompleteForPath(n)&&Qh(n)>1)return t;var d=Yh(n),p=l.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),h,p,d,$p,null)}var v=gp(t,u,l.isFullyInitialized()||ed(n),c.filtersNodes());return Zp(e,v,n,i,new Xp(i,v,a),s)}function tv(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new Xp(i,t,a);if(ed(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=yp(t,u,!0,e.filter.filtersNodes());else{var f=Gh(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=yp(t,u,l.isFullyInitialized(),l.isFiltered());else{var h,d=Yh(n),p=l.getNode().getImmediateChild(f);if(ed(d))h=r;else{var v=c.getCompleteChild(f);h=null!=v?".priority"===$h(d)&&v.getChild(Jh(d)).isEmpty()?v:v.updateChild(d,r):Md.EMPTY_NODE}if(p.equals(h))s=t;else s=yp(t,e.filter.updateChild(l.getNode(),f,h,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function nv(e,t){return e.eventCache.isCompleteForChild(t)}function rv(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function iv(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=ed(n)?r:new _p(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=rv(0,t.serverCache.getNode().getImmediateChild(n),r);l=ev(e,l,new Wh(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!u){var f=rv(0,t.serverCache.getNode().getImmediateChild(n),r);l=ev(e,l,new Wh(n),f,i,a,o,s)}})),l}var av,ov=function(){function e(t,n){S(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Gd(i.getIndex()),o=(r=i).loadsAllData()?new Gd(r.getIndex()):r.hasLimit()?new Yd(r):new Qd(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(Md.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Md.EMPTY_NODE,u.getNode(),null),f=new dp(l,s.isFullyInitialized(),a.filtersNodes()),h=new dp(c,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=mp(h,f),this.eventGenerator_=new pp(this.query_)}return N(e,[{key:"query",get:function(){return this.query_}}]),e}();function sv(e,t){var n=kp(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ed(t)&&!n.getImmediateChild(Gh(t)).isEmpty())?n.getChild(t):null}function uv(e){return 0===e.eventRegistrations_.length}function lv(e,t,n){var r=[];if(n){D(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function cv(e,t,n,r){t.type===ip.MERGE&&null!==t.source.queryId&&(D(kp(e.viewCache_),"We should always have a full cache before handling merges"),D(bp(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Jp(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,D(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),D(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),D(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,fv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function fv(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),vp(e,i,"child_removed",t,r,n),vp(e,i,"child_added",t,r,n),vp(e,i,"child_moved",a,r,n),vp(e,i,"child_changed",t,r,n),vp(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var hv,dv=N((function e(){S(this,e),this.views=new Map}));function pv(e){return 0===e.views.size}function vv(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return D(null!=a,"SyncTree gave us an op for an invalid query."),cv(a,t,n,r)}var o,s=[],u=_(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(cv(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function mv(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=qp(n,i?r:null),u=!1;s?u=!0:r instanceof Md?(s=zp(n,r),u=!1):(s=Md.EMPTY_NODE,u=!1);var l=mp(new dp(s,u,!1),new dp(r,i,!1));return new ov(t,l)}return o}function yv(e,t,n,r,i,a){var o=mv(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Pd,(function(e,t){r.push(Hd(e,t))})),n.isFullyInitialized()&&r.push(Bd(n.getNode())),fv(e,r,n.getNode(),t)}(o,n)}function gv(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=xv(e);if("default"===i){var l,c=_(e.views.entries());try{for(c.s();!(l=c.n()).done;){var f=u(l.value,2),h=f[0],d=f[1];o=o.concat(lv(d,n,r)),uv(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(lv(p,n,r)),uv(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!xv(e)&&a.push(new(D(av,"Reference.ts has not been loaded"),av)(t._repo,t._path)),{removed:a,events:o}}function bv(e){var t,n=[],r=_(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function kv(e,t){var n,r=null,i=_(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||sv(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function wv(e,t){if(t._queryParams.loadsAllData())return Ev(e);var n=t._queryIdentifier;return e.views.get(n)}function _v(e,t){return null!=wv(e,t)}function xv(e){return null!=Ev(e)}function Ev(e){var t,n=_(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Cv=1,Sv=N((function e(t){S(this,e),this.listenProvider_=t,this.syncPointTree_=new _p(null),this.pendingWriteTree_={visibleWrites:xp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Tv(e,t,n,r,i){return function(e,t,n,r,i){D(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ep(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?jv(e,new fp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Iv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jp(e.pendingWriteTree_,t),i=Dp(e.pendingWriteTree_,t);if(i){var a=new _p(null);return null!=r.snap?a=a.set(Kh(),!0):dh(r.children,(function(e){a=a.set(new Wh(e),!0)})),jv(e,new lp(r.path,a,n))}return[]}function Nv(e,t,n){return jv(e,new fp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Rv(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||_v(o,t))){var u=gv(o,t,n,r);pv(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var l=u.removed;if(s=u.events,!i){var c=-1!==l.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return xv(t)}));if(c&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=Hv(h),p=0;p<d.length;++p){var v=d[p],m=v.query,y=Fv(e,v);e.listenProvider_.startListening(Wv(m),Uv(e,m),y.hashFn,y.onComplete)}}if(!f&&l.length>0&&!r)if(c){var g=null;e.listenProvider_.stopListening(Wv(t),g)}else l.forEach((function(t){var n=e.queryToTagMap.get(Vv(t));e.listenProvider_.stopListening(Wv(t),n)}))}Kv(e,l)}return s}function Pv(e,t,n,r){var i=qv(e,r);if(null!=i){var a=zv(i),o=a.path,s=a.queryId,u=td(o,t);return Bv(e,o,new fp(sp(s),u,n))}return[]}function Ov(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=td(e,i);a=a||kv(t,n),o=o||xv(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||xv(u),a=a||kv(u,Kh())):(u=new dv,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=Md.EMPTY_NODE;var l=e.syncPointTree_.subtree(i);l.foreachChild((function(e,t){var n=kv(t,Kh());n&&(a=a.updateImmediateChild(e,n))}))}var c=_v(u,t);if(!c&&!t._queryParams.loadsAllData()){var f=Vv(t);D(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=Gv();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=Lp(e.pendingWriteTree_,i),p=yv(u,t,n,d,a,s);if(!c&&!o&&!r){var v=wv(u,t);p=p.concat(Qv(e,t,v))}return p}function Av(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=kv(n,td(e,t));if(r)return r}));return Vp(r,t,i,n,!0)}function Lv(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=td(e,n);r=r||kv(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||kv(i,Kh()):(i=new dv,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new dp(r,!0,!1):null;return function(e){return bp(e.viewCache_)}(mv(i,t,Lp(e.pendingWriteTree_,t._path),a?o.getNode():Md.EMPTY_NODE,a))}function jv(e,t){return Dv(t,e.syncPointTree_,null,Lp(e.pendingWriteTree_,Kh()))}function Dv(e,t,n,r){if(ed(e.path))return Mv(e,t,n,r);var i=t.get(Kh());null==n&&null!=i&&(n=kv(i,Kh()));var a=[],o=Gh(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=Gp(r,o);a=a.concat(Dv(s,u,l,c))}return i&&(a=a.concat(vv(i,e,r,n))),a}function Mv(e,t,n,r){var i=t.get(Kh());null==n&&null!=i&&(n=kv(i,Kh()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Gp(r,t),u=e.operationForChild(t);u&&(a=a.concat(Mv(u,i,o,s)))})),i&&(a=a.concat(vv(i,e,r,n))),a}function Fv(e,t){var n=t.query,r=Uv(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Md.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=qv(e,n);if(r){var i=zv(r),a=i.path,o=i.queryId,s=td(a,t);return Bv(e,a,new cp(sp(o),s))}return[]}(e,n._path,r):function(e,t){return jv(e,new cp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Rv(e,n,null,i)}}}function Uv(e,t){var n=Vv(t);return e.queryToTagMap.get(n)}function Vv(e){return e._path.toString()+"$"+e._queryIdentifier}function qv(e,t){return e.tagToQueryMap.get(t)}function zv(e){var t=e.indexOf("$");return D(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Wh(e.substr(0,t))}}function Bv(e,t,n){var r=e.syncPointTree_.get(t);return D(r,"Missing sync point for query tag that we're tracking"),vv(r,n,Lp(e.pendingWriteTree_,t),null)}function Hv(e){return e.fold((function(e,t,n){if(t&&xv(t))return[Ev(t)];var r=[];return t&&(r=bv(t)),dh(n,(function(e,t){r=r.concat(t)})),r}))}function Wv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(D(hv,"Reference.ts has not been loaded"),hv)(e._repo,e._path):e}function Kv(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Vv(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function Gv(){return Cv++}function Qv(e,t,n){var r=t._path,i=Uv(e,t),a=Fv(e,n),o=e.listenProvider_.startListening(Wv(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)D(!xv(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!ed(e)&&t&&xv(t))return[Ev(t).query];var r=[];return t&&(r=r.concat(bv(t).map((function(e){return e.query})))),dh(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(Wv(c),Uv(e,c))}return o}var Yv=function(){function e(t){S(this,e),this.node_=t}return N(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),$v=function(){function e(t,n){S(this,e),this.syncTree_=t,this.path_=n}return N(e,[{key:"getImmediateChild",value:function(t){var n=Zh(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Av(this.syncTree_,this.path_)}}]),e}(),Xv=function(e,t,n){return e&&"object"===typeof e?(D(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Jv(e[".sv"],t,n):"object"===typeof e[".sv"]?Zv(e[".sv"],t):void D(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Jv=function(e,t,n){if("timestamp"===e)return n.timestamp;D(!1,"Unexpected server value: "+e)},Zv=function(e,t,n){e.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&D(!1,"Unexpected increment value: "+r);var i=t.node();if(D(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},em=function(e,t,n,r){return nm(t,new $v(n,e),r)},tm=function(e,t,n){return nm(e,new Yv(t),n)};function nm(e,t,n){var r,i=e.getPriority().val(),a=Xv(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Xv(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Td(s,Ud(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Td(a))),u.forEachChild(Pd,(function(e,i){var a=nm(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var rm=N((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};S(this,e),this.name=t,this.parent=n,this.node=r}));function im(e,t){for(var n=t instanceof Wh?t:new Wh(t),r=e,i=Gh(n);null!==i;){var a=de(r.node.children,i)||{children:{},childCount:0};r=new rm(i,r,a),i=Gh(n=Yh(n))}return r}function am(e){return e.node.value}function om(e,t){e.node.value=t,fm(e)}function sm(e){return e.node.childCount>0}function um(e,t){dh(e.node.children,(function(n,r){t(new rm(n,e,r))}))}function lm(e,t,n,r){n&&!r&&t(e),um(e,(function(e){lm(e,t,!0,r)})),n&&r&&t(e)}function cm(e){return new Wh(null===e.parent?e.name:cm(e.parent)+"/"+e.name)}function fm(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===am(e)&&!sm(e)}(n),i=he(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,fm(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,fm(e))}(e.parent,e.name,e)}var hm=/[\[\].#$\/\u0000-\u001F\u007F]/,dm=/[\[\].#$\u0000-\u001F\u007F]/,pm=10485760,vm=function(e){return"string"===typeof e&&0!==e.length&&!hm.test(e)},mm=function(e){return"string"===typeof e&&0!==e.length&&!dm.test(e)},ym=function(e,t,n,r){r&&void 0===t||gm(Ee(e,"value"),t,n)},gm=function e(t,n,r){var i=r instanceof Wh?new id(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+od(i));if("function"===typeof n)throw new Error(t+"contains a function "+od(i)+" with contents = "+n.toString());if(ah(n))throw new Error(t+"contains "+n.toString()+" "+od(i));if("string"===typeof n&&n.length>pm/3&&Ce(n)>pm)throw new Error(t+"contains a string greater than "+pm+" utf8 bytes "+od(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(dh(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!vm(n)))throw new Error(t+" contains an invalid key ("+n+") "+od(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ce(t),ad(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ce(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+od(i)+" in addition to actual children.")}},bm=function(e,t,n,r){if((!r||void 0!==n)&&!mm(n))throw new Error(Ee(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},km=function(e,t){if(".info"===Gh(t))throw new Error(e+" failed = Can't modify data under /.info/")},wm=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vm(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mm(e)}(n))throw new Error(Ee(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_m=N((function e(){S(this,e),this.eventLists_=[],this.recursionDepth_=0}));function xm(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||nd(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Em(e,t,n){xm(e,n),Cm(e,(function(e){return rd(e,t)||rd(t,e)}))}function Cm(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Sm(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Sm(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Xf&&eh("event: "+n.toString()),yh(r)}}}var Tm="repo_interrupt",Im=function(){function e(t,n,r,i){S(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _m,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tp(),this.transactionQueueTree_=new rm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return N(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Nm(e,t,n){if(e.stats_=Oh(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Zd(e.repoInfo_,(function(t,n,r,i){Om(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Am(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ce(n)}catch(Vc){throw new Error("Invalid authOverride provided: "+Vc)}}e.persistentConnection_=new ld(e.repoInfo_,t,(function(t,n,r,i){Om(e,t,n,r,i)}),(function(t){Am(e,t)}),(function(t){!function(e,t){dh(t,(function(t,n){Lm(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Ph[n]||(Ph[n]=t()),Ph[n]}(e.repoInfo_,(function(){return new op(e.stats_,e.server_)})),e.infoData_=new ep,e.infoSyncTree_=new Sv({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Nv(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Lm(e,"connected",!1),e.serverSyncTree_=new Sv({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Em(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Rm(e){var t=e.infoData_.getNode(new Wh(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Pm(e){return(t=(t={timestamp:Rm(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Om(e,t,n,r,i){e.dataUpdateCount++;var a=new Wh(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=ve(n,(function(e){return Ud(e)}));o=function(e,t,n,r){var i=qv(e,r);if(i){var a=zv(i),o=a.path,s=a.queryId,u=td(o,t),l=_p.fromObject(n);return Bv(e,o,new hp(sp(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Ud(n);o=Pv(e.serverSyncTree_,a,u,i)}else if(r){var l=ve(n,(function(e){return Ud(e)}));o=function(e,t,n){var r=_p.fromObject(n);return jv(e,new hp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=Ud(n);o=Nv(e.serverSyncTree_,a,c)}var f=a;o.length>0&&(f=Bm(e,a)),Em(e.eventQueue_,f,o)}function Am(e,t){Lm(e,"connected",t),!1===t&&function(e){Fm(e,"onDisconnectEvents");var t=Pm(e),n=tp();rp(e.onDisconnect_,Kh(),(function(r,i){var a=em(r,i,e.serverSyncTree_,t);np(n,r,a)}));var r=[];rp(n,Kh(),(function(t,n){r=r.concat(Nv(e.serverSyncTree_,t,n));var i=Qm(e,t);Bm(e,i)})),e.onDisconnect_=tp(),Em(e.eventQueue_,Kh(),r)}(e)}function Lm(e,t,n){var r=new Wh("/.info/"+t),i=Ud(n);e.infoData_.updateSnapshot(r,i);var a=Nv(e.infoSyncTree_,r,i);Em(e.eventQueue_,r,a)}function jm(e){return e.nextWriteId_++}function Dm(e,t,n,r,i){Fm(e,"set",{path:t.toString(),value:n,priority:r});var a=Pm(e),o=Ud(n,r),s=Av(e.serverSyncTree_,t),u=tm(o,s,a),l=jm(e),c=Tv(e.serverSyncTree_,t,u,l,!0);xm(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||ih("set at "+t+" failed: "+n);var o=Iv(e.serverSyncTree_,l,!a);Em(e.eventQueue_,t,o),Um(e,i,n,r)}));var f=Qm(e,t);Bm(e,f),Em(e.eventQueue_,f,[])}function Mm(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Tm)}function Fm(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];eh.apply(void 0,[t].concat(r))}function Um(e,t,n,r){t&&yh((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Vm(e,t,n){return Av(e.serverSyncTree_,t,n)||Md.EMPTY_NODE}function qm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Gm(e,t),am(t)){var n=Wm(e,t);D(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&zm(e,cm(t),n)}else sm(t)&&um(t,(function(t){qm(e,t)}))}function zm(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Vm(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];D(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=td(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),f=t;e.server_.put(f.toString(),c,(function(r){Fm(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Iv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Gm(e,im(e.transactionQueueTree_,t)),qm(e,e.transactionQueueTree_),Em(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)yh(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{ih("transaction at "+f.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Bm(e,t)}}),o)}function Bm(e,t){var n=Hm(e,t),r=cm(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,l=t[a],c=td(n,l.path),f=!1;if(D(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,s=l.abortReason,i=i.concat(Iv(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)f=!0,s="maxretry",i=i.concat(Iv(e.serverSyncTree_,l.currentWriteId,!0));else{var h=Vm(e,l.path,o);l.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){gm("transaction failed: Data returned ",d,l.path);var p=Ud(d);"object"===typeof d&&null!=d&&he(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=l.currentWriteId,m=Pm(e),y=tm(p,h,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=jm(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Tv(e.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally))).concat(Iv(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(Iv(e.serverSyncTree_,l.currentWriteId,!0))}Em(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);Gm(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)yh(r[l]);qm(e,e.transactionQueueTree_)}(e,Wm(e,n),r),r}function Hm(e,t){var n,r=e.transactionQueueTree_;for(n=Gh(t);null!==n&&void 0===am(r);)r=im(r,n),n=Gh(t=Yh(t));return r}function Wm(e,t){var n=[];return Km(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Km(e,t,n){var r=am(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);um(t,(function(t){Km(e,t,n)}))}function Gm(e,t){var n=am(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,om(t,n.length>0?n:void 0)}um(t,(function(t){Gm(e,t)}))}function Qm(e,t){var n=cm(Hm(e,t)),r=im(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Ym(e,t)})),Ym(e,r),lm(r,(function(t){Ym(e,t)})),n}function Ym(e,t){var n=am(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(D(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(D(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Iv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?om(t,void 0):n.length=a+1,Em(e.eventQueue_,cm(t),i);for(var s=0;s<r.length;s++)yh(r[s])}}var $m=function(e,t){var n=Xm(e),r=n.namespace;"firebase.com"===n.domain&&rh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||rh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ih("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Th(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Wh(n.pathString)}},Xm=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(c,f)),c<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(Vc){}t+="/"+i}return t}(e.substring(c,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=_(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ih("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Jm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Zm=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){S(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return N(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ce(this.snapshot.exportVal())}}]),e}()),ey=function(){function e(t,n,r){S(this,e),this.eventRegistration=t,this.error=n,this.path=r}return N(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),ty=function(){function e(t,n){S(this,e),this.snapshotCallback=t,this.cancelCallback=n}return N(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),ny=function(){function e(t,n,r,i){S(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return N(e,[{key:"key",get:function(){return ed(this._path)?null:$h(this._path)}},{key:"ref",get:function(){return new ry(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Jd(this._queryParams),t=fh(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Jd(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Se(t))instanceof e))return!1;var n=this._repo===t._repo,r=nd(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var ry=function(e){y(n,e);var t=w(n);function n(e,r){return S(this,n),t.call(this,e,r,new $d,!1)}return N(n,[{key:"parent",get:function(){var e=Jh(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(ny),iy=function(){function e(t,n,r){S(this,e),this._node=t,this.ref=n,this._index=r}return N(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Wh(t),r=oy(this.ref,t);return new e(this._node.getChild(n),r,Pd)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,oy(n.ref,r),Pd))}))}},{key:"hasChild",value:function(e){var t=new Wh(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function ay(e,t){return(e=Se(e))._checkNotDeleted("ref"),void 0!==t?oy(e._root,t):e._root}function oy(e,t){var n,r,i,a;return null===Gh((e=Se(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),bm(n,r,i,a)):bm("child","path",t,!1),new ry(e._repo,Zh(e._path,t))}function sy(e){return km("remove",e._path),uy(e,null)}function uy(e,t){e=Se(e),km("set",e._path),ym("set",t,e._path,!1);var n=new re;return Dm(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function ly(e){e=Se(e);var t=new ty((function(){})),n=new cy(t);return function(e,t,n){var r=Lv(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Ud(r).withIndex(t._queryParams.getIndex());if(Ov(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Nv(e.serverSyncTree_,t._path,a);else{var o=Uv(e.serverSyncTree_,t);i=Pv(e.serverSyncTree_,t._path,a,o)}return Em(e.eventQueue_,t._path,i),Rv(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Fm(e,"get for query "+ce(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new iy(t,new ry(e._repo,e._path),e._queryParams.getIndex())}))}var cy=function(){function e(t){S(this,e),this.callbackContext=t}return N(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Zm("value",this,new iy(e.snapshotNode,new ry(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ey(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}();!function(e){D(!av,"__referenceConstructor has already been defined"),av=e}(ry),function(e){D(!hv,"__referenceConstructor has already been defined"),hv=e}(ry);var fy={},hy=!1;function dy(e,t,n,r){e.repoInfo_=new Th("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function py(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||rh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),eh("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=$m(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=$m(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new wh(wh.OWNER):new kh(e.name,e.options,t);wm("Invalid Firebase Database URL",s),ed(s.path)||rh("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=fy[t.name];i||(i={},fy[t.name]=i);var a=i[e.toURLString()];a&&rh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Im(e,hy,n,r),i[e.toURLString()]=a,a}(u,e,c,new bh(e.name,n));return new vy(f,e)}var vy=function(){function e(t,n){S(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return N(e,[{key:"_repo",get:function(){return this._instanceStarted||(Nm(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new ry(this._repo,Kh())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=fy[t];n&&n[e.key]===e||rh("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Mm(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&rh("Cannot call "+e+" on a deleted database.")}}]),e}();function my(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Se(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&rh("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&rh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new wh(wh.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ie(r.mockUserToken,e.app.options.projectId);a=new wh(o)}dy(i,t,n,a)}ld.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ld.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){qf=e}(bt),pt(new Te("database",(function(e,t){var n=t.instanceIdentifier;return py(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),_t(Uf,Vf,e),_t(Uf,Vf,"esm2017")}();var yy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt(),t=arguments.length>1?arguments[1]:void 0,n=vt(e,"database").getImmediate({identifier:t}),r=ee("database");return r&&my.apply(void 0,[n].concat(a(r))),n}(Es),gy=ay(yy,"metadata/"),by=function(){var e=C(x().mark((function e(t,n,r,i,a){var o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],s=void 0===a?"".concat(t,"/"):"".concat(t,"/").concat(a),e.next=4,ly(oy(gy,s));case 4:(u=e.sent).exists()||i("fetch all metadata: no data available"),u.forEach((function(e){var n;if(null!==e.key&&(void 0!==e.val().title&&(n={id:e.key,title:e.val().title,imgURL:e.val().imgURL,type:t},o.push(n)),void 0===e.val().title)){var r=[];e.forEach((function(e){void 0!==e.val().title&&r.push({id:e.key,title:e.val().title,imgURL:e.val().imgURL,type:t})})),n={title:e.key,recipes:r,type:t},o.push(n)}})),n(o),r(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),ky=function(){var e=C(x().mark((function e(t,n,r,i){var a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,ly(oy(gy,"".concat(t,"/")));case 3:(o=e.sent).exists()?(o.forEach((function(e){null!==e.key&&void 0===e.val().title&&a.push(e.key)})),n(a),r(!1)):i("fetch categories: no data available");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),wy=function(){var e=C(x().mark((function e(t,n,r,i,a,o){var s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0===o?"".concat(n,"/").concat(t):"".concat(n,"/").concat(o,"/").concat(t),e.next=3,ly(ay(yy,s));case 3:(u=e.sent).exists()?(r(u.val()),i(!1)):a("fetch recipe: no data available");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),_y=function(e){var t=jf(e),n=void 0===e.category?"".concat(e.type,"/").concat(e.id):"".concat(e.type,"/").concat(e.category,"/").concat(e.id);uy(ay(yy,n),Ve({},t)),console.log("stored recipe: "+n),xy(t,n)},xy=function(e,t){uy(oy(gy,t),{title:e.title,imgURL:e.imgURL}),console.log("updated metadata: "+t)},Ey=function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===t.category?"".concat(t.type,"/").concat(t.id):"".concat(t.type,"/").concat(t.category,"/").concat(t.id),e.next=3,ly(oy(gy,n));case 3:return r=e.sent,e.abrupt("return",r.exists());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cy=function(){var e=u((0,l.useState)([]),2),t=e[0],n=e[1],r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)(!0),2),s=o[0],c=o[1],f=(0,l.useContext)(hL);return(0,l.useEffect)((function(){by("desserts",n,c,a)}),[]),(0,l.useEffect)((function(){""!==i&&(null===f||void 0===f||f.addMessage(i,ks.Error))}),[i]),(0,Ps.jsx)(Ff,{title:"Desserts",metadata:t,loading:s})},Sy=["title","titleId"];var Ty=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Sy);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))})),Iy=function(e){var t=e.ingredients;return(0,Ps.jsx)("ul",{className:"text-left",children:t.map((function(e){return(0,Ps.jsxs)("li",{className:"pt-2",children:[""===e.unit&&(0,Ps.jsxs)(Ps.Fragment,{children:[e.quantity," ",e.unit," ",e.name]}),""!==e.unit&&(0,Ps.jsxs)(Ps.Fragment,{children:[e.quantity," ",e.unit," of ",e.name]})]},e.name+e.unit+e.quantity)}))})},Ny=function(e){var t=e.preparation;return(0,Ps.jsx)("ul",{className:"text-left",children:t.map((function(e,t){return(0,Ps.jsxs)("li",{className:"pt-2",children:[(0,Ps.jsxs)("p",{className:"font-bold",children:["Step ",t+1]}),(0,Ps.jsx)("p",{className:"sm:ml-2",children:e})]},t)}))})},Ry=function(e){var t=e.recipe,n=e.preview,r=e.imgPreviewURL;return(0,Ps.jsxs)("div",{className:"w-full py-8",children:[(0,Ps.jsxs)("div",{className:"flex flex-col items-end mx-4 sm:mx-0 pb-6 sm:pb-10",children:[(0,Ps.jsx)("h1",{className:"text-4xl sm:text-5xl self-center text-center break-words",children:t.title}),!n&&(0,Ps.jsx)(ms,{to:Hs(t.type,t.id,t.category),className:"flex-none sm:mt-2 md:hidden",children:(0,Ps.jsxs)("button",{type:"button",className:"flex my-2 mr-4 items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-400",children:[(0,Ps.jsx)(Ty,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Edit"]})})]}),(0,Ps.jsxs)("div",{className:"relative flex flex-col items-center md:flex-row",children:[(0,Ps.jsx)("img",{src:n?r:t.imgURL,alt:"",className:"flex-none object-cover w-11/12 max-h-[600px] max-w-[450px]"}),(0,Ps.jsxs)("div",{className:"grow text-left py-2 pt-8 md:pt-0 text-xl md:ml-8",children:[!n&&(0,Ps.jsx)(ms,{to:Hs(t.type,t.id,t.category),className:"absolute top-0 right-0 hidden md:block",children:(0,Ps.jsxs)("button",{type:"button",className:"flex items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-amber-400",children:[(0,Ps.jsx)(Ty,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Edit"]})}),(0,Ps.jsx)("svg",{"aria-hidden":"true",className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ps.jsx)("path",{d:"M14.017 18L14.017 10.609C14.017 4.905 17.748 1.039 23 0L23.995 2.151C21.563 3.068 20 5.789 20 8H24V18H14.017ZM0 18V10.609C0 4.905 3.748 1.038 9 0L9.996 2.151C7.563 3.068 6 5.789 6 8H9.983L9.983 18L0 18Z",fill:"currentColor"})}),void 0!==t.quote&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("p",{className:"italic",children:['"',t.quote.content,'"']}),(0,Ps.jsxs)("p",{className:"pl-8",children:["- ",t.quote.author]})]})]})]}),(0,Ps.jsxs)("div",{className:"mx-4 md:mx-0 text-left",children:[(0,Ps.jsx)("hr",{className:"h-px my-2 md:mt-4 bg-gray-200 border-0 dark:bg-gray-300"}),(0,Ps.jsx)("div",{className:"flex flex-wrap",children:(0,Ps.jsx)("div",{className:"max-w-[30rem]",children:(0,Ps.jsxs)("div",{className:"grid grid-flow-row-dense grid-cols-2 auto-rows-max",children:[(0,Ps.jsx)("div",{className:"font-bold",children:"YIELD"}),(0,Ps.jsxs)("div",{children:[t.yield.quantity," ",t.yield.piece]}),(0,Ps.jsx)("div",{className:"font-bold",children:"TIME"}),(0,Ps.jsxs)("div",{children:[t.preparationTime.time," ",t.preparationTime.unit]}),void 0!==t.ovenTemperature&&(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("div",{className:"font-bold",children:"OVEN"}),(0,Ps.jsxs)("div",{children:[t.ovenTemperature," \xb0C"]})]})]})})}),(0,Ps.jsx)("hr",{className:"h-px my-2 bg-gray-200 border-0 dark:bg-gray-300"}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("p",{className:"font-bold",children:"INGREDIENTS"}),(0,Ps.jsx)(Iy,{ingredients:t.ingredients})]}),(0,Ps.jsx)("hr",{className:"h-px my-2 bg-gray-200 border-0 dark:bg-gray-300"}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("p",{className:"font-bold",children:"PREPARATION"}),(0,Ps.jsx)(Ny,{preparation:t.preparation})]}),(0,Ps.jsx)("hr",{className:"h-px my-2 bg-gray-200 border-0 dark:bg-gray-300"}),(0,Ps.jsx)("div",{children:void 0!==t.source&&(0,Ps.jsxs)("p",{children:["Source: ",t.source.content," - ",t.source.author]})})]})]})},Py=function(){var e=Qo(),t=e.type,n=e.category,r=e.recipeID,i=u((0,l.useState)(),2),a=i[0],o=i[1],s=u((0,l.useState)(""),2),c=s[0],f=s[1],h=u((0,l.useState)(!0),2),d=h[0],p=h[1],v=(0,l.useContext)(hL);return(0,l.useEffect)((function(){void 0!==r&&void 0!==t&&wy(r,t,o,p,f,n)}),[]),(0,l.useEffect)((function(){""!==c&&(null===v||void 0===v||v.addMessage(c,ks.Error))}),[c]),(0,Ps.jsx)("div",{className:"max-w-[75rem] lg:w-[60rem]",children:d||void 0===a?(0,Ps.jsx)(Tc,{}):(0,Ps.jsx)(Ry,{recipe:a,preview:!1})})};function Oy(e){var t=e.statusCode,n=e.description,r=e.title,i=u((0,l.useState)(!1),2),a=i[0],o=i[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Cf,{open:a,setOpen:o}),(0,Ps.jsx)("div",{className:"h-[calc(100vh-130px)]",children:(0,Ps.jsx)("div",{className:"bg-white min-h-full font-sans px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,Ps.jsx)("div",{className:"max-w-max mx-auto",children:(0,Ps.jsxs)("main",{className:"sm:flex",children:[(0,Ps.jsx)("p",{className:"text-4xl font-extrabold text-navy-300 sm:text-5xl",children:t}),(0,Ps.jsxs)("div",{className:"sm:ml-6",children:[(0,Ps.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,Ps.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl",children:r}),(0,Ps.jsx)("p",{className:"mt-1 text-base text-gray-500",children:n})]}),(0,Ps.jsxs)("div",{className:"mt-10 flex space-x-3 sm:border-l sm:border-transparent sm:pl-6",children:[(0,Ps.jsx)(ms,{to:Ms,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-navy-600 hover:bg-navy-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-navy-500",children:"Go home"}),403===t&&(0,Ps.jsx)("button",{onClick:function(){return o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-navy-600 hover:bg-navy-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-navy-500",children:"Login"})]})]})]})})})})]})}var Ay=function(){var e=u((0,l.useState)([]),2),t=e[0],n=e[1],r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)(!0),2),s=o[0],c=o[1],f=(0,l.useContext)(hL);return(0,l.useEffect)((function(){by("beverages",n,c,a)}),[]),(0,l.useEffect)((function(){""!==i&&(null===f||void 0===f||f.addMessage(i,ks.Error))}),[i]),(0,Ps.jsx)(Ff,{title:"Beverages",metadata:t,loading:s})},Ly=function(){var e=u((0,l.useState)([]),2),t=e[0],n=e[1],r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)(!0),2),s=o[0],c=o[1],f=(0,l.useContext)(hL);return(0,l.useEffect)((function(){by("meals",n,c,a)}),[]),(0,l.useEffect)((function(){""!==i&&(null===f||void 0===f||f.addMessage(i,ks.Error))}),[i]),(0,Ps.jsx)(Ff,{title:"Meals",metadata:t,loading:s})};function jy(e,t){var n=u((0,l.useState)(e),2),r=n[0],i=n[1],o=su(e);return ou((function(){return i(o.current)}),[o,i].concat(a(t))),r}function Dy(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=Object.entries(e);r<i.length;r++){var a=u(i[r],2),o=a[0],s=a[1];Fy(n,My(t,o),s)}return n}function My(e,t){return e?e+"["+t+"]":t}function Fy(e,t,n){if(Array.isArray(n)){var r,i=_(n.entries());try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];Fy(e,My(t,o.toString()),s)}}catch(l){i.e(l)}finally{i.f()}}else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,"".concat(n)]):null==n?e.push([t,""]):Dy(n,t,e)}function Uy(e,t,n){var r=u((0,l.useState)(n),2),i=r[0],a=r[1],o=void 0!==e,s=(0,l.useRef)(o),c=(0,l.useRef)(!1),f=(0,l.useRef)(!1);return!o||s.current||c.current?!o&&s.current&&!f.current&&(f.current=!0,s.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(c.current=!0,s.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:i,uu((function(e){return o||a(e),null==t?void 0:t(e)}))]}var Vy,qy=["value","defaultValue","name","onChange","by","disabled","horizontal","multiple"],zy=["id"],By=["id"],Hy=["id"],Wy=["id","disabled","value"],Ky=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(Ky||{}),Gy=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}(Gy||{}),Qy=function(e){return e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e}(Qy||{}),Yy=function(e){return e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e}(Yy||{});function $y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=ju(t(e.options.slice()),(function(e){return e.dataRef.current.domRef.current})),i=n?r.indexOf(n):null;return-1===i&&(i=null),{options:r,activeOptionIndex:i}}var Xy=(R(Vy={},1,(function(e){return e.dataRef.current.disabled||1===e.listboxState?e:Ve(Ve({},e),{},{activeOptionIndex:null,listboxState:1})})),R(Vy,0,(function(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;var t=e.activeOptionIndex,n=e.dataRef.current.isSelected,r=e.options.findIndex((function(e){return n(e.dataRef.current.value)}));return-1!==r&&(t=r),Ve(Ve({},e),{},{listboxState:0,activeOptionIndex:t})})),R(Vy,2,(function(e,t){var n;if(e.dataRef.current.disabled||1===e.listboxState)return e;var r=$y(e),i=ec(t,{resolveItems:function(){return r.options},resolveActiveIndex:function(){return r.activeOptionIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return Ve(Ve(Ve({},e),r),{},{searchQuery:"",activeOptionIndex:i,activationTrigger:null!=(n=t.trigger)?n:1})})),R(Vy,3,(function(e,t){if(e.dataRef.current.disabled||1===e.listboxState)return e;var n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((function(e){var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),a=i?e.options.indexOf(i):-1;return-1===a||a===e.activeOptionIndex?Ve(Ve({},e),{},{searchQuery:r}):Ve(Ve({},e),{},{searchQuery:r,activeOptionIndex:a,activationTrigger:1})})),R(Vy,4,(function(e){return e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:Ve(Ve({},e),{},{searchQuery:""})})),R(Vy,5,(function(e,t){var n={id:t.id,dataRef:t.dataRef},r=$y(e,(function(e){return[].concat(a(e),[n])}));return null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),Ve(Ve({},e),r)})),R(Vy,6,(function(e,t){var n=$y(e,(function(e){var n=e.findIndex((function(e){return e.id===t.id}));return-1!==n&&e.splice(n,1),e}));return Ve(Ve(Ve({},e),n),{},{activationTrigger:1})})),R(Vy,7,(function(e,t){return Ve(Ve({},e),{},{labelId:t.id})})),Vy),Jy=(0,l.createContext)(null);function Zy(e){var t=(0,l.useContext)(Jy);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,Zy),n}return t}Jy.displayName="ListboxActionsContext";var eg=(0,l.createContext)(null);function tg(e){var t=(0,l.useContext)(eg);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,tg),n}return t}function ng(e,t){return Ks(t.type,Xy,e,t)}eg.displayName="ListboxDataContext";var rg=l.Fragment,ig=nu((function(e,t){var n,r=e.value,i=e.defaultValue,a=e.name,o=e.onChange,s=e.by,c=void 0===s?function(e,t){return e===t}:s,f=e.disabled,h=void 0!==f&&f,d=e.horizontal,p=void 0!==d&&d,v=e.multiple,m=void 0!==v&&v,y=Ws(e,qy),g=p?"horizontal":"vertical",b=fu(t),k=u(Uy(r,o,i),2),w=k[0],_=void 0===w?m?[]:void 0:w,x=k[1],E=u((0,l.useReducer)(ng,{dataRef:(0,l.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),2),C=E[0],S=E[1],T=(0,l.useRef)({static:!1,hold:!1}),I=(0,l.useRef)(null),N=(0,l.useRef)(null),P=(0,l.useRef)(null),O=uu("string"==typeof c?function(e,t){var n=c;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:c),A=(0,l.useCallback)((function(e){var t;return Ks(L.mode,(R(t={},1,(function(){return _.some((function(t){return O(t,e)}))})),R(t,0,(function(){return O(_,e)})),t))}),[_]),L=(0,l.useMemo)((function(){return Ve(Ve({},C),{},{value:_,disabled:h,mode:m?1:0,orientation:g,compare:O,isSelected:A,optionsPropsRef:T,labelRef:I,buttonRef:N,optionsRef:P})}),[_,h,m,C]);ou((function(){C.dataRef.current=L}),[L]),Hu([L.buttonRef,L.optionsRef],(function(e,t){var n;S({type:1}),Ru(t,Nu.Loose)||(e.preventDefault(),null==(n=L.buttonRef.current)||n.focus())}),0===L.listboxState);var j=(0,l.useMemo)((function(){return{open:0===L.listboxState,disabled:h,value:_}}),[L,h,_]),D=uu((function(e){var t=L.options.find((function(t){return t.id===e}));!t||B(t.dataRef.current.value)})),M=uu((function(){if(null!==L.activeOptionIndex){var e=L.options[L.activeOptionIndex],t=e.dataRef,n=e.id;B(t.current.value),S({type:2,focus:Zl.Specific,id:n})}})),F=uu((function(){return S({type:0})})),U=uu((function(){return S({type:1})})),V=uu((function(e,t,n){return e===Zl.Specific?S({type:2,focus:Zl.Specific,id:t,trigger:n}):S({type:2,focus:e,trigger:n})})),q=uu((function(e,t){return S({type:5,id:e,dataRef:t}),function(){return S({type:6,id:e})}})),z=uu((function(e){return S({type:7,id:e}),function(){return S({type:7,id:null})}})),B=uu((function(e){var t;return Ks(L.mode,(R(t={},0,(function(){return null==x?void 0:x(e)})),R(t,1,(function(){var t=L.value.slice(),n=t.findIndex((function(t){return O(t,e)}));return-1===n?t.push(e):t.splice(n,1),null==x?void 0:x(t)})),t))})),H=uu((function(e){return S({type:3,value:e})})),W=uu((function(){return S({type:4})})),K=(0,l.useMemo)((function(){return{onChange:B,registerOption:q,registerLabel:z,goToOption:V,closeListbox:U,openListbox:F,selectActiveOption:M,selectOption:D,search:H,clearSearch:W}}),[]),G={ref:b},Q=(0,l.useRef)(null),Y=Cl();return(0,l.useEffect)((function(){!Q.current||void 0!==i&&Y.addEventListener(Q.current,"reset",(function(){B(i)}))}),[Q,B]),l.createElement(Jy.Provider,{value:K},l.createElement(eg.Provider,{value:L},l.createElement(Vu,{value:Ks(L.listboxState,(n={},R(n,0,Fu.Open),R(n,1,Fu.Closed),n))},null!=a&&null!=_&&Dy(R({},a,_)).map((function(e,t){var n=u(e,2),r=n[0],i=n[1];return l.createElement(Yu,Ve({features:Qu.Hidden,ref:0===t?function(e){var t;Q.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0},ru({key:r,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:r,value:i})))})),Js({ourProps:G,theirProps:y,slot:j,defaultTag:rg,name:"Listbox"}))))})),ag=nu((function(e,t){var n,r=yu(),i=e.id,a=void 0===i?"headlessui-listbox-button-".concat(r):i,o=Ws(e,zy),s=tg("Listbox.Button"),u=Zy("Listbox.Button"),c=fu(s.buttonRef,t),f=Cl(),h=uu((function(e){switch(e.key){case gu.Space:case gu.Enter:case gu.ArrowDown:e.preventDefault(),u.openListbox(),f.nextFrame((function(){s.value||u.goToOption(Zl.First)}));break;case gu.ArrowUp:e.preventDefault(),u.openListbox(),f.nextFrame((function(){s.value||u.goToOption(Zl.Last)}))}})),d=uu((function(e){if(e.key===gu.Space)e.preventDefault()})),p=uu((function(e){if(bu(e.currentTarget))return e.preventDefault();0===s.listboxState?(u.closeListbox(),f.nextFrame((function(){var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),u.openListbox())})),v=jy((function(){if(s.labelId)return[s.labelId,a].join(" ")}),[s.labelId,a]),m=(0,l.useMemo)((function(){return{open:0===s.listboxState,disabled:s.disabled,value:s.value}}),[s]);return Js({ourProps:{ref:c,id:a,type:zu(e,s.buttonRef),"aria-haspopup":"listbox","aria-controls":null==(n=s.optionsRef.current)?void 0:n.id,"aria-expanded":s.disabled?void 0:0===s.listboxState,"aria-labelledby":v,disabled:s.disabled,onKeyDown:h,onKeyUp:d,onClick:p},theirProps:o,slot:m,defaultTag:"button",name:"Listbox.Button"})})),og=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-listbox-label-".concat(n):r,a=Ws(e,By),o=tg("Listbox.Label"),s=Zy("Listbox.Label"),u=fu(o.labelRef,t);ou((function(){return s.registerLabel(i)}),[i]);var c=uu((function(){var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})})),f=(0,l.useMemo)((function(){return{open:0===o.listboxState,disabled:o.disabled}}),[o]);return Js({ourProps:{ref:u,id:i,onClick:c},theirProps:a,slot:f,defaultTag:"label",name:"Listbox.Label"})})),sg=$s.RenderStrategy|$s.Static,ug=nu((function(e,t){var n,r=yu(),i=e.id,a=void 0===i?"headlessui-listbox-options-".concat(r):i,o=Ws(e,Hy),s=tg("Listbox.Options"),u=Zy("Listbox.Options"),c=fu(s.optionsRef,t),f=Cl(),h=Cl(),d=Uu(),p=null!==d?d===Fu.Open:0===s.listboxState;(0,l.useEffect)((function(){var e,t=s.optionsRef.current;!t||0===s.listboxState&&t!==(null==(e=_u(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[s.listboxState,s.optionsRef]);var v=uu((function(e){switch(h.dispose(),e.key){case gu.Space:if(""!==s.searchQuery)return e.preventDefault(),e.stopPropagation(),u.search(e.key);case gu.Enter:if(e.preventDefault(),e.stopPropagation(),null!==s.activeOptionIndex){var t=s.options[s.activeOptionIndex].dataRef;u.onChange(t.current.value)}0===s.mode&&(u.closeListbox(),wu().nextFrame((function(){var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case Ks(s.orientation,{vertical:gu.ArrowDown,horizontal:gu.ArrowRight}):return e.preventDefault(),e.stopPropagation(),u.goToOption(Zl.Next);case Ks(s.orientation,{vertical:gu.ArrowUp,horizontal:gu.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),u.goToOption(Zl.Previous);case gu.Home:case gu.PageUp:return e.preventDefault(),e.stopPropagation(),u.goToOption(Zl.First);case gu.End:case gu.PageDown:return e.preventDefault(),e.stopPropagation(),u.goToOption(Zl.Last);case gu.Escape:return e.preventDefault(),e.stopPropagation(),u.closeListbox(),f.nextFrame((function(){var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case gu.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(u.search(e.key),h.setTimeout((function(){return u.clearSearch()}),350))}})),m=jy((function(){var e,t,n;return null!=(n=null==(e=s.labelRef.current)?void 0:e.id)?n:null==(t=s.buttonRef.current)?void 0:t.id}),[s.labelRef.current,s.buttonRef.current]),y=(0,l.useMemo)((function(){return{open:0===s.listboxState}}),[s]);return Js({ourProps:{"aria-activedescendant":null===s.activeOptionIndex||null==(n=s.options[s.activeOptionIndex])?void 0:n.id,"aria-multiselectable":1===s.mode||void 0,"aria-labelledby":m,"aria-orientation":s.orientation,id:a,onKeyDown:v,role:"listbox",tabIndex:0,ref:c},theirProps:o,slot:y,defaultTag:"ul",features:sg,visible:p,name:"Listbox.Options"})})),lg=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-listbox-option-".concat(n):r,a=e.disabled,o=void 0!==a&&a,s=e.value,u=Ws(e,Wy),c=tg("Listbox.Option"),f=Zy("Listbox.Option"),h=null!==c.activeOptionIndex&&c.options[c.activeOptionIndex].id===i,d=c.isSelected(s),p=(0,l.useRef)(null),v=su({disabled:o,value:s,domRef:p,get textValue(){var e,t;return null==(t=null==(e=p.current)?void 0:e.textContent)?void 0:t.toLowerCase()}}),m=fu(t,p);ou((function(){if(0===c.listboxState&&h&&0!==c.activationTrigger){var e=wu();return e.requestAnimationFrame((function(){var e,t;null==(t=null==(e=p.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}}),[p,h,c.listboxState,c.activationTrigger,c.activeOptionIndex]),ou((function(){return f.registerOption(i,v)}),[v,i]);var y=uu((function(e){if(o)return e.preventDefault();f.onChange(s),0===c.mode&&(f.closeListbox(),wu().nextFrame((function(){var e;return null==(e=c.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),g=uu((function(){if(o)return f.goToOption(Zl.Nothing);f.goToOption(Zl.Specific,i)})),b=rc(),k=uu((function(e){return b.update(e)})),w=uu((function(e){!b.wasMoved(e)||o||h||f.goToOption(Zl.Specific,i,0)})),_=uu((function(e){!b.wasMoved(e)||o||!h||f.goToOption(Zl.Nothing)})),x=(0,l.useMemo)((function(){return{active:h,selected:d,disabled:o}}),[h,d,o]);return Js({ourProps:{id:i,ref:m,role:"option",tabIndex:!0===o?void 0:-1,"aria-disabled":!0===o||void 0,"aria-selected":d,disabled:void 0,onClick:y,onFocus:g,onPointerEnter:k,onMouseEnter:k,onPointerMove:w,onMouseMove:w,onPointerLeave:_,onMouseLeave:_},theirProps:u,slot:x,defaultTag:"li",name:"Listbox.Option"})})),cg=Object.assign(ig,{Button:ag,Label:og,Options:ug,Option:lg}),fg=["title","titleId"];var hg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,fg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z",clipRule:"evenodd"}))})),dg=["title","titleId"];var pg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,dg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))})),vg=function(e){var t=e.choices,n=e.selected,r=e.handleSelected;return(0,Ps.jsx)("div",{className:"w-full",children:(0,Ps.jsx)(cg,{value:n,onChange:r,children:(0,Ps.jsxs)("div",{className:"relative mt-1",children:[(0,Ps.jsxs)(cg.Button,{className:"relative w-full rounded-lg bg-white py-2 pl-3 pr-10 text-left shadow-md focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm",children:[(0,Ps.jsx)("span",{className:"block truncate",children:n}),(0,Ps.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,Ps.jsx)(hg,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,Ps.jsx)(zl,{as:l.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)(cg.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:t.map((function(e){return(0,Ps.jsx)(cg.Option,{className:function(e){var t=e.active;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-navy-300 text-white":"text-gray-900")},value:e,children:function(t){var n=t.selected,r=t.active;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("span",{className:"block truncate ".concat(n?"font-medium":"font-normal"),children:e}),n?(0,Ps.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 ".concat(r?"text-white":"text-navy-300"),children:(0,Ps.jsx)(pg,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e)}))})})]})})})},mg=["desserts","meals","beverages"],yg={time:0,unit:"min"},gg={quantity:0,piece:"person"},bg={content:"",author:""},kg={id:"",title:"",ingredients:[],preparation:[],yield:gg,preparationTime:yg,ovenTemperature:void 0,quote:void 0,type:mg[0],source:void 0,imgURL:"",category:void 0},wg=["title","titleId"];var _g=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,wg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z"}))})),xg=["title","titleId"];var Eg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,xg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"}))})),Cg=["title","titleId"];var Sg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Cg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))})),Tg=["title","titleId"];var Ig=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Tg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))})),Ng=["title","titleId"];var Rg,Pg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Ng);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))})),Og=["defaultOpen"],Ag=["id"],Lg=["id"],jg=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(jg||{}),Dg=function(e){return e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e}(Dg||{}),Mg=(R(Rg={},0,(function(e){var t;return Ve(Ve({},e),{},{disclosureState:Ks(e.disclosureState,(t={},R(t,0,1),R(t,1,0),t))})})),R(Rg,1,(function(e){return 1===e.disclosureState?e:Ve(Ve({},e),{},{disclosureState:1})})),R(Rg,4,(function(e){return!0===e.linkedPanel?e:Ve(Ve({},e),{},{linkedPanel:!0})})),R(Rg,5,(function(e){return!1===e.linkedPanel?e:Ve(Ve({},e),{},{linkedPanel:!1})})),R(Rg,2,(function(e,t){return e.buttonId===t.buttonId?e:Ve(Ve({},e),{},{buttonId:t.buttonId})})),R(Rg,3,(function(e,t){return e.panelId===t.panelId?e:Ve(Ve({},e),{},{panelId:t.panelId})})),Rg),Fg=(0,l.createContext)(null);function Ug(e){var t=(0,l.useContext)(Fg);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,Ug),n}return t}Fg.displayName="DisclosureContext";var Vg=(0,l.createContext)(null);function qg(e){var t=(0,l.useContext)(Vg);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,qg),n}return t}Vg.displayName="DisclosureAPIContext";var zg=(0,l.createContext)(null);function Bg(e,t){return Ks(t.type,Mg,e,t)}zg.displayName="DisclosurePanelContext";var Hg=l.Fragment,Wg=nu((function(e,t){var n,r=e.defaultOpen,i=void 0!==r&&r,a=Ws(e,Og),o=(0,l.useRef)(null),s=fu(t,cu((function(e){o.current=e}),void 0===e.as||e.as===l.Fragment)),c=(0,l.useRef)(null),f=(0,l.useRef)(null),h=(0,l.useReducer)(Bg,{disclosureState:i?0:1,linkedPanel:!1,buttonRef:f,panelRef:c,buttonId:null,panelId:null}),d=u(h,2),p=d[0],v=p.disclosureState,m=p.buttonId,y=d[1],g=uu((function(e){y({type:1});var t=_u(o);if(t&&m){var n=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:t.getElementById(m):t.getElementById(m);null==n||n.focus()}})),b=(0,l.useMemo)((function(){return{close:g}}),[g]),k=(0,l.useMemo)((function(){return{open:0===v,close:g}}),[v,g]),w={ref:s};return l.createElement(Fg.Provider,{value:h},l.createElement(Vg.Provider,{value:b},l.createElement(Vu,{value:Ks(v,(n={},R(n,0,Fu.Open),R(n,1,Fu.Closed),n))},Js({ourProps:w,theirProps:a,slot:k,defaultTag:Hg,name:"Disclosure"}))))})),Kg=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-disclosure-button-".concat(n):r,a=Ws(e,Ag),o=u(Ug("Disclosure.Button"),2),s=o[0],c=o[1],f=(0,l.useContext)(zg),h=null!==f&&f===s.panelId,d=(0,l.useRef)(null),p=fu(d,t,h?null:s.buttonRef);(0,l.useEffect)((function(){if(!h)return c({type:2,buttonId:i}),function(){c({type:2,buttonId:null})}}),[i,c,h]);var v=uu((function(e){var t;if(h){if(1===s.disclosureState)return;switch(e.key){case gu.Space:case gu.Enter:e.preventDefault(),e.stopPropagation(),c({type:0}),null==(t=s.buttonRef.current)||t.focus()}}else switch(e.key){case gu.Space:case gu.Enter:e.preventDefault(),e.stopPropagation(),c({type:0})}})),m=uu((function(e){if(e.key===gu.Space)e.preventDefault()})),y=uu((function(t){var n;bu(t.currentTarget)||e.disabled||(h?(c({type:0}),null==(n=s.buttonRef.current)||n.focus()):c({type:0}))})),g=(0,l.useMemo)((function(){return{open:0===s.disclosureState}}),[s]),b=zu(e,d);return Js({ourProps:h?{ref:p,type:b,onKeyDown:v,onClick:y}:{ref:p,id:i,type:b,"aria-expanded":e.disabled?void 0:0===s.disclosureState,"aria-controls":s.linkedPanel?s.panelId:void 0,onKeyDown:v,onKeyUp:m,onClick:y},theirProps:a,slot:g,defaultTag:"button",name:"Disclosure.Button"})})),Gg=$s.RenderStrategy|$s.Static,Qg=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-disclosure-panel-".concat(n):r,a=Ws(e,Lg),o=u(Ug("Disclosure.Panel"),2),s=o[0],c=o[1],f=qg("Disclosure.Panel").close,h=fu(t,s.panelRef,(function(e){c({type:e?4:5})}));(0,l.useEffect)((function(){return c({type:3,panelId:i}),function(){c({type:3,panelId:null})}}),[i,c]);var d=Uu(),p=null!==d?d===Fu.Open:0===s.disclosureState,v=(0,l.useMemo)((function(){return{open:0===s.disclosureState,close:f}}),[s,f]),m={ref:h,id:i};return l.createElement(zg.Provider,{value:s.panelId},Js({ourProps:m,theirProps:a,slot:v,defaultTag:"div",features:Gg,visible:p,name:"Disclosure.Panel"}))})),Yg=Object.assign(Wg,{Button:Kg,Panel:Qg}),$g=["title","titleId"];var Xg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,$g);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))})),Jg=["title","titleId"];var Zg=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Jg);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{fillRule:"evenodd",d:"M14.77 12.79a.75.75 0 01-1.06-.02L10 8.832 6.29 12.77a.75.75 0 11-1.08-1.04l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 01-.02 1.06z",clipRule:"evenodd"}))})),eb=["title","titleId"];var tb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,eb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))})),nb=["title","titleId"];var rb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,nb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))})),ib=function(e){var t=e.ingredient,n=e.notifyParent,r=e.index,i=e.canRemove;return(0,Ps.jsxs)("div",{className:"w-full pl-4 py-1 flex flex-col md:flex-row text-left",children:[(0,Ps.jsxs)("div",{className:"flex",children:[(0,Ps.jsx)("input",{type:"text",className:"flex-none mr-2 w-12 px-2 mb-2 md:mb-0 border rounded-md",value:t.quantity,onChange:function(e){var i={quantity:e.target.value,unit:t.unit,name:t.name};n("update",r,i)}}),(0,Ps.jsx)("input",{type:"text",className:"mr-2 w-12 px-2 mb-2 md:mb-0 border rounded-md",value:t.unit,onChange:function(e){var i={quantity:t.quantity,unit:e.target.value,name:t.name};n("update",r,i)}})]}),(0,Ps.jsx)("input",{type:"text",className:"flex-none w-44 px-2 border rounded-md",value:t.name,onChange:function(e){var i={quantity:t.quantity,unit:t.unit,name:e.target.value};n("update",r,i)},placeholder:"sugar"}),(0,Ps.jsxs)("div",{className:"flex-none mb-2 md:mb-0",children:[(0,Ps.jsx)("button",{onClick:function(){n("add")},className:"px-2 py-3",children:(0,Ps.jsx)(tb,{className:"mr-2 h-5 w-5 hover:text-green-700","aria-hidden":"true"})}),(0,Ps.jsx)("button",{onClick:function(){return function(e){i&&n("remove",e)}(r)},className:" py-3",children:(0,Ps.jsx)(rb,{className:"mr-2 h-5 w-5 ".concat(i?"hover:text-red-700":"hover:text-gray-800"),"aria-hidden":"true"})})]})]},r)},ab=["title","titleId"];var ob=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,ab);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))})),sb=function(e){var t=e.step,n=e.notifyParent,r=e.index,i=e.canRemove,a=u((0,l.useState)(0),2),o=a[0],s=a[1];(0,l.useEffect)((function(){s(t.length)}),[t]);return(0,Ps.jsxs)("div",{className:"w-full pl-4 py-1 flex-col text-left",children:[(0,Ps.jsxs)("div",{children:["Step ",r+1]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("textarea",{className:"mx-2 mt-2 sm:text-md resize-none border rounded-md text-gray-900 ",rows:o>0?Math.ceil(o/30):1,cols:30,value:t,onChange:function(e){var t=e.target.value;n("update",r,t)}}),(0,Ps.jsx)("button",{onClick:function(){n("add")},className:"px-2 py-3",children:(0,Ps.jsx)(tb,{className:"mr-2 h-5 w-5 hover:text-green-700","aria-hidden":"true"})}),(0,Ps.jsx)("button",{onClick:function(){return function(e){i&&n("remove",e)}(r)},className:" py-3",children:(0,Ps.jsx)(rb,{className:"mr-2 h-5 w-5 ".concat(i?"hover:text-red-700":"hover:text-gray-800"),"aria-hidden":"true"})})]})]})},ub=function(e){var t=e.title,n=e.list,r=e.setList,i=e.empty,o=e.isOpen,s=e.setIsOpen,c=u((0,l.useState)([]),2),f=c[0],h=c[1];function d(){0!==n.length&&h(n),s(!1)}(0,l.useEffect)((function(){0!==n.length?h(n):h([i])}),[]);var p=function(e,t,n){switch(e){case"add":!function(){var e=a(f);e.push(i),h(e)}();break;case"remove":void 0!==t&&function(e){var t=a(f);t.splice(e,1),h(t)}(t);break;case"update":void 0!==n&&void 0!==t&&function(e,t){var n=a(f);n[t]=e,h(n)}(n,t)}};return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)(zl,{appear:!0,show:o,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:d,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsxs)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:[(0,Ps.jsxs)("div",{className:"flex",children:["Ingredients"===t&&(0,Ps.jsx)(Xg,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Preparation"===t&&(0,Ps.jsx)(ob,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),t]}),"Preparation"===t&&(0,Ps.jsx)(Ps.Fragment,{})]}),(0,Ps.jsxs)("div",{className:"mt-6 text-sm text-left",children:["Ingredients"===t&&f.map((function(e,t){return(0,Ps.jsx)(ib,{ingredient:e,notifyParent:p,index:t,canRemove:f.length>1},t.toString())})),"Preparation"===t&&void 0!==f&&f.map((function(e,t){return(0,Ps.jsx)(sb,{step:e,notifyParent:p,index:t,canRemove:f.length>1},t.toString())}))]}),(0,Ps.jsxs)("div",{className:"mt-6",children:[(0,Ps.jsx)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){r(f),s(!1)},children:"Save"}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:d,children:"Cancel"})]})]})})})})]})})})},lb=["title","titleId"];var cb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,lb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})),fb=["title","titleId"];var hb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,fb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))})),db=function(e){var t=e.setOpen,n=e.addCondition;return(0,Ps.jsx)("button",{type:"button",className:"flex flex-none my-2 mx-2 items-center px-4 py-2 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-200",onClick:function(){return t(!0)},children:n?(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(cb,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Add"]}):(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(hb,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Modify"]})})},pb=function(e){var t=e.ingredients,n=e.setIngredients,r=u((0,l.useState)(!1),2),i=r[0],a=r[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(ub,{title:"Ingredients",list:t,setList:n,empty:{quantity:0,unit:"g",name:""},isOpen:i,setIsOpen:a}),(0,Ps.jsx)(Yg,{children:function(e){var n=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg bg-navy-200 px-4 py-2 text-left font-medium text-white hover:bg-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(Xg,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Ingredients"})]}),(0,Ps.jsx)(Zg,{className:"".concat(n?"rotate-180 transform":""," h-5 w-5 text-white")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[0!==t.length&&(0,Ps.jsx)("div",{className:"w-2/3",children:(0,Ps.jsx)(Iy,{ingredients:t})}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:a,addCondition:0===t.length})})]})})]})}})]})},vb=["title","titleId"];var mb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,vb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z"}))})),yb=["title","titleId"];var gb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,yb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"}))})),bb=["title","titleId"];var kb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,bb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))})),wb=["title","titleId"];var _b=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,wb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"}))})),xb=["title","titleId"];var Eb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,xb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"}))})),Cb=function(e){var t=e.ovenTemperature,n=e.notifyParent;return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsxs)("div",{className:"flex px-2",children:[(0,Ps.jsx)("input",{type:"text",className:"mr-2 w-12 px-2 border rounded-md text-md",value:t,onChange:function(e){var t=e.target.value;n("update",t)},placeholder:"0"}),"\xb0C"]})})},Sb=function(e){var t=e.preparationTime,n=e.notifyParent;return(0,Ps.jsxs)("div",{className:"flex px-2",children:[(0,Ps.jsx)("input",{type:"text",className:"mr-2 w-12 px-2 border rounded-md text-md",value:t.time,onChange:function(e){var r={time:e.target.value,unit:t.unit};n("update",r)}}),(0,Ps.jsx)("div",{className:"w-20",children:(0,Ps.jsx)(vg,{choices:["min","h"],selected:t.unit,handleSelected:function(e){var r={time:t.time,unit:e};n("update",r)}})})]})},Tb=function(e){var t=e.quote,n=e.notifyParent,r=u((0,l.useState)(0),2),i=r[0],a=r[1],o=u((0,l.useState)(0),2),s=o[0],c=o[1];(0,l.useEffect)((function(){void 0!==t?(a(t.content.length),c(t.author.length)):(a(0),c(0))}),[t]);return(0,Ps.jsxs)("div",{className:"flex flex-col w-full pl-2 ",children:[(0,Ps.jsxs)("div",{className:"mb-2",children:[(0,Ps.jsx)("p",{className:"pb-1",children:"Content: "}),(0,Ps.jsx)("textarea",{className:"w-full sm:w-80 mx-2 sm:text-md resize-none border rounded-md text-gray-900 ",rows:i>0?Math.ceil(i/30):1,cols:30,value:void 0!==t?t.content:"",onChange:function(e){var r={content:e.target.value,author:""};void 0!==t&&(r={content:e.target.value,author:t.author}),n("update",r)}})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("p",{className:"pb-1",children:"Author: "}),(0,Ps.jsx)("textarea",{className:"w-full sm:w-80 mx-2 sm:text-md resize-none border rounded-md text-gray-900 ",rows:s>0?Math.ceil(s/30):1,cols:30,value:void 0!==t?t.author:"",onChange:function(e){var r={content:"",author:e.target.value};void 0!==t&&(r={content:t.content,author:e.target.value}),n("update",r)}})]})]})},Ib=function(e){var t=e.source,n=e.notifyParent,r=u((0,l.useState)(0),2),i=r[0],a=r[1],o=u((0,l.useState)(0),2),s=o[0],c=o[1];(0,l.useEffect)((function(){void 0!==t?(a(t.content.length),c(t.author.length)):(a(0),c(0))}),[t]);return(0,Ps.jsxs)("div",{className:"flex flex-col w-full pl-2 ",children:[(0,Ps.jsxs)("div",{className:"mb-2",children:[(0,Ps.jsx)("p",{className:"pb-1",children:"Title: "}),(0,Ps.jsx)("textarea",{className:"w-full sm:w-80 mx-2 sm:text-md resize-none border rounded-md text-gray-900 ",rows:i>0?Math.ceil(i/30):1,cols:30,value:void 0!==t?t.content:"",onChange:function(e){var r={content:e.target.value,author:""};void 0!==t&&(r={content:e.target.value,author:t.author}),n("update",r)}})]}),(0,Ps.jsxs)("div",{children:[(0,Ps.jsx)("p",{className:"pb-1",children:"Author: "}),(0,Ps.jsx)("textarea",{className:"w-full sm:w-80 mx-2 sm:text-md resize-none border rounded-md text-gray-900 ",rows:s>0?Math.ceil(s/30):1,cols:30,value:void 0!==t?t.author:"",onChange:function(e){var r={content:"",author:e.target.value};void 0!==t&&(r={content:t.content,author:e.target.value}),n("update",r)}})]})]})},Nb=function(e){var t=e.recipeYield,n=e.notifyParent,r=u((0,l.useState)(),2),i=r[0],a=r[1];(0,l.useEffect)((function(){if(void 0!==t){var e="person"===t.piece?"person":"other";a(e)}}),[]);var o=function(e){"person"===e.target.value?a("person"):a("other")};return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)("div",{className:"flex mb-4",children:[(0,Ps.jsx)("p",{className:"px-2 w-fit",children:"Quantity:"}),(0,Ps.jsx)("button",{onClick:function(){var e={quantity:t.quantity+1,piece:t.piece};n("update",e)},className:"flex items-center border border-transparent rounded-md text-sm font-medium hover:text-navy-200",children:(0,Ps.jsx)(tb,{className:"mr-2 h-5 w-5 hover:text-green-700","aria-hidden":"true"})}),t.quantity,(0,Ps.jsx)("button",{onClick:function(){if(t.quantity>0){var e={quantity:t.quantity-1,piece:t.piece};n("update",e)}},className:"flex pl-2 items-center border border-transparent rounded-md text-sm font-medium hover:text-navy-200",children:(0,Ps.jsx)(rb,{className:"mr-2 h-5 w-5 ".concat(t.quantity>0?"hover:text-red-700":"hover:text-gray-800"),"aria-hidden":"true"})})]}),(0,Ps.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center mb-4",children:[(0,Ps.jsx)("p",{className:"px-2 pr-5 mb-2 md:mb-0 w-fit",children:"Serving:"}),(0,Ps.jsxs)("div",{className:"ml-6 mb-2 md:ml-0 md:mb-0",children:[(0,Ps.jsx)("input",{id:"person",className:"h-4 w-4 mt-1 cursor-pointer accent-navy-500",type:"radio",value:"person",checked:"person"===i,onChange:o}),(0,Ps.jsx)("label",{htmlFor:"person",className:"pl-2 mr-4 break-words text-gray-600 cursor-pointer",children:"person"})]}),(0,Ps.jsxs)("div",{className:"ml-6 md:ml-0",children:[(0,Ps.jsx)("input",{id:"other",className:"h-4 w-4 mt-1 cursor-pointer accent-navy-500",type:"radio",value:"other",checked:"other"===i,onChange:o}),(0,Ps.jsxs)("label",{htmlFor:"other",className:"pl-2 break-words text-gray-600 cursor-pointer",children:["other"!==i&&(0,Ps.jsx)(Ps.Fragment,{children:"other"}),"other"===i&&(0,Ps.jsx)(Ps.Fragment,{children:"other:"})]}),"other"===i&&(0,Ps.jsx)("input",{type:"text",className:"w-20 mx-2 px-2 border rounded-md text-md",value:"person"===t.piece?"":t.piece,onChange:function(e){var r={quantity:t.quantity,piece:e.target.value};n("update",r)},placeholder:"cookies"})]})]})]})},Rb=function(e){var t=e.title,n=e.property,r=e.isOpen,i=e.setIsOpen,a=e.setProperty,o=e.empty,s=u((0,l.useState)(),2),c=s[0],f=s[1];function h(){f(n),i(!1)}(0,l.useEffect)((function(){f(n)}),[n]);var d=function(e,t){switch(e){case"remove":f(o);break;case"update":void 0!==t&&function(e){f(e)}(t)}};return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)(zl,{appear:!0,show:r,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:h,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsx)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,Ps.jsxs)("div",{className:"flex",children:["Yield"===t&&(0,Ps.jsx)(gb,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Preparation Time"===t&&(0,Ps.jsx)(kb,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Oven Temperature"===t&&(0,Ps.jsx)(mb,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Quote"===t&&(0,Ps.jsx)(_b,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Source"===t&&(0,Ps.jsx)(Eb,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),t]})}),(0,Ps.jsxs)("div",{className:"mt-6",children:["Yield"===t&&(0,Ps.jsx)(Nb,{recipeYield:c,notifyParent:d}),"Preparation Time"===t&&(0,Ps.jsx)(Sb,{preparationTime:c,notifyParent:d}),"Oven Temperature"===t&&(0,Ps.jsx)(Cb,{ovenTemperature:c,notifyParent:d}),"Quote"===t&&(0,Ps.jsx)(Tb,{quote:c,notifyParent:d}),"Source"===t&&(0,Ps.jsx)(Ib,{source:c,notifyParent:d})]}),(0,Ps.jsxs)("div",{className:"mt-8",children:[(0,Ps.jsx)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){a(c),i(!1)},children:"Save"}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:h,children:"Cancel"})]})]})})})})]})})})},Pb=function(e){var t=e.ovenTemperature,n=e.setOvenTemperature,r=u((0,l.useState)(!1),2),i=r[0],a=r[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Rb,{title:"Oven Temperature",property:t,setProperty:n,isOpen:i,setIsOpen:a,empty:0}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var r=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg ring ring-inset ring-navy-200 px-4 py-2 text-left font-medium text-navy-200 hover:ring-navy-300 hover:text-navy-300 focus:outline-2 focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(mb,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Oven Temperature"})]}),(0,Ps.jsx)(Zg,{className:"".concat(r?"rotate-180 transform":""," h-5 w-5 text-navy-200 hover:text-navy-300")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[void 0!==t&&(0,Ps.jsxs)("div",{className:"w-2/3 text-left",children:[t," \xb0C"]}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:a,addCondition:void 0===t})}),void 0!==t&&(0,Ps.jsx)("button",{type:"button",className:"flex flex-none my-2 mx-2 items-center px-4 py-2 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-200",onClick:function(){return n(void 0)},children:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Pg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Delete"]})})]})})]})}})]})},Ob=function(e){var t=e.preparation,n=e.setPreparation,r=u((0,l.useState)(!1),2),i=r[0],a=r[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(ub,{title:"Preparation",list:t,setList:n,empty:"",isOpen:i,setIsOpen:a}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var n=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg bg-navy-200 px-4 py-2 text-left font-medium text-white hover:bg-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(ob,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Preparation"})]}),(0,Ps.jsx)(Zg,{className:"".concat(n?"rotate-180 transform":""," h-5 w-5 text-white")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[0!==t.length&&(0,Ps.jsx)("div",{className:"w-2/3",children:(0,Ps.jsx)(Ny,{preparation:t})}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:a,addCondition:0===t.length})})]})})]})}})]})},Ab=function(e){var t=e.preparationTime,n=e.setPreparationTime,r=e.emptyTime,i=u((0,l.useState)(!1),2),a=i[0],o=i[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Rb,{title:"Preparation Time",property:t,setProperty:n,isOpen:a,setIsOpen:o,empty:r}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var n=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg bg-navy-200 px-4 py-2 text-left font-medium text-white hover:bg-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(kb,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Preparation Time"})]}),(0,Ps.jsx)(Zg,{className:"".concat(n?"rotate-180 transform":""," h-5 w-5 text-white")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[0!==t.time&&(0,Ps.jsxs)("div",{className:"w-2/3 text-left",children:[t.time," ",t.unit]}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:o,addCondition:0===t.time})})]})})]})}})]})},Lb=function(e){var t=e.quote,n=e.setQuote,r=e.emptyQuote,i=u((0,l.useState)(!1),2),a=i[0],o=i[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Rb,{title:"Quote",property:t,setProperty:n,isOpen:a,setIsOpen:o,empty:r}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var r=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg ring ring-inset ring-navy-200 px-4 py-2 text-left font-medium text-navy-200 hover:ring-navy-300 hover:text-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(_b,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Quote"})]}),(0,Ps.jsx)(Zg,{className:"".concat(r?"rotate-180 transform":""," h-5 w-5  text-navy-200 hover:text-navy-300")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[void 0!==t&&(0,Ps.jsxs)("div",{className:"w-2/3",children:[(0,Ps.jsxs)("p",{children:["Content: ",t.content]}),(0,Ps.jsxs)("p",{children:["Author: ",t.author]})]}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:o,addCondition:void 0===t})}),void 0!==t&&(0,Ps.jsx)("button",{type:"button",className:"flex flex-none my-2 mx-2 items-center px-4 py-2 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-200",onClick:function(){return n(void 0)},children:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Pg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Delete"]})})]})})]})}})]})},jb=function(e){var t=e.source,n=e.setSource,r=e.emptySource,i=u((0,l.useState)(!1),2),a=i[0],o=i[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Rb,{title:"Source",property:t,setProperty:n,isOpen:a,setIsOpen:o,empty:r}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var r=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg ring ring-inset ring-navy-200 px-4 py-2 text-left font-medium text-navy-200 hover:ring-navy-300 hover:text-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(Eb,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Source"})]}),(0,Ps.jsx)(Zg,{className:"".concat(r?"rotate-180 transform":""," h-5 w-5  text-navy-200 hover:text-navy-300")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[void 0!==t&&(0,Ps.jsxs)("div",{className:"w-2/3",children:[(0,Ps.jsxs)("p",{children:["Title: ",t.content]}),(0,Ps.jsxs)("p",{children:["Author: ",t.author]})]}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:o,addCondition:void 0===t})}),void 0!==t&&(0,Ps.jsx)("button",{type:"button",className:"flex flex-none my-2 mx-2 items-center px-4 py-2 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-200",onClick:function(){return n(void 0)},children:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Pg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Delete"]})})]})})]})}})]})},Db=function(e){var t=e.recipeYield,n=e.setRecipeYield,r=e.emptyYield,i=u((0,l.useState)(!1),2),a=i[0],o=i[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Rb,{title:"Yield",property:t,setProperty:n,isOpen:a,setIsOpen:o,empty:r}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var n=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg bg-navy-200 px-4 py-2 text-left font-medium text-white hover:bg-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(gb,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Yield"})]}),(0,Ps.jsx)(Zg,{className:"".concat(n?"rotate-180 transform":""," h-5 w-5 text-white")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[t.quantity!==r.quantity&&(0,Ps.jsxs)("div",{className:"w-2/3 text-left",children:[t.quantity," ",t.piece]}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:o,addCondition:0===t.quantity})})]})})]})}})]})},Mb=["title","titleId"];var Fb=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,Mb);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))})),Ub=function(e){var t=e.setImage;return(0,Ps.jsx)("div",{className:"w-full cursor-pointer rounded-lg bg-navy-200 px-4 py-2 text-left font-medium text-white hover:bg-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:(0,Ps.jsxs)("label",{children:[(0,Ps.jsxs)("div",{className:"flex w-full items-center cursor-pointer",children:[(0,Ps.jsx)(Fb,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),"Upload Image"]}),(0,Ps.jsx)("input",{type:"file",name:"myImage",className:"hidden",onChange:function(e){console.log(e),console.log(e.target.files[0]),t(e.target.files[0])}})]})})},Vb="firebasestorage.googleapis.com",qb="storageBucket",zb=function(e){y(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(this,n),(i=t.call(this,Bb(e),"Firebase Storage: ".concat(r," (").concat(Bb(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(v(i),n.prototype),i}return N(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Bb(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(ae);function Bb(e){return"storage/"+e}function Hb(){return new zb("unknown","An unknown error occurred, please check the error payload for server response.")}function Wb(){return new zb("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Kb(){return new zb("canceled","User canceled the upload/download.")}function Gb(){return new zb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qb(e){return new zb("invalid-argument",e)}function Yb(){return new zb("app-deleted","The Firebase app was deleted.")}function $b(e,t){return new zb("invalid-format","String does not match format '"+e+"': "+t)}function Xb(e){throw new zb("internal-error","Internal error: "+e)}var Jb,Zb=function(){function e(t,n){S(this,e),this.bucket=t,this.path_=n}return N(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(Vc){return new e(t,"")}if(""===r.path)return r;throw new zb("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Vb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<u.length;l++){var c=u[l],f=c.regex.exec(t);if(f){var h=f[c.indices.bucket],d=f[c.indices.path];d||(d=""),r=new e(h,d),c.postModify(r);break}}if(null==r)throw function(e){return new zb("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),ek=function(){function e(t){S(this,e),this.promise_=Promise.reject(t)}return N(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function tk(e){return"string"===typeof e||e instanceof String}function nk(e){return rk()&&e instanceof Blob}function rk(){return"undefined"!==typeof Blob&&!G()}function ik(e,t,n,r){if(r<t)throw Qb("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Qb("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ak(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ok(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function sk(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Jb||(Jb={}));var uk=function(){function e(t,n,r,i,a,o,s,u,l,c,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];S(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return N(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(Vc){i(Vc)}else if(null!==a){var s=Hb();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Yb():Kb());else i(Wb())}};this.canceled_?t(0,new lk(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(l)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void c.call.apply(c,[null,e].concat(n));var a;if(u()||o)return h(),void c.call.apply(c,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),l||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new lk(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Jb.NO_ERROR,a=r.getStatus();if(n&&!sk(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new lk(o,r))}else{var s=r.getErrorCode()===Jb.ABORT;t(!1,new lk(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),lk=N((function e(t,n,r){S(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function ck(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function fk(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function hk(e,t){t&&(e["X-Firebase-GMPID"]=t)}function dk(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function pk(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=ok(e.urlParams),u=e.url+s,l=Object.assign({},e.headers);return hk(l,t),ck(l,n),fk(l,a),dk(l,r),new uk(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function vk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function mk(){for(var e=vk(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(rk())return new Blob(n);throw new zb("unsupported-environment","This browser doesn't seem to support creating Blobs")}function yk(e){if("undefined"===typeof atob)throw new zb("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var gk="raw",bk="base64",kk="base64url",wk="data_url",_k=N((function e(t,n){S(this,e),this.data=t,this.contentType=n||null}));function xk(e,t){switch(e){case gk:return new _k(Ek(t));case bk:case kk:return new _k(Ck(e,t));case wk:return new _k(function(e){var t=new Sk(e);return t.base64?Ck(bk,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(Vc){throw $b(wk,"Malformed data URL.")}return Ek(t)}(t.rest)}(t),new Sk(t).contentType)}throw Hb()}function Ek(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ck(e,t){switch(e){case bk:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw $b(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case kk:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw $b(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=yk(t)}catch(Vc){if(Vc.message.includes("polyfill"))throw Vc;throw $b(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Sk=N((function e(t){S(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw $b(wk,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Tk=function(){function e(t,n){S(this,e);var r=0,i="";nk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return N(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(nk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(rk()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(mk.apply(null,i))}var a=n.map((function(e){return tk(e)?xk(gk,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Ik(e){var t;try{t=JSON.parse(e)}catch(Vc){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Nk(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Rk(e,t){return t}var Pk=N((function e(t,n,r,i){S(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Rk})),Ok=null;function Ak(){if(Ok)return Ok;var e=[];e.push(new Pk("bucket")),e.push(new Pk("generation")),e.push(new Pk("metageneration")),e.push(new Pk("name","fullPath",!0));var t=new Pk("name");t.xform=function(e,t){return function(e){return!tk(e)||e.length<2?e:Nk(e)}(t)},e.push(t);var n=new Pk("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Pk("timeCreated")),e.push(new Pk("updated")),e.push(new Pk("md5Hash",null,!0)),e.push(new Pk("cacheControl",null,!0)),e.push(new Pk("contentDisposition",null,!0)),e.push(new Pk("contentEncoding",null,!0)),e.push(new Pk("contentLanguage",null,!0)),e.push(new Pk("contentType",null,!0)),e.push(new Pk("metadata","customMetadata",!0)),Ok=e}function Lk(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Zb(n,r);return t._makeStorageReference(i)}})}(r,e),r}function jk(e,t,n){var r=Ik(t);return null===r?null:Lk(e,r,n)}function Dk(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var Mk="prefixes",Fk="items";function Uk(e,t,n){var r=Ik(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Mk]){var i,a=_(n[Mk]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new Zb(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n[Fk]){var u,l=_(n[Fk]);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=e._makeStorageReference(new Zb(t,c.name));r.items.push(f)}}catch(h){l.e(h)}finally{l.f()}}return r}(e,t,r)}var Vk=N((function e(t,n,r,i){S(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function qk(e){if(!e)throw Hb()}function zk(e,t){return function(n,r){var i=jk(e,r,t);return qk(null!==i),i}}function Bk(e,t){return function(n,r){var i=jk(e,r,t);return qk(null!==i),function(e,t,n,r){var i=Ik(t);if(null===i)return null;if(!tk(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return ak("/b/"+o(i)+"/o/"+o(a),n,r)+ok({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Hk(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new zb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new zb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new zb("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new zb("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Wk(e){var t=Hk(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new zb("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Kk(e,t,n){var r=ak(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Vk(r,"GET",zk(e,n),i);return a.errorHandler=Wk(t),a}function Gk(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=ak(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Vk(o,"GET",function(e,t){return function(n,r){var i=Uk(e,t,r);return qk(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Hk(t),u}function Qk(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Yk(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Qk(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Dk(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",f=Tk.getBlob(l,r,c);if(null===f)throw Gb();var h={name:u.fullPath},d=ak(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Vk(d,"POST",zk(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Hk(t),v}var $k=N((function e(t,n,r,i){S(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Xk(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Vc){qk(!1)}return qk(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Jk=262144;function Zk(e,t,n,r,i,a,o,s){var u=new $k(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new zb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var f=u.current,h=f+c,d={"X-Goog-Upload-Command":0===c?"finalize":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw Gb();var v=t.maxUploadRetryTime,m=new Vk(n,"POST",(function(e,n){var i,o=Xk(e,["active","final"]),s=u.current+c,l=r.size();return i="final"===o?zk(t,a)(e,n):null,new $k(s,l,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Hk(e),m}var ew="running",tw="paused",nw="success",rw="canceled",iw="error";function aw(e){switch(e){case"running":case"pausing":case"canceling":return ew;case"paused":return tw;case"success":return nw;case"canceled":return rw;default:return iw}}var ow=N((function e(t,n,r){S(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function sw(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var uw=function(){function e(){var t=this;S(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jb.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Jb.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Jb.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return N(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Xb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Xb("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Xb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Vc){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Xb("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Xb("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),lw=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(uw);function cw(){return new lw}var fw=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;S(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Ak(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(sk(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Wb()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return N(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=u(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Qk(t,r,i),s={name:o.fullPath},u=ak(a,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=Dk(o,n),f=e.maxUploadRetryTime,h=new Vk(u,"POST",(function(e){var t;Xk(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Vc){qk(!1)}return qk(tk(t)),t}),f);return h.urlParams=s,h.headers=l,h.body=c,h.errorHandler=Hk(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,cw,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Vk(n,"POST",(function(e){var t=Xk(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Vc){qk(!1)}n||qk(!1);var i=Number(n);return qk(!isNaN(i)),new $k(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Hk(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,cw,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Jk*this._chunkMultiplier,n=new $k(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Zk(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(Vc){return e._error=Vc,void e._transition("error")}var s=e._ref.storage._makeRequest(o,cw,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Jk*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Kk(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,cw,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Yk(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,cw,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Kb(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=aw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new ow(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(aw(this._state)){case nw:sw(this._resolve.bind(null,this.snapshot))();break;case rw:case iw:sw(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(aw(this._state)){case ew:case tw:e.next&&sw(e.next.bind(e,this.snapshot))();break;case nw:e.complete&&sw(e.complete.bind(e))();break;default:e.error&&sw(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),hw=function(){function e(t,n){S(this,e),this._service=t,this._location=n instanceof Zb?n:Zb.makeFromUrl(n,t.host)}return N(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Zb(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Nk(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Zb(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new zb("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function dw(e,t){null!=t&&"number"===typeof t.maxResults&&ik("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Gk(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,cw)}function pw(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=ak(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Vk(r,"GET",Bk(e,n),i);return a.errorHandler=Wk(t),a}(e.storage,e._location,Ak());return e.storage.makeRequestWithTokens(t,cw).then((function(e){if(null===e)throw new zb("no-download-url","The given file does not have any download URLs.");return e}))}function vw(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Zb(e._location.bucket,n);return new hw(e.storage,r)}function mw(e,t){if(e instanceof kw){var n=e;if(null==n._bucket)throw new zb("no-default-bucket","No default bucket found. Did you set the '"+qb+"' property when initializing the app?");var r=new hw(n,n._bucket);return null!=t?mw(r,t):r}return void 0!==t?vw(e,t):e}function yw(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof kw)return new hw(e,t);throw Qb("To use ref(service, url), the first argument must be a Storage instance.")}return mw(e,t)}function gw(e,t){var n=null===t||void 0===t?void 0:t[qb];return null==n?null:Zb.makeFromBucketSpec(n,e)}function bw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:ie(i,e.app.options.projectId))}var kw=function(){function e(t,n,r,i,a){S(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Vb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Zb.makeFromBucketSpec(i,this._host):gw(this._host,this.app.options)}return N(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Zb.makeFromBucketSpec(this._url,e):this._bucket=gw(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ik("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ik("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=C(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=C(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new hw(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ek(Yb());var o=pk(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=C(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=u(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ww="@firebase/storage",_w="0.10.0",xw="storage";function Ew(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new fw(e,new Tk(t),n)}(e=Se(e),t,n)}function Cw(e,t){return dw(e=Se(e),t)}function Sw(e){return pw(e=Se(e))}function Tw(e,t){return yw(e=Se(e),t)}function Iw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};bw(e,t,n,r)}function Nw(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new kw(r,i,a,n,bt)}pt(new Te(xw,Nw,"PUBLIC").setMultipleInstances(!0)),_t(ww,_w,""),_t(ww,_w,"esm2017");var Rw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt(),t=arguments.length>1?arguments[1]:void 0,n=vt(e=Se(e),xw),r=n.getImmediate({identifier:t}),i=ee("storage");return i&&Iw.apply(void 0,[r].concat(a(i))),r}(Es),Pw=function(){var e=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.type,"/").concat(t.id),e.next=3,Cw(Tw(Rw,n),{maxResults:100});case 3:if((r=e.sent).items.forEach((function(e){if(console.log(e.name),e.name===t.id+".png"||e.name===t.id+".jpg")return!0})),!r.nextPageToken){e.next=7;break}return e.abrupt("return",Pw(t));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ow(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var Aw=[{name:"recipeForm",title:"Recipe"},{name:"previewForm",title:"Preview"}],Lw=function(e){var t=e.currentTab,n=e.setCurrentTab;return(0,Ps.jsx)("div",{className:"mx-4 md:mx-0 mb-6",children:(0,Ps.jsx)("div",{className:"border-b border-gray-200",children:(0,Ps.jsx)("nav",{className:"-mb-px flex","aria-label":"Tabs",children:Aw.map((function(e){var r=e.name,i=e.title;return(0,Ps.jsx)("button",{onClick:function(){n(r)},className:Ow(r===t?"border-navy-600 text-navy-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),"aria-current":r===t?"page":void 0,children:i},r)}))})})})},jw=["title","titleId"];var Dw,Mw=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,jw);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 01-1.125-1.125v-3.75zM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-8.25zM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-2.25z"}))})),Fw=["value","defaultValue","onChange","name","by","disabled","__demoMode","nullable","multiple"],Uw=["id","onChange","displayValue","type"],Vw=["id"],qw=["id"],zw=["id","hold"],Bw=["id","disabled","value"],Hw=function(e){return e[e.Open=0]="Open",e[e.Closed=1]="Closed",e}(Hw||{}),Ww=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}(Ww||{}),Kw=function(e){return e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e}(Kw||{}),Gw=function(e){return e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e}(Gw||{});function Qw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=ju(t(e.options.slice()),(function(e){return e.dataRef.current.domRef.current})),i=n?r.indexOf(n):null;return-1===i&&(i=null),{options:r,activeOptionIndex:i}}var Yw=(R(Dw={},1,(function(e){return e.dataRef.current.disabled||1===e.comboboxState?e:Ve(Ve({},e),{},{activeOptionIndex:null,comboboxState:1})})),R(Dw,0,(function(e){if(e.dataRef.current.disabled||0===e.comboboxState)return e;var t=e.activeOptionIndex,n=e.dataRef.current.isSelected,r=e.options.findIndex((function(e){return n(e.dataRef.current.value)}));return-1!==r&&(t=r),Ve(Ve({},e),{},{comboboxState:0,activeOptionIndex:t})})),R(Dw,2,(function(e,t){var n;if(e.dataRef.current.disabled||e.dataRef.current.optionsRef.current&&!e.dataRef.current.optionsPropsRef.current.static&&1===e.comboboxState)return e;var r=Qw(e);if(null===r.activeOptionIndex){var i=r.options.findIndex((function(e){return!e.dataRef.current.disabled}));-1!==i&&(r.activeOptionIndex=i)}var a=ec(t,{resolveItems:function(){return r.options},resolveActiveIndex:function(){return r.activeOptionIndex},resolveId:function(e){return e.id},resolveDisabled:function(e){return e.dataRef.current.disabled}});return Ve(Ve(Ve({},e),r),{},{activeOptionIndex:a,activationTrigger:null!=(n=t.trigger)?n:1})})),R(Dw,3,(function(e,t){var n={id:t.id,dataRef:t.dataRef},r=Qw(e,(function(e){return[].concat(a(e),[n])}));null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n));var i=Ve(Ve(Ve({},e),r),{},{activationTrigger:1});return e.dataRef.current.__demoMode&&void 0===e.dataRef.current.value&&(i.activeOptionIndex=0),i})),R(Dw,4,(function(e,t){var n=Qw(e,(function(e){var n=e.findIndex((function(e){return e.id===t.id}));return-1!==n&&e.splice(n,1),e}));return Ve(Ve(Ve({},e),n),{},{activationTrigger:1})})),R(Dw,5,(function(e,t){return Ve(Ve({},e),{},{labelId:t.id})})),Dw),$w=(0,l.createContext)(null);function Xw(e){var t=(0,l.useContext)($w);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Combobox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,Xw),n}return t}$w.displayName="ComboboxActionsContext";var Jw=(0,l.createContext)(null);function Zw(e){var t=(0,l.useContext)(Jw);if(null===t){var n=new Error("<".concat(e," /> is missing a parent <Combobox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(n,Zw),n}return t}function e_(e,t){return Ks(t.type,Yw,e,t)}Jw.displayName="ComboboxDataContext";var t_=l.Fragment;var n_=nu((function(e,t){var n,r=e.value,i=e.defaultValue,a=e.onChange,o=e.name,s=e.by,c=void 0===s?function(e,t){return e===t}:s,f=e.disabled,h=void 0!==f&&f,d=e.__demoMode,p=void 0!==d&&d,v=e.nullable,m=void 0!==v&&v,y=e.multiple,g=void 0!==y&&y,b=Ws(e,Fw),k=u(Uy(r,a,i),2),w=k[0],_=void 0===w?g?[]:void 0:w,x=k[1],E=u((0,l.useReducer)(e_,{dataRef:(0,l.createRef)(),comboboxState:p?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),2),C=E[0],S=E[1],T=(0,l.useRef)(!1),I=(0,l.useRef)({static:!1,hold:!1}),N=(0,l.useRef)(null),P=(0,l.useRef)(null),O=(0,l.useRef)(null),A=(0,l.useRef)(null),L=uu("string"==typeof c?function(e,t){var n=c;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:c),j=(0,l.useCallback)((function(e){var t;return Ks(D.mode,(R(t={},1,(function(){return _.some((function(t){return L(t,e)}))})),R(t,0,(function(){return L(_,e)})),t))}),[_]),D=(0,l.useMemo)((function(){return Ve(Ve({},C),{},{optionsPropsRef:I,labelRef:N,inputRef:P,buttonRef:O,optionsRef:A,value:_,defaultValue:i,disabled:h,mode:g?1:0,get activeOptionIndex(){if(T.current&&null===C.activeOptionIndex&&C.options.length>0){var e=C.options.findIndex((function(e){return!e.dataRef.current.disabled}));if(-1!==e)return e}return C.activeOptionIndex},compare:L,isSelected:j,nullable:m,__demoMode:p})}),[_,i,h,g,m,p,C]);ou((function(){C.dataRef.current=D}),[D]),Hu([D.buttonRef,D.inputRef,D.optionsRef],(function(){return K.closeCombobox()}),0===D.comboboxState);var M=(0,l.useMemo)((function(){return{open:0===D.comboboxState,disabled:h,activeIndex:D.activeOptionIndex,activeOption:null===D.activeOptionIndex?null:D.options[D.activeOptionIndex].dataRef.current.value,value:_}}),[D,h,_]),F=uu((function(e){var t=D.options.find((function(t){return t.id===e}));!t||W(t.dataRef.current.value)})),U=uu((function(){if(null!==D.activeOptionIndex){var e=D.options[D.activeOptionIndex],t=e.dataRef,n=e.id;W(t.current.value),K.goToOption(Zl.Specific,n)}})),V=uu((function(){S({type:0}),T.current=!0})),q=uu((function(){S({type:1}),T.current=!1})),z=uu((function(e,t,n){return T.current=!1,e===Zl.Specific?S({type:2,focus:Zl.Specific,id:t,trigger:n}):S({type:2,focus:e,trigger:n})})),B=uu((function(e,t){return S({type:3,id:e,dataRef:t}),function(){return S({type:4,id:e})}})),H=uu((function(e){return S({type:5,id:e}),function(){return S({type:5,id:null})}})),W=uu((function(e){var t;return Ks(D.mode,(R(t={},0,(function(){return null==x?void 0:x(e)})),R(t,1,(function(){var t=D.value.slice(),n=t.findIndex((function(t){return L(t,e)}));return-1===n?t.push(e):t.splice(n,1),null==x?void 0:x(t)})),t))})),K=(0,l.useMemo)((function(){return{onChange:W,registerOption:B,registerLabel:H,goToOption:z,closeCombobox:q,openCombobox:V,selectActiveOption:U,selectOption:F}}),[]),G=null===t?{}:{ref:t},Q=(0,l.useRef)(null),Y=Cl();return(0,l.useEffect)((function(){!Q.current||void 0!==i&&Y.addEventListener(Q.current,"reset",(function(){W(i)}))}),[Q,W]),l.createElement($w.Provider,{value:K},l.createElement(Jw.Provider,{value:D},l.createElement(Vu,{value:Ks(D.comboboxState,(n={},R(n,0,Fu.Open),R(n,1,Fu.Closed),n))},null!=o&&null!=_&&Dy(R({},o,_)).map((function(e,t){var n=u(e,2),r=n[0],i=n[1];return l.createElement(Yu,Ve({features:Qu.Hidden,ref:0===t?function(e){var t;Q.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0},ru({key:r,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:r,value:i})))})),Js({ourProps:G,theirProps:b,slot:M,defaultTag:t_,name:"Combobox"}))))})),r_=nu((function(e,t){var n,r,i,a,o=yu(),s=e.id,c=void 0===s?"headlessui-combobox-input-".concat(o):s,f=e.onChange,h=e.displayValue,d=e.type,p=void 0===d?"text":d,v=Ws(e,Uw),m=Zw("Combobox.Input"),y=Xw("Combobox.Input"),g=fu(m.inputRef,t),b=(0,l.useRef)(!1),k=Cl(),w=function(){var e;return"function"==typeof h&&void 0!==m.value?null!=(e=h(m.value))?e:"":"string"==typeof m.value?m.value:""}();Ic((function(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1];b.current||!m.inputRef.current||(0===s&&1===i||r!==o)&&(m.inputRef.current.value=r)}),[w,m.comboboxState]);var _=(0,l.useRef)(!1),x=uu((function(){_.current=!0})),E=uu((function(){setTimeout((function(){_.current=!1}))})),C=uu((function(e){var t,n;switch(b.current=!0,e.key){case gu.Backspace:case gu.Delete:if(0!==m.mode||!m.nullable)return;var r=e.currentTarget;k.requestAnimationFrame((function(){""===r.value&&(y.onChange(null),m.optionsRef.current&&(m.optionsRef.current.scrollTop=0),y.goToOption(Zl.Nothing))}));break;case gu.Enter:if(b.current=!1,0!==m.comboboxState||_.current)return;if(e.preventDefault(),e.stopPropagation(),null===m.activeOptionIndex)return void y.closeCombobox();y.selectActiveOption(),0===m.mode&&y.closeCombobox();break;case gu.ArrowDown:return b.current=!1,e.preventDefault(),e.stopPropagation(),Ks(m.comboboxState,(R(t={},0,(function(){y.goToOption(Zl.Next)})),R(t,1,(function(){y.openCombobox()})),t));case gu.ArrowUp:return b.current=!1,e.preventDefault(),e.stopPropagation(),Ks(m.comboboxState,(R(n={},0,(function(){y.goToOption(Zl.Previous)})),R(n,1,(function(){y.openCombobox(),k.nextFrame((function(){m.value||y.goToOption(Zl.Last)}))})),n));case gu.Home:if(e.shiftKey)break;return b.current=!1,e.preventDefault(),e.stopPropagation(),y.goToOption(Zl.First);case gu.PageUp:return b.current=!1,e.preventDefault(),e.stopPropagation(),y.goToOption(Zl.First);case gu.End:if(e.shiftKey)break;return b.current=!1,e.preventDefault(),e.stopPropagation(),y.goToOption(Zl.Last);case gu.PageDown:return b.current=!1,e.preventDefault(),e.stopPropagation(),y.goToOption(Zl.Last);case gu.Escape:return b.current=!1,0!==m.comboboxState?void 0:(e.preventDefault(),m.optionsRef.current&&!m.optionsPropsRef.current.static&&e.stopPropagation(),y.closeCombobox());case gu.Tab:if(b.current=!1,0!==m.comboboxState)return;0===m.mode&&y.selectActiveOption(),y.closeCombobox()}})),S=uu((function(e){y.openCombobox(),null==f||f(e)})),T=uu((function(){b.current=!1})),I=jy((function(){if(m.labelId)return[m.labelId].join(" ")}),[m.labelId]),N=(0,l.useMemo)((function(){return{open:0===m.comboboxState,disabled:m.disabled}}),[m]);return Js({ourProps:{ref:g,id:c,role:"combobox",type:p,"aria-controls":null==(n=m.optionsRef.current)?void 0:n.id,"aria-expanded":m.disabled?void 0:0===m.comboboxState,"aria-activedescendant":null===m.activeOptionIndex||null==(r=m.options[m.activeOptionIndex])?void 0:r.id,"aria-multiselectable":1===m.mode||void 0,"aria-labelledby":I,defaultValue:null!=(a=null!=(i=e.defaultValue)?i:void 0!==m.defaultValue?null==h?void 0:h(m.defaultValue):null)?a:m.defaultValue,disabled:m.disabled,onCompositionStart:x,onCompositionEnd:E,onKeyDown:C,onChange:S,onBlur:T},theirProps:v,slot:N,defaultTag:"input",name:"Combobox.Input"})})),i_=nu((function(e,t){var n,r=Zw("Combobox.Button"),i=Xw("Combobox.Button"),a=fu(r.buttonRef,t),o=yu(),s=e.id,u=void 0===s?"headlessui-combobox-button-".concat(o):s,c=Ws(e,Vw),f=Cl(),h=uu((function(e){switch(e.key){case gu.ArrowDown:return e.preventDefault(),e.stopPropagation(),1===r.comboboxState&&i.openCombobox(),f.nextFrame((function(){var e;return null==(e=r.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case gu.ArrowUp:return e.preventDefault(),e.stopPropagation(),1===r.comboboxState&&(i.openCombobox(),f.nextFrame((function(){r.value||i.goToOption(Zl.Last)}))),f.nextFrame((function(){var e;return null==(e=r.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case gu.Escape:return 0!==r.comboboxState?void 0:(e.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&e.stopPropagation(),i.closeCombobox(),f.nextFrame((function(){var e;return null==(e=r.inputRef.current)?void 0:e.focus({preventScroll:!0})})));default:return}})),d=uu((function(e){if(bu(e.currentTarget))return e.preventDefault();0===r.comboboxState?i.closeCombobox():(e.preventDefault(),i.openCombobox()),f.nextFrame((function(){var e;return null==(e=r.inputRef.current)?void 0:e.focus({preventScroll:!0})}))})),p=jy((function(){if(r.labelId)return[r.labelId,u].join(" ")}),[r.labelId,u]),v=(0,l.useMemo)((function(){return{open:0===r.comboboxState,disabled:r.disabled,value:r.value}}),[r]);return Js({ourProps:{ref:a,id:u,type:zu(e,r.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":null==(n=r.optionsRef.current)?void 0:n.id,"aria-expanded":r.disabled?void 0:0===r.comboboxState,"aria-labelledby":p,disabled:r.disabled,onClick:d,onKeyDown:h},theirProps:c,slot:v,defaultTag:"button",name:"Combobox.Button"})})),a_=nu((function(e,t){var n=yu(),r=e.id,i=void 0===r?"headlessui-combobox-label-".concat(n):r,a=Ws(e,qw),o=Zw("Combobox.Label"),s=Xw("Combobox.Label"),u=fu(o.labelRef,t);ou((function(){return s.registerLabel(i)}),[i]);var c=uu((function(){var e;return null==(e=o.inputRef.current)?void 0:e.focus({preventScroll:!0})})),f=(0,l.useMemo)((function(){return{open:0===o.comboboxState,disabled:o.disabled}}),[o]);return Js({ourProps:{ref:u,id:i,onClick:c},theirProps:a,slot:f,defaultTag:"label",name:"Combobox.Label"})})),o_=$s.RenderStrategy|$s.Static,s_=nu((function(e,t){var n,r=yu(),i=e.id,a=void 0===i?"headlessui-combobox-options-".concat(r):i,o=e.hold,s=void 0!==o&&o,u=Ws(e,zw),c=Zw("Combobox.Options"),f=fu(c.optionsRef,t),h=Uu(),d=null!==h?h===Fu.Open:0===c.comboboxState;ou((function(){var t;c.optionsPropsRef.current.static=null!=(t=e.static)&&t}),[c.optionsPropsRef,e.static]),ou((function(){c.optionsPropsRef.current.hold=s}),[c.optionsPropsRef,s]),tc({container:c.optionsRef.current,enabled:0===c.comboboxState,accept:function(e){return"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk:function(e){e.setAttribute("role","none")}});var p=jy((function(){var e,t;return null!=(t=c.labelId)?t:null==(e=c.buttonRef.current)?void 0:e.id}),[c.labelId,c.buttonRef.current]),v=(0,l.useMemo)((function(){return{open:0===c.comboboxState}}),[c]);return Js({ourProps:{"aria-activedescendant":null===c.activeOptionIndex||null==(n=c.options[c.activeOptionIndex])?void 0:n.id,"aria-labelledby":p,role:"listbox",id:a,ref:f},theirProps:u,slot:v,defaultTag:"ul",features:o_,visible:d,name:"Combobox.Options"})})),u_=nu((function(e,t){var n,r,i=yu(),a=e.id,o=void 0===a?"headlessui-combobox-option-".concat(i):a,s=e.disabled,u=void 0!==s&&s,c=e.value,f=Ws(e,Bw),h=Zw("Combobox.Option"),d=Xw("Combobox.Option"),p=null!==h.activeOptionIndex&&h.options[h.activeOptionIndex].id===o,v=h.isSelected(c),m=(0,l.useRef)(null),y=su({disabled:u,value:c,domRef:m,textValue:null==(r=null==(n=m.current)?void 0:n.textContent)?void 0:r.toLowerCase()}),g=fu(t,m),b=uu((function(){return d.selectOption(o)}));ou((function(){return d.registerOption(o,y)}),[y,o]);var k=(0,l.useRef)(!h.__demoMode);ou((function(){if(h.__demoMode){var e=wu();return e.requestAnimationFrame((function(){k.current=!0})),e.dispose}}),[]),ou((function(){if(0===h.comboboxState&&p&&k.current&&0!==h.activationTrigger){var e=wu();return e.requestAnimationFrame((function(){var e,t;null==(t=null==(e=m.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}}),[m,p,h.comboboxState,h.activationTrigger,h.activeOptionIndex]);var w=uu((function(e){if(u)return e.preventDefault();b(),0===h.mode&&d.closeCombobox()})),_=uu((function(){if(u)return d.goToOption(Zl.Nothing);d.goToOption(Zl.Specific,o)})),x=rc(),E=uu((function(e){return x.update(e)})),C=uu((function(e){!x.wasMoved(e)||u||p||d.goToOption(Zl.Specific,o,0)})),S=uu((function(e){!x.wasMoved(e)||u||!p||h.optionsPropsRef.current.hold||d.goToOption(Zl.Nothing)})),T=(0,l.useMemo)((function(){return{active:p,selected:v,disabled:u}}),[p,v,u]);return Js({ourProps:{id:o,ref:g,role:"option",tabIndex:!0===u?void 0:-1,"aria-disabled":!0===u||void 0,"aria-selected":v,disabled:void 0,onClick:w,onFocus:_,onPointerEnter:E,onMouseEnter:E,onPointerMove:C,onMouseMove:C,onPointerLeave:S,onMouseLeave:S},theirProps:f,slot:T,defaultTag:"li",name:"Combobox.Option"})})),l_=Object.assign(n_,{Input:r_,Button:i_,Label:a_,Options:s_,Option:u_}),c_=function(e){var t=e.category,n=e.notifyParent,r=e.categories,i=u((0,l.useState)(""),2),a=i[0],o=i[1];(0,l.useEffect)((function(){void 0!==r&&void 0===t&&n("update",r[0]),console.log(r)}),[r,t]);var s=""===a?r:r.filter((function(e){return e.toLowerCase().replace(/\s+/g,"").includes(a.toLowerCase().replace(/\s+/g,""))})),c=function(e){n("update",e)};return(0,Ps.jsx)("div",{className:"pl-4 w-72",children:(0,Ps.jsx)(l_,{value:t,onChange:c,children:(0,Ps.jsxs)("div",{className:"relative mt-1",children:[(0,Ps.jsxs)("div",{className:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-navy-300 sm:text-sm",children:[(0,Ps.jsx)(l_.Input,{className:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",onChange:function(e){return o(e.target.value)},displayValue:function(e){return Lf(void 0!==e?e:"")}}),(0,Ps.jsx)(l_.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,Ps.jsx)(hg,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,Ps.jsx)(zl,{as:l.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:function(){return o("")},children:(0,Ps.jsx)(l_.Options,{className:"absolute mt-1 max-h-20 w-full overflow-auto overflow-y-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:0===s.length&&""!==a?(0,Ps.jsx)("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700",children:(0,Ps.jsxs)(l_.Option,{value:a,onClick:function(){return c(a)},children:['Create "',a,'"']})}):s.map((function(e){return(0,Ps.jsx)(l_.Option,{className:function(e){var t=e.active;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-navy-300 text-white":"text-gray-900")},value:e,children:function(t){var n=t.selected,r=t.active;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)("span",{className:"block truncate ".concat(n?"font-medium":"font-normal"),children:Lf(e)}),n?(0,Ps.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 ".concat(r?"text-white":"text-navy-300"),children:(0,Ps.jsx)(pg,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e)}))})})]})})})},f_=function(e){var t=e.category,n=e.isOpen,r=e.setIsOpen,i=e.setCategory,a=e.categories,o=e.setCategories,s=u((0,l.useState)(),2),c=s[0],f=s[1],h=u((0,l.useState)([]),2),d=h[0],p=h[1];function v(){f(t),p(a),r(!1)}(0,l.useEffect)((function(){f(t)}),[t]),(0,l.useEffect)((function(){p(a)}),[a]);return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)(zl,{appear:!0,show:n,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:v,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsx)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,Ps.jsxs)("div",{className:"flex",children:[(0,Ps.jsx)(Mw,{className:"mr-2 h-6 w-6 text-navy-400","aria-hidden":"true"}),"Category"]})}),(0,Ps.jsx)("div",{className:"mt-6 mb-20",children:(0,Ps.jsx)(c_,{category:c,notifyParent:function(e,t){if("update"===e)void 0!==t&&function(e){if(f(e),!d.includes(e)){var t=d;t.push(e),p(t)}}(t)},categories:a})}),(0,Ps.jsxs)("div",{className:"mt-8",children:[(0,Ps.jsx)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){i(c),o(d),r(!1)},children:"Save"}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:v,children:"Cancel"})]})]})})})})]})})})},h_=function(e){var t=e.category,n=e.setCategory,r=e.categories,i=e.setCategories,a=u((0,l.useState)(!1),2),o=a[0],s=a[1];return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(f_,{category:t,isOpen:o,setIsOpen:s,setCategory:n,categories:r,setCategories:i}),(0,Ps.jsx)(Yg,{as:"div",className:"mt-2",children:function(e){var r=e.open;return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsxs)(Yg.Button,{className:"flex w-full justify-between rounded-lg ring ring-inset ring-navy-200 px-4 py-2 text-left font-medium text-navy-200 hover:ring-navy-300 hover:text-navy-300 focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsxs)("div",{className:"flex items-center",children:[(0,Ps.jsx)(Mw,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("span",{children:"Category"})]}),(0,Ps.jsx)(Zg,{className:"".concat(r?"rotate-180 transform":""," h-5 w-5  text-navy-200 hover:text-navy-300")})]}),(0,Ps.jsx)(Yg.Panel,{className:"px-4 pt-4 pb-2",children:(0,Ps.jsxs)("div",{className:"flex justify-between",children:[void 0!==t&&(0,Ps.jsx)("div",{className:"w-2/3 text-left",children:(0,Ps.jsx)("p",{children:Lf(t)})}),(0,Ps.jsx)("div",{className:"flex-none",children:(0,Ps.jsx)(db,{setOpen:s,addCondition:void 0===t})}),void 0!==t&&(0,Ps.jsx)("button",{type:"button",className:"flex flex-none my-2 mx-2 items-center px-4 py-2 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-200",onClick:function(){return n(void 0)},children:(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(Pg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Delete"]})})]})})]})}})]})},d_=function(e,t){var n=new Map(e);return""!==t?n.set("title",""):n.set("title","Error: title cannot be empty"),n},p_=function(e,t){var n=new Map(e);return 0!==t.length?n.set("ingredients",""):n.set("ingredients","Error: ingredients cannot be empty"),n},v_=function(e,t){var n=new Map(e);return 0!==t.length?n.set("preparation",""):n.set("preparation","Error: preparation cannot be empty"),n},m_=function(e,t){var n=new Map(e);return t!==gg?n.set("yield",""):n.set("yield","Error: yield cannot be empty"),n},y_=function(e,t){var n=new Map(e);return t!==yg?n.set("preparationTime",""):n.set("preparationTime","Error: preparation time cannot be empty"),n},g_=function(e){var t=e.recipe,n=e.isOpen,r=e.setIsOpen,i=Go();function a(){r(!1)}return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)(zl,{appear:!0,show:n,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:a,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsx)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,Ps.jsxs)("div",{className:"flex",children:[(0,Ps.jsx)(Pg,{className:"mr-2 h-6 w-6 text-red-500","aria-hidden":"true"}),"Delete Recipe"]})}),(0,Ps.jsx)("div",{className:"mt-6",children:"Are you sure you want to delete this recipe ? Once deleted, this action cannot be undone."}),(0,Ps.jsxs)("div",{className:"mt-8",children:[(0,Ps.jsx)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){!function(e){var t=void 0===e.category?"".concat(e.type,"/").concat(e.id):"".concat(e.type,"/").concat(e.category,"/").concat(e.id);sy(ay(yy,t)),sy(oy(gy,t))}(t),r(!1),i(Ms)},children:"Delete"}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:a,children:"Cancel"})]})]})})})})]})})})},b_=["title","titleId"];var k_=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,b_);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))})),w_=function(e){var t=e.setProceedWithUpload,n=e.isOpen,r=e.setIsOpen;function i(){t(!1),r(!1)}return(0,Ps.jsx)(Ps.Fragment,{children:(0,Ps.jsx)(zl,{appear:!0,show:n,as:l.Fragment,children:(0,Ps.jsxs)(_f,{as:"div",className:"relative z-10",onClose:i,children:[(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Ps.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,Ps.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,Ps.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,Ps.jsx)(zl.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,Ps.jsxs)(_f.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,Ps.jsx)(_f.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(0,Ps.jsxs)("div",{className:"flex",children:[(0,Ps.jsx)(k_,{className:"mr-2 h-6 w-6 text-orange-500","aria-hidden":"true"}),"Overwrite Recipe"]})}),(0,Ps.jsx)("div",{className:"mt-6",children:"Are you sure you want to overwrite this recipe ? Once overwritten, this action cannot be undone."}),(0,Ps.jsxs)("div",{className:"mt-8",children:[(0,Ps.jsx)("button",{type:"button",className:"mr-4 inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:function(){r(!1),t(!0)},children:"Overwrite"}),(0,Ps.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:i,children:"Cancel"})]})]})})})})]})})})},__=function(){var e=Qo(),t=e.type,n=e.category,r=e.recipeID,i=void 0!==t&&void 0!==r,a=u((0,l.useState)(kg),2),o=a[0],s=a[1],c=u((0,l.useState)(),2),f=c[0],h=c[1],d=u((0,l.useState)(null),2),p=d[0],v=d[1],m=u((0,l.useState)([]),2),y=m[0],g=m[1],b=u((0,l.useState)(!0),2),k=b[0],w=b[1],_=u((0,l.useState)(""),2),E=_[0],S=_[1],T=u((0,l.useState)(!1),2),I=T[0],N=T[1],R=u((0,l.useState)(new Map(function(){var e=new Map;return e.set("title","Error: title cannot be empty"),e.set("ingredients","Error: ingredients cannot be empty"),e.set("preparation","Error: preparation cannot be empty"),e.set("yield","Error: yield cannot be empty"),e.set("preparationTime","Error: preparation time cannot be empty"),e}())),2),P=R[0],O=R[1],A=u((0,l.useState)("recipeForm"),2),L=A[0],j=A[1],D=u((0,l.useState)(!1),2),M=D[0],F=D[1],U=u((0,l.useState)(!1),2),V=U[0],q=U[1],z=u((0,l.useState)(!1),2),B=z[0],H=z[1],W=(0,l.useContext)(fL),K=(0,l.useContext)(hL),G=Go();(0,l.useEffect)((function(){i?wy(r,t,s,w,S,n):s(kg)}),[i]),(0,l.useEffect)((function(){O(function(e,t){var n=new Map(e);return n=d_(n,t.title),n=p_(n,t.ingredients),n=v_(n,t.preparation),n=m_(n,t.yield),y_(n,t.preparationTime)}(P,o))}),[o]),(0,l.useEffect)((function(){ky(o.type,g,w,S)}),[o.type]),(0,l.useEffect)((function(){if(void 0!==o.category&&!y.includes(o.category)){var e=y;e.push(o.category),g(e)}}),[o.category,y]),(0,l.useEffect)((function(){""!==E&&(null===K||void 0===K||K.addMessage(E,ks.Error))}),[E]);var Q=function(){var e=jf(o),t="data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify(e))),n=document.createElement("a");n.href=t,n.download=e.id+".json",n.click()},Y=function(e){var t=e.target.files[0];console.log(t.name),fetch(URL.createObjectURL(t)).then((function(e){return e.json()})).then((function(e){console.log(e);var t={id:e.id,title:e.title,ingredients:e.ingredients,preparation:e.preparation,yield:e.yield,preparationTime:e.preparationTime,type:e.type,imgURL:e.imgURL};void 0!==e.ovenTemperature&&(t.ovenTemperature=e.ovenTemperature),void 0!==e.quote&&(t.quote=e.quote),void 0!==e.source&&(t.source=e.source),void 0!==e.category&&(t.category=e.category),s(t)})).catch((function(e){return console.log(console.error(e))}))},$=function(){var e=C(x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),o!==kg&&""!==o.id){e.next=4;break}return null===K||void 0===K||K.addMessage("Error: cannot upload empty recipe",ks.Error),e.abrupt("return");case 4:if(r=P,0===Array.from(r.values()).filter((function(e){return""!==e})).length){e.next=7;break}return null===K||void 0===K||K.addMessage("Error: some fields were not correctly completed",ks.Error),e.abrupt("return");case 7:return e.next=9,Pw(o);case 9:return t=e.sent,e.next=12,Ey(o);case 12:n=e.sent,i||!n&&!t?H(!0):q(!0),N(!1);case 15:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){B&&(v(!0),i&&null===f||function(e,t,n,r,i){e||null===i||void 0===i||i.addMessage("Please choose a file first",ks.Warning);var a=Ew(Tw(Rw,"".concat(t.type,"/").concat(t.id)),e);a.on("state_changed",(function(){}),(function(e){return console.log(e)}),C(x().mark((function e(){var i,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sw(a.snapshot.ref);case 2:i=e.sent,console.log(i),o=Ve(Ve({},t),{},{imgURL:i}),n(o),r(!1);case 7:case"end":return e.stop()}}),e)}))))}(f,o,s,v,K))}),[B]),(0,l.useEffect)((function(){!1===p&&(i?(!function(e,t,n,r){_y(e);var i=void 0===e.category?"".concat(e.type,"/").concat(e.id):"".concat(e.type,"/").concat(e.category,"/").concat(e.id),a=void 0===r?"".concat(t,"/").concat(n):"".concat(t,"/").concat(r,"/").concat(n);i!==a&&(sy(ay(yy,a)),sy(oy(gy,a)))}(o,t,r,n),null===K||void 0===K||K.addMessage("Recipe successfully updated",ks.Info)):(_y(o),null===K||void 0===K||K.addMessage("Recipe successfully created",ks.Info)),G(Us(o.type,o.id,o.category)))}),[p]);var X=function(e){var t=Ve(Ve({},o),{},{id:Af(e.target.value),title:e.target.value});s(t),O(d_(P,e.target.value))},J=function(e){var t=Ve(Ve({},o),{},{type:e});s(t)},Z=function(e){var t=Ve(Ve({},o),{},{ingredients:e});s(t),O(p_(P,e))},ee=function(e){var t=Ve(Ve({},o),{},{preparation:e});s(t),O(v_(P,e))},te=function(e){var t=Ve(Ve({},o),{},{yield:e});s(t),O(m_(P,e))},ne=function(e){var t=Ve(Ve({},o),{},{preparationTime:e});s(t),O(y_(P,e))},re=function(e){var t=Ve(Ve({},o),{},{category:void 0!==e?Af(e):void 0});s(t)},ie=function(e){var t=Ve(Ve({},o),{},{ovenTemperature:e});s(t)},ae=function(e){var t=Ve(Ve({},o),{},{quote:e});s(t)},oe=function(e){var t=Ve(Ve({},o),{},{source:e});s(t)},se=function(){return(0,Ps.jsxs)("div",{className:"md:max-w-lg mx-4 md:mx-0 mt-10",children:[(0,Ps.jsx)("div",{className:"w-full pb-4",children:(0,Ps.jsxs)("div",{className:"flex w-full items-center px-4 py-2 rounded-lg bg-navy-200 text-left font-medium text-white focus:outline-none focus-visible:ring focus-visible:ring-navy-500 focus-visible:ring-opacity-75",children:[(0,Ps.jsx)(_g,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),(0,Ps.jsx)("p",{className:"text-left",children:"Recipe Title"})]})}),(0,Ps.jsxs)("div",{className:"flex flex-col md:flex-row text-left justify-between px-4 pt-4 pb-2",children:[(0,Ps.jsx)("input",{type:"text",className:"w-60 px-1 mb-2 md:mb-0 border rounded-md text-md",value:o.title,onChange:X,placeholder:"Recipe title"}),(0,Ps.jsx)("div",{className:"md:px-2 text-left w-32 md:w-40 text-sm md:text-md",children:(0,Ps.jsx)(vg,{choices:mg,selected:o.type,handleSelected:J})})]}),I&&""!==P.get("title")&&(0,Ps.jsx)("p",{className:"text-red-500 text-sm pt-1",children:P.get("title")}),(0,Ps.jsxs)("div",{className:"mx-auto w-full pt-6 rounded-2xl bg-white",children:[(0,Ps.jsxs)("div",{className:"mb-4",children:[(0,Ps.jsx)(pb,{ingredients:o.ingredients,setIngredients:Z}),I&&""!==P.get("ingredients")&&(0,Ps.jsx)("p",{className:"text-red-500 text-sm pt-1",children:P.get("ingredients")})]}),(0,Ps.jsxs)("div",{className:"mb-4",children:[(0,Ps.jsx)(Ob,{preparation:o.preparation,setPreparation:ee}),I&&""!==P.get("preparation")&&(0,Ps.jsx)("p",{className:"text-red-500 text-sm pt-1",children:P.get("preparation")})]}),(0,Ps.jsxs)("div",{className:"mb-4",children:[(0,Ps.jsx)(Db,{recipeYield:o.yield,setRecipeYield:te,emptyYield:gg}),I&&""!==P.get("yield")&&(0,Ps.jsx)("p",{className:"text-red-500 text-sm pt-1",children:P.get("yield")})]}),(0,Ps.jsxs)("div",{className:"mb-4",children:[(0,Ps.jsx)(Ab,{preparationTime:o.preparationTime,setPreparationTime:ne,emptyTime:yg}),I&&""!==P.get("preparationTime")&&(0,Ps.jsx)("p",{className:"text-red-500 text-sm pt-1",children:P.get("preparationTime")})]}),(0,Ps.jsx)("div",{className:"mb-4",children:(0,Ps.jsx)(h_,{category:o.category,setCategory:re,categories:y,setCategories:g})}),(0,Ps.jsx)("div",{className:"mb-4",children:(0,Ps.jsx)(Pb,{ovenTemperature:o.ovenTemperature,setOvenTemperature:ie})}),(0,Ps.jsx)("div",{className:"mb-4",children:(0,Ps.jsx)(Lb,{quote:o.quote,setQuote:ae,emptyQuote:bg})}),(0,Ps.jsx)("div",{className:"mb-4",children:(0,Ps.jsx)(jb,{source:o.source,setSource:oe,emptySource:bg})}),(0,Ps.jsx)("div",{className:"mb-4",children:(0,Ps.jsx)(Ub,{setImage:h})})]}),(0,Ps.jsxs)("div",{className:"flex my-8",children:["admin"===W.role&&(0,Ps.jsxs)("button",{type:"button",className:"".concat(p&&"text-amber-400"," flex my-2 mr-4 items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-amber-400"),onClick:$,children:[!p&&(0,Ps.jsx)(Eg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),p&&(0,Ps.jsx)(xf,{}),void 0===r&&"Upload Recipe",void 0!==r&&"Save Recipe"]}),(0,Ps.jsxs)("button",{type:"button",className:"flex my-2 mr-4 items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-400",onClick:Q,children:[(0,Ps.jsx)(Sg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Export Recipe"]}),!i&&(0,Ps.jsxs)("label",{className:"flex my-2 items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-navy-400",children:[(0,Ps.jsx)(Ig,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Import Recipe",(0,Ps.jsx)("input",{type:"file",name:"myJSON",className:"hidden",onChange:Y})]}),i&&(0,Ps.jsxs)("button",{type:"button",className:"flex my-2 mr-4 items-center px-4 py-3 border border-transparent shadow-md rounded-md text-sm font-medium hover:text-red-500",onClick:function(){return F(!0)},children:[(0,Ps.jsx)(Pg,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Delete Recipe"]})]})]})},ue=function(){return(0,Ps.jsx)("div",{className:"lg:ml-14 md:max-w-md lg:max-w-xs",children:(0,Ps.jsx)(Ry,{recipe:o,preview:!0,imgPreviewURL:void 0!==f?URL.createObjectURL(f):""!==o.imgURL?o.imgURL:window.location.origin+"/"+o.type+"/images/preview.jpg"})})};return(0,Ps.jsxs)(Ps.Fragment,{children:[(0,Ps.jsx)(g_,{recipe:o,isOpen:M,setIsOpen:F}),(0,Ps.jsx)(w_,{setProceedWithUpload:H,isOpen:V,setIsOpen:q}),k?(0,Ps.jsx)(Tc,{}):(0,Ps.jsxs)("div",{className:"max-w-[75rem] lg:w-[60rem]",children:[i&&(0,Ps.jsx)("h1",{className:"w-full text-4xl sm:text-5xl break-words py-8",children:i?"Edit Recipe":"New Recipe"}),(0,Ps.jsxs)("div",{className:"hidden lg:grid grid-cols-2 gap-2",children:[se(),ue()]}),(0,Ps.jsxs)("div",{className:"flex flex-col lg:hidden",children:[(0,Ps.jsx)(Lw,{currentTab:L,setCurrentTab:j}),function(){switch(L){case"recipeForm":return se();case"previewForm":return ue()}}()]})]})]})},x_=function(){var e=Qo(),t=e.type,n=e.category,r=u((0,l.useState)(""),2),i=r[0],a=r[1],o=u((0,l.useState)([]),2),s=o[0],c=o[1],f=u((0,l.useState)(!0),2),h=f[0],d=f[1],p=u((0,l.useState)(""),2),v=p[0],m=p[1],y=(0,l.useContext)(hL);return(0,l.useEffect)((function(){void 0!==t&&void 0!==n&&(by(t,c,d,m,n),a(Lf(n)))}),[n]),(0,l.useEffect)((function(){""!==v&&(null===y||void 0===y||y.addMessage(v,ks.Error))}),[v]),(0,Ps.jsx)(Ff,{title:i,metadata:s,category:n,loading:h})},E_=["title","titleId"];var C_=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,E_);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))})),S_=["title","titleId"];var T_=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,S_);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))})),I_=["title","titleId"];var N_=l.forwardRef((function(e,t){var n=e.title,r=e.titleId,i=Ws(e,I_);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":r},i),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))})),R_=function(){var e=(0,l.useContext)(hL);return(0,Ps.jsx)("div",{children:(0,Ps.jsx)("div",{className:"absolute z-10 mt-2 md:mt-10 w-full md:w-80 md:-right-0",children:void 0!==e&&e.getMessages().map((function(t,n){return(0,Ps.jsxs)("div",{className:"relative",children:[(0,Ps.jsx)("div",{className:"absolute animate-progress mx-2 rounded-md top-0 h-[5px] left-0 right-[100%] bg-slate-200 opacity-30"}),(0,Ps.jsxs)("div",{className:"flex mx-2 mb-2 rounded-md items-center text-white text-sm font-bold px-4 py-3 ".concat(t.getLevel()===ks.Info&&"bg-emerald-600"," ").concat(t.getLevel()===ks.Warning&&"bg-orange-500"," ").concat(t.getLevel()===ks.Error&&"bg-red-500"),role:"alert",children:[t.getLevel()===ks.Info&&(0,Ps.jsx)(C_,{className:"-ml-1 mr-2 h-6 w-6","aria-hidden":"true"}),t.getLevel()===ks.Warning&&(0,Ps.jsx)(k_,{className:"-ml-1 mr-2 h-6 w-6","aria-hidden":"true"}),t.getLevel()===ks.Error&&(0,Ps.jsx)(T_,{className:"-ml-1 mr-2 h-6 w-w-806","aria-hidden":"true"}),(0,Ps.jsx)("p",{children:t.getText()}),(0,Ps.jsx)("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 rounded-lg p-1.5 inline-flex h-8 w-8 \n                ".concat(t.getLevel()===ks.Info&&" hover:bg-emerald-600"," \n                ").concat(t.getLevel()===ks.Warning&&" hover:bg-orange-600"," \n                ").concat(t.getLevel()===ks.Error&&"hover:bg-red-600"),onClick:function(){return e.hideMessage(t.id)},"aria-label":"Close",children:(0,Ps.jsx)(N_,{})})]})]},n.toString())}))})})};var P_,O_=function(){var e=(0,l.useContext)(fL),t=function(t){var n=t.children,r=Ko();return e.isLogged&&"admin"===e.role?n:(0,Ps.jsx)(as,{to:Fs,state:{from:r},replace:!0})};return(0,Ps.jsx)(l.Suspense,{fallback:"...loading app",children:(0,Ps.jsx)(vs,{children:(0,Ps.jsxs)("div",{className:"App flex flex-col h-screen justify-between",children:[(0,Ps.jsx)("div",{className:"app-nav",children:(0,Ps.jsx)(Pf,{})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)(R_,{})}),(0,Ps.jsx)("div",{"data-testid":"content",className:"app-page mb-auto flex flex-row justify-center items-center w-full",children:(0,Ps.jsxs)(us,{children:[(0,Ps.jsx)(os,{path:Bs,element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(__,{})})}),(0,Ps.jsx)(os,{path:Ms,element:(0,Ps.jsx)(Ds,{})}),(0,Ps.jsx)(os,{path:"/register",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Os,{})})}),(0,Ps.jsx)(os,{path:"/password_reset",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(As,{})})}),(0,Ps.jsx)(os,{path:Vs,element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Cy,{})})}),(0,Ps.jsx)(os,{path:qs,element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Ly,{})})}),(0,Ps.jsx)(os,{path:zs,element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Ay,{})})}),(0,Ps.jsx)(os,{path:"/:type/:recipeID",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Py,{})})}),(0,Ps.jsx)(os,{path:"/:type/category/:category",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(x_,{})})}),(0,Ps.jsx)(os,{path:"/:type/category/:category/:recipeID",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(Py,{})})}),(0,Ps.jsx)(os,{path:"/edit/:type/category/:category/:recipeID",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(__,{})})}),(0,Ps.jsx)(os,{path:"/edit/:type/:recipeID",element:(0,Ps.jsx)(t,{children:(0,Ps.jsx)(__,{})})}),(0,Ps.jsx)(os,{path:"*",element:(0,Ps.jsx)(Oy,{statusCode:404,description:"The page you are looking for does not exist.",title:"Page not found"})}),(0,Ps.jsx)(os,{path:Fs,element:(0,Ps.jsx)(Oy,{statusCode:403,title:"Forbidden page",description:"You are not authorized to access this page."})})]})}),(0,Ps.jsx)("div",{children:(0,Ps.jsx)(Of,{})})]})})})},A_=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},L_="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},j_={},D_=D_||{},M_=L_||self;function F_(){}function U_(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function V_(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var q_="closure_uid_"+(1e9*Math.random()>>>0),z_=0;function B_(e,t,n){return e.call.apply(e.bind,arguments)}function H_(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function W_(e,t,n){return(W_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?B_:H_).apply(null,arguments)}function K_(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function G_(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Q_(){this.s=this.s,this.o=this.o}Q_.prototype.s=!1,Q_.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,q_)&&e[q_]||(e[q_]=++z_)}(this)},Q_.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Y_=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function $_(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function X_(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(U_(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function J_(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}J_.prototype.h=function(){this.defaultPrevented=!0};var Z_=function(){if(!M_.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{M_.addEventListener("test",F_,t),M_.removeEventListener("test",F_,t)}catch(n){}return e}();function ex(e){return/^[\s\xa0]*$/.test(e)}var tx=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function nx(e,t){return e<t?-1:e>t?1:0}function rx(){var e=M_.navigator;return e&&(e=e.userAgent)?e:""}function ix(e){return-1!=rx().indexOf(e)}function ax(e){return ax[" "](e),e}ax[" "]=F_;var ox,sx=ix("Opera"),ux=ix("Trident")||ix("MSIE"),lx=ix("Edge"),cx=lx||ux,fx=ix("Gecko")&&!(-1!=rx().toLowerCase().indexOf("webkit")&&!ix("Edge"))&&!(ix("Trident")||ix("MSIE"))&&!ix("Edge"),hx=-1!=rx().toLowerCase().indexOf("webkit")&&!ix("Edge");function dx(){var e=M_.document;return e?e.documentMode:void 0}e:{var px="",vx=function(){var e=rx();return fx?/rv:([^\);]+)(\)|;)/.exec(e):lx?/Edge\/([\d\.]+)/.exec(e):ux?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):hx?/WebKit\/(\S+)/.exec(e):sx?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(vx&&(px=vx?vx[1]:""),ux){var mx=dx();if(null!=mx&&mx>parseFloat(px)){ox=String(mx);break e}}ox=px}var yx,gx={};function bx(){return function(e){var t=gx;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=tx(String(ox)).split("."),n=tx("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=nx(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||nx(0==a[2].length,0==o[2].length)||nx(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(M_.document&&ux){var kx=dx();yx=kx||(parseInt(ox,10)||void 0)}else yx=void 0;var wx=yx;function _x(e,t){if(J_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(fx){e:{try{ax(t.nodeName);var i=!0;break e}catch(Eu){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:xx[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_x.X.h.call(this)}}G_(_x,J_);var xx={2:"touch",3:"pen",4:"mouse"};_x.prototype.h=function(){_x.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ex="closure_listenable_"+(1e6*Math.random()|0),Cx=0;function Sx(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Cx,this.ba=this.ea=!1}function Tx(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Ix(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Nx(e){var t={};for(var n in e)t[n]=e[n];return t}var Rx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Px(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Rx.length;a++)n=Rx[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ox(e){this.src=e,this.g={},this.h=0}function Ax(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Y_(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Tx(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Lx(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Ox.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Lx(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Sx(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var jx="closure_lm_"+(1e6*Math.random()|0),Dx={};function Mx(e,t,n,r,i){if(r&&r.once)return Ux(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Mx(e,t[a],n,r,i);return null}return n=Kx(n),e&&e[Ex]?e.N(t,n,V_(r)?!!r.capture:!!r,i):Fx(e,t,n,!1,r,i)}function Fx(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=V_(i)?!!i.capture:!!i,s=Hx(e);if(s||(e[jx]=s=new Ox(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Bx;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Z_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(zx(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ux(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ux(e,t[a],n,r,i);return null}return n=Kx(n),e&&e[Ex]?e.O(t,n,V_(r)?!!r.capture:!!r,i):Fx(e,t,n,!0,r,i)}function Vx(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Vx(e,t[a],n,r,i);else r=V_(r)?!!r.capture:!!r,n=Kx(n),e&&e[Ex]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Lx(a=e.g[t],n,r,i))&&(Tx(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Hx(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Lx(t,n,r,i)),(n=-1<e?t[e]:null)&&qx(n))}function qx(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ex])Ax(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zx(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hx(t))?(Ax(n,e),0==n.h&&(n.src=null,t[jx]=null)):Tx(e)}}}function zx(e){return e in Dx?Dx[e]:Dx[e]="on"+e}function Bx(e,t){if(e.ba)e=!0;else{t=new _x(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&qx(e),e=n.call(r,t)}return e}function Hx(e){return(e=e[jx])instanceof Ox?e:null}var Wx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kx(e){return"function"===typeof e?e:(e[Wx]||(e[Wx]=function(t){return e.handleEvent(t)}),e[Wx])}function Gx(){Q_.call(this),this.i=new Ox(this),this.P=this,this.I=null}function Qx(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new J_(t,e);else if(t instanceof J_)t.target=t.target||e;else{var i=t;Px(t=new J_(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Yx(o,r,!0,t)&&i}if(i=Yx(o=t.g=e,r,!0,t)&&i,i=Yx(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Yx(o=t.g=n[a],r,!1,t)&&i}function Yx(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Ax(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}G_(Gx,Q_),Gx.prototype[Ex]=!0,Gx.prototype.removeEventListener=function(e,t,n,r){Vx(this,e,t,n,r)},Gx.prototype.M=function(){if(Gx.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Tx(n[r]);delete t.g[e],t.h--}}this.I=null},Gx.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Gx.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var $x=M_.JSON.stringify;function Xx(){var e=aE,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Jx,Zx=function(){function e(){S(this,e),this.h=this.g=null}return N(e,[{key:"add",value:function(e,t){var n=eE.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),eE=new(function(){function e(t,n){S(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return N(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new tE}),(function(e){return e.reset()})),tE=function(){function e(){S(this,e),this.next=this.g=this.h=null}return N(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function nE(e){M_.setTimeout((function(){throw e}),0)}function rE(e,t){Jx||function(){var e=M_.Promise.resolve(void 0);Jx=function(){e.then(oE)}}(),iE||(Jx(),iE=!0),aE.add(e,t)}var iE=!1,aE=new Zx;function oE(){for(var e;e=Xx();){try{e.h.call(e.g)}catch(n){nE(n)}var t=eE;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}iE=!1}function sE(e,t){Gx.call(this),this.h=e||1,this.g=t||M_,this.j=W_(this.lb,this),this.l=Date.now()}function uE(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function lE(e,t,n){if("function"===typeof e)n&&(e=W_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=W_(e.handleEvent,e)}return 2147483647<Number(t)?-1:M_.setTimeout(e,t||0)}function cE(e){e.g=lE((function(){e.g=null,e.i&&(e.i=!1,cE(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}G_(sE,Gx),(P_=sE.prototype).ca=!1,P_.R=null,P_.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Qx(this,"tick"),this.ca&&(uE(this),this.start()))}},P_.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P_.M=function(){sE.X.M.call(this),uE(this),delete this.g};var fE=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return N(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:cE(this)}},{key:"M",value:function(){p(h(n.prototype),"M",this).call(this),this.g&&(M_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Q_);function hE(e){Q_.call(this),this.h=e,this.g={}}G_(hE,Q_);var dE=[];function pE(e,t,n,r){Array.isArray(n)||(n&&(dE[0]=n.toString()),n=dE);for(var i=0;i<n.length;i++){var a=Mx(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function vE(e){Ix(e.g,(function(e,t){this.g.hasOwnProperty(t)&&qx(e)}),e),e.g={}}function mE(){this.g=!0}function yE(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return $x(n)}catch(xu){return t}}(e,n)+(r?" "+r:"")}))}hE.prototype.M=function(){hE.X.M.call(this),vE(this)},hE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mE.prototype.Aa=function(){this.g=!1},mE.prototype.info=function(){};var gE={},bE=null;function kE(){return bE=bE||new Gx}function wE(e){J_.call(this,gE.Pa,e)}function _E(e){var t=kE();Qx(t,new wE(t))}function xE(e,t){J_.call(this,gE.STAT_EVENT,e),this.stat=t}function EE(e){var t=kE();Qx(t,new xE(t,e))}function CE(e,t){J_.call(this,gE.Qa,e),this.size=t}function SE(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return M_.setTimeout((function(){e()}),t)}gE.Pa="serverreachability",G_(wE,J_),gE.STAT_EVENT="statevent",G_(xE,J_),gE.Qa="timingevent",G_(CE,J_);var TE={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},IE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function NE(){}function RE(e){return e.h||(e.h=e.i())}function PE(){}NE.prototype.h=null;var OE,AE={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function LE(){J_.call(this,"d")}function jE(){J_.call(this,"c")}function DE(){}function ME(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new hE(this),this.O=UE,e=cx?125:void 0,this.T=new sE(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new FE}function FE(){this.i=null,this.g="",this.h=!1}G_(LE,J_),G_(jE,J_),G_(DE,NE),DE.prototype.g=function(){return new XMLHttpRequest},DE.prototype.i=function(){return{}},OE=new DE;var UE=45e3,VE={},qE={};function zE(e,t,n){e.K=1,e.v=sC(nC(t)),e.s=n,e.P=!0,BE(e,null)}function BE(e,t){e.F=Date.now(),GE(e),e.A=nC(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),kC(n.i,"t",r),e.C=0,n=e.l.H,e.h=new FE,e.g=kS(e.l,n?t:null,!e.s),0<e.N&&(e.L=new fE(W_(e.La,e,e.g),e.N)),pE(e.S,e.g,"readystatechange",e.ib),t=e.H?Nx(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),_E(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function HE(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function WE(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=KE(e,n))==qE){4==t&&(e.o=4,EE(14),i=!1),yE(e.j,e.m,null,"[Incomplete Response]");break}if(r==VE){e.o=4,EE(15),yE(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}yE(e.j,e.m,r,null),JE(e,r)}HE(e)&&r!=qE&&r!=VE&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,EE(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),hS(t),t.K=!0,EE(11))):(yE(e.j,e.m,n,"[Invalid Chunked Response]"),XE(e),$E(e))}function KE(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qE:(n=Number(t.substring(n,r)),isNaN(n)?VE:(r+=1)+n>t.length?qE:(t=t.substr(r,n),e.C=r+n,t))}function GE(e){e.V=Date.now()+e.O,QE(e,e.O)}function QE(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=SE(W_(e.gb,e),t)}function YE(e){e.B&&(M_.clearTimeout(e.B),e.B=null)}function $E(e){0==e.l.G||e.I||vS(e.l,e)}function XE(e){YE(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,uE(e.T),vE(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function JE(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||TC(n.h,e)))if(!e.J&&TC(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;pS(n),iS(n)}fS(n),EE(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=SE(W_(n.cb,n),6e3));if(1>=SC(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else yS(n,11)}else if((e.J||n.g==e)&&pS(n),!ex(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.h;f.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(IC(f,f.h),f.h=null))}if(r.D){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,oC(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=bS(r,r.H?r.ka:null,r.V),d.J){NC(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(YE(p),GE(p)),r.g=d}else cS(r);0<n.i.length&&oS(n)}else"stop"!=a[0]&&"close"!=a[0]||yS(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?yS(n,7):rS(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}_E()}catch(a){}}function ZE(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(U_(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(U_(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(U_(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(P_=ME.prototype).setTimeout=function(e){this.O=e},P_.ib=function(e){e=e.target;var t=this.L;t&&3==XC(e)?t.l():this.La(e)},P_.La=function(e){try{if(e==this.g)e:{var t=XC(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||cx||this.g&&(this.h.h||this.g.fa()||JC(this.g)))){this.I||4!=t||7==n||_E(),YE(this);var r=this.g.aa();this.Y=r;t:if(HE(this)){var i=JC(this.g);e="";var a=i.length,o=4==XC(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){XE(this),$E(this);var s="";break t}this.h.i=new M_.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ex(u)){var c=u;break t}}c=null}if(!(r=c)){this.i=!1,this.o=3,EE(12),XE(this),$E(this);break e}yE(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,JE(this,r)}this.P?(WE(this,t,s),cx&&this.i&&3==t&&(pE(this.S,this.T,"tick",this.hb),this.T.start())):(yE(this.j,this.m,s,null),JE(this,s)),4==t&&XE(this),this.i&&!this.I&&(4==t?vS(this.l,this):(this.i=!1,GE(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,EE(12)):(this.o=0,EE(13)),XE(this),$E(this)}}}catch(t){}},P_.hb=function(){if(this.g){var e=XC(this.g),t=this.g.fa();this.C<t.length&&(YE(this),WE(this,e,t),this.i&&4!=e&&GE(this))}},P_.cancel=function(){this.I=!0,XE(this)},P_.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(_E(),EE(17)),XE(this),this.o=2,$E(this)):QE(this,this.V-e)};var eC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof tC){this.h=void 0!==t?t:e.h,rC(this,e.j),this.s=e.s,this.g=e.g,iC(this,e.m),this.l=e.l,t=e.i;var n=new mC;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),aC(this,n),this.o=e.o}else e&&(n=String(e).match(eC))?(this.h=!!t,rC(this,n[1]||"",!0),this.s=uC(n[2]||""),this.g=uC(n[3]||"",!0),iC(this,n[4]),this.l=uC(n[5]||"",!0),aC(this,n[6]||"",!0),this.o=uC(n[7]||"")):(this.h=!!t,this.i=new mC(null,this.h))}function nC(e){return new tC(e)}function rC(e,t,n){e.j=n?uC(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function iC(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function aC(e,t,n){t instanceof mC?(e.i=t,function(e,t){t&&!e.j&&(yC(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(gC(this,t),kC(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=lC(t,pC)),e.i=new mC(t,e.h))}function oC(e,t,n){e.i.set(t,n)}function sC(e){return oC(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function uC(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lC(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,cC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cC(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tC.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lC(t,fC,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(lC(t,fC,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(lC(n,"/"==n.charAt(0)?dC:hC,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lC(n,vC)),e.join("")};var fC=/[#\/\?@]/g,hC=/[#\?:]/g,dC=/[#\?]/g,pC=/[#\?@]/g,vC=/#/g;function mC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yC(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function gC(e,t){yC(e),t=wC(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bC(e,t){return yC(e),t=wC(e,t),e.g.has(t)}function kC(e,t,n){gC(e,t),0<n.length&&(e.i=null,e.g.set(wC(e,t),$_(n)),e.h+=n.length)}function wC(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(P_=mC.prototype).add=function(e,t){yC(this),this.i=null,e=wC(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},P_.forEach=function(e,t){yC(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},P_.oa=function(){yC(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},P_.W=function(e){yC(this);var t=[];if("string"===typeof e)bC(this,e)&&(t=t.concat(this.g.get(wC(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},P_.set=function(e,t){return yC(this),this.i=null,bC(this,e=wC(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},P_.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},P_.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var _C=N((function e(t,n){S(this,e),this.h=t,this.g=n}));function xC(e){this.l=e||EC,M_.PerformanceNavigationTiming?e=0<(e=M_.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(M_.g&&M_.g.Ga&&M_.g.Ga()&&M_.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var EC=10;function CC(e){return!!e.h||!!e.g&&e.g.size>=e.j}function SC(e){return e.h?1:e.g?e.g.size:0}function TC(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function IC(e,t){e.g?e.g.add(t):e.h=t}function NC(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function RC(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=_(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return $_(e.i)}function PC(){}function OC(){this.g=new PC}function AC(e,t,n){var r=n||"";try{ZE(e,(function(e,n){var i=e;V_(e)&&(i=$x(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Vc){throw t.push(r+"type="+encodeURIComponent("_badmap")),Vc}}function LC(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Eu){}}function jC(e){this.l=e.ac||null,this.j=e.jb||!1}function DC(e,t){Gx.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=MC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xC.prototype.cancel=function(){if(this.i=RC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=_(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},PC.prototype.stringify=function(e){return M_.JSON.stringify(e,void 0)},PC.prototype.parse=function(e){return M_.JSON.parse(e,void 0)},G_(jC,NE),jC.prototype.g=function(){return new DC(this.l,this.j)},jC.prototype.i=function(e){return function(){return e}}({}),G_(DC,Gx);var MC=0;function FC(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function UC(e){e.readyState=4,e.l=null,e.j=null,e.A=null,VC(e)}function VC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(P_=DC.prototype).open=function(e,t){if(this.readyState!=MC)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,VC(this)},P_.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||M_).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},P_.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,UC(this)),this.readyState=MC},P_.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,VC(this)),this.g&&(this.readyState=3,VC(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof M_.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FC(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},P_.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?UC(this):VC(this),3==this.readyState&&FC(this)}},P_.Va=function(e){this.g&&(this.response=this.responseText=e,UC(this))},P_.Ua=function(e){this.g&&(this.response=e,UC(this))},P_.ga=function(){this.g&&UC(this)},P_.setRequestHeader=function(e,t){this.v.append(e,t)},P_.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},P_.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(DC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var qC=M_.JSON.parse;function zC(e){Gx.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=BC,this.K=this.L=!1}G_(zC,Gx);var BC="",HC=/^https?$/i,WC=["POST","PUT"];function KC(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,GC(e),YC(e)}function GC(e){e.D||(e.D=!0,Qx(e,"complete"),Qx(e,"error"))}function QC(e){if(e.h&&"undefined"!=typeof D_&&(!e.C[1]||4!=XC(e)||2!=e.aa()))if(e.v&&4==XC(e))lE(e.Ha,0,e);else if(Qx(e,"readystatechange"),4==XC(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(eC)[1]||null;if(!a&&M_.self&&M_.self.location){var o=M_.self.location.protocol;a=o.substr(0,o.length-1)}i=!HC.test(a?a.toLowerCase():"")}t=i}if(t)Qx(e,"complete"),Qx(e,"success");else{e.m=6;try{var s=2<XC(e)?e.g.statusText:""}catch(lu){s=""}e.j=s+" ["+e.aa()+"]",GC(e)}}finally{YC(e)}}}function YC(e,t){if(e.g){$C(e);var n=e.g,r=e.C[0]?F_:null;e.g=null,e.C=null,t||Qx(e,"ready");try{n.onreadystatechange=r}catch(Vc){}}}function $C(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(M_.clearTimeout(e.A),e.A=null)}function XC(e){return e.g?e.g.readyState:0}function JC(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case BC:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(DS){return null}}function ZC(e){var t="";return Ix(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function eS(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ZC(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):oC(e,t,n))}function tS(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function nS(e){this.Ca=0,this.i=[],this.j=new mE,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=tS("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=tS("baseRetryDelayMs",5e3,e),this.bb=tS("retryDelaySeedMs",1e4,e),this.$a=tS("forwardChannelMaxRetries",2,e),this.ta=tS("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new xC(e&&e.concurrentRequestLimit),this.Fa=new OC,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function rS(e){if(aS(e),3==e.G){var t=e.U++,n=nC(e.F);oC(n,"SID",e.I),oC(n,"RID",t),oC(n,"TYPE","terminate"),uS(e,n),(t=new ME(e,e.j,t,void 0)).K=2,t.v=sC(nC(n)),n=!1,M_.navigator&&M_.navigator.sendBeacon&&(n=M_.navigator.sendBeacon(t.v.toString(),"")),!n&&M_.Image&&((new Image).src=t.v,n=!0),n||(t.g=kS(t.l,null),t.g.da(t.v)),t.F=Date.now(),GE(t)}gS(e)}function iS(e){e.g&&(hS(e),e.g.cancel(),e.g=null)}function aS(e){iS(e),e.u&&(M_.clearTimeout(e.u),e.u=null),pS(e),e.h.cancel(),e.m&&("number"===typeof e.m&&M_.clearTimeout(e.m),e.m=null)}function oS(e){CC(e.h)||e.m||(e.m=!0,rE(e.Ja,e),e.C=0)}function sS(e,t){var n;n=t?t.m:e.U++;var r=nC(e.F);oC(r,"SID",e.I),oC(r,"RID",n),oC(r,"AID",e.T),uS(e,r),e.o&&e.s&&eS(r,e.o,e.s),n=new ME(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=lS(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),IC(e.h,n),zE(n,r,t)}function uS(e,t){e.ia&&Ix(e.ia,(function(e,n){oC(t,n,e)})),e.l&&ZE({},(function(e,n){oC(t,n,e)}))}function lS(e,t,n){n=Math.min(e.i.length,n);var r=e.l?W_(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{AC(c,o,"req"+l+"_")}catch(ru){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function cS(e){e.g||e.u||(e.Z=1,rE(e.Ia,e),e.A=0)}function fS(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=SE(W_(e.Ia,e),mS(e,e.A)),e.A++,!0)}function hS(e){null!=e.B&&(M_.clearTimeout(e.B),e.B=null)}function dS(e){e.g=new ME(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=nC(e.sa);oC(t,"RID","rpc"),oC(t,"SID",e.I),oC(t,"CI",e.L?"0":"1"),oC(t,"AID",e.T),oC(t,"TYPE","xmlhttp"),uS(e,t),e.o&&e.s&&eS(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=sC(nC(t)),n.s=null,n.P=!0,BE(n,e)}function pS(e){null!=e.v&&(M_.clearTimeout(e.v),e.v=null)}function vS(e,t){var n=null;if(e.g==t){pS(e),hS(e),e.g=null;var r=2}else{if(!TC(e.h,t))return;n=t.D,NC(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Qx(r=kE(),new CE(r,n)),oS(e)}else cS(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(SC(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=SE(W_(e.Ja,e,t),mS(e,e.C)),e.C++,!0))}(e,t)||2==r&&fS(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:yS(e,5);break;case 4:yS(e,10);break;case 3:yS(e,6);break;default:yS(e,2)}}function mS(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function yS(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=W_(e.kb,e);n||(n=new tC("//www.google.com/images/cleardot.gif"),M_.location&&"http"==M_.location.protocol||rC(n,"https"),sC(n)),function(e,t){var n=new mE;if(M_.Image){var r=new Image;r.onload=K_(LC,n,r,"TestLoadImage: loaded",!0,t),r.onerror=K_(LC,n,r,"TestLoadImage: error",!1,t),r.onabort=K_(LC,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=K_(LC,n,r,"TestLoadImage: timeout",!1,t),M_.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else EE(2);e.G=0,e.l&&e.l.va(t),gS(e),aS(e)}function gS(e){if(e.G=0,e.la=[],e.l){var t=RC(e.h);0==t.length&&0==e.i.length||(X_(e.la,t),X_(e.la,e.i),e.h.i.length=0,$_(e.i),e.i.length=0),e.l.ua()}}function bS(e,t,n){var r=n instanceof tC?nC(n):new tC(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),iC(r,r.m);else{var i=M_.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new tC(null,void 0);r&&rC(a,r),t&&(a.g=t),i&&iC(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&oC(r,n,t),oC(r,"VER",e.ma),uS(e,r),r}function kS(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new zC(new jC({jb:!0})):new zC(e.ra)).Ka(e.H),t}function wS(){}function _S(){if(ux&&!(10<=Number(wx)))throw Error("Environmental error: no available transport.")}function xS(e,t){Gx.call(this),this.g=new nS(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!ex(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ex(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new SS(this)}function ES(e){LE.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function CS(){jE.call(this),this.status=1}function SS(e){this.g=e}(P_=zC.prototype).Ka=function(e){this.L=e},P_.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():OE.g(),this.C=this.u?RE(this.u):RE(OE),this.g.onreadystatechange=W_(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void KC(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=_(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=M_.FormData&&e instanceof M_.FormData,!(0<=Y_(WC,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,c=_(n);try{for(c.s();!(l=c.n()).done;){var f=u(l.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$C(this),0<this.B&&((this.K=function(e){return ux&&bx()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=W_(this.qa,this)):this.A=lE(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){KC(this,s)}},P_.qa=function(){"undefined"!=typeof D_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qx(this,"timeout"),this.abort(8))},P_.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qx(this,"complete"),Qx(this,"abort"),YC(this))},P_.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),YC(this,!0)),zC.X.M.call(this)},P_.Ha=function(){this.s||(this.F||this.v||this.l?QC(this):this.fb())},P_.fb=function(){QC(this)},P_.aa=function(){try{return 2<XC(this)?this.g.status:-1}catch(e){return-1}},P_.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},P_.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),qC(t)}},P_.Ea=function(){return this.m},P_.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(P_=nS.prototype).ma=8,P_.G=1,P_.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ME(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Px(n=Nx(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=lS(this,t,r),oC(i=nC(this.F),"RID",e),oC(i,"CVER",22),this.D&&oC(i,"X-HTTP-Session-Id",this.D),uS(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ZC(n)))+"&"+r:this.o&&eS(i,this.o,n)),IC(this.h,t),this.Ya&&oC(i,"TYPE","init"),this.O?(oC(i,"$req",r),oC(i,"SID","null"),t.Z=!0,zE(t,i,null)):zE(t,i,r),this.G=2}}else 3==this.G&&(e?sS(this,e):0==this.i.length||CC(this.h)||sS(this))},P_.Ia=function(){if(this.u=null,dS(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=SE(W_(this.eb,this),e)}},P_.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,EE(10),iS(this),dS(this))},P_.cb=function(){null!=this.v&&(this.v=null,iS(this),fS(this),EE(19))},P_.kb=function(e){e?(this.j.info("Successfully pinged google.com"),EE(2)):(this.j.info("Failed to ping google.com"),EE(1))},(P_=wS.prototype).xa=function(){},P_.wa=function(){},P_.va=function(){},P_.ua=function(){},P_.Ra=function(){},_S.prototype.g=function(e,t){return new xS(e,t)},G_(xS,Gx),xS.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;EE(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=bS(e,null,e.V),oS(e)},xS.prototype.close=function(){rS(this.g)},xS.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=$x(e),e=n);t.i.push(new _C(t.ab++,e)),3==t.G&&oS(t)},xS.prototype.M=function(){this.g.l=null,delete this.j,rS(this.g),delete this.g,xS.X.M.call(this)},G_(ES,LE),G_(CS,jE),G_(SS,wS),SS.prototype.xa=function(){Qx(this.g,"a")},SS.prototype.wa=function(e){Qx(this.g,new ES(e))},SS.prototype.va=function(e){Qx(this.g,new CS)},SS.prototype.ua=function(){Qx(this.g,"b")},_S.prototype.createWebChannel=_S.prototype.g,xS.prototype.send=xS.prototype.u,xS.prototype.open=xS.prototype.m,xS.prototype.close=xS.prototype.close,TE.NO_ERROR=0,TE.TIMEOUT=8,TE.HTTP_ERROR=6,IE.COMPLETE="complete",PE.EventType=AE,AE.OPEN="a",AE.CLOSE="b",AE.ERROR="c",AE.MESSAGE="d",Gx.prototype.listen=Gx.prototype.N,zC.prototype.listenOnce=zC.prototype.O,zC.prototype.getLastError=zC.prototype.Oa,zC.prototype.getLastErrorCode=zC.prototype.Ea,zC.prototype.getStatus=zC.prototype.aa,zC.prototype.getResponseJson=zC.prototype.Sa,zC.prototype.getResponseText=zC.prototype.fa,zC.prototype.send=zC.prototype.da,zC.prototype.setWithCredentials=zC.prototype.Ka;var TS=j_.createWebChannelTransport=function(){return new _S},IS=j_.getStatEventTarget=function(){return kE()},NS=j_.ErrorCode=TE,RS=j_.EventType=IE,PS=j_.Event=gE,OS=j_.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},AS=j_.FetchXmlHttpFactory=jC,LS=j_.WebChannel=PE,jS=j_.XhrIo=zC,DS="@firebase/firestore",MS=function(){function e(t){S(this,e),this.uid=t}return N(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();MS.UNAUTHENTICATED=new MS(null),MS.GOOGLE_CREDENTIALS=new MS("google-credentials-uid"),MS.FIRST_PARTY=new MS("first-party-uid"),MS.MOCK_USER=new MS("mock-user");var FS="9.15.0",US=new Fe("@firebase/firestore");function VS(){return US.logLevel}function qS(e){if(US.logLevel<=Pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(HS);US.debug.apply(US,["Firestore (".concat(FS,"): ").concat(e)].concat(a(i)))}}function zS(e){if(US.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(HS);US.error.apply(US,["Firestore (".concat(FS,"): ").concat(e)].concat(a(i)))}}function BS(e){if(US.logLevel<=Pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(HS);US.warn.apply(US,["Firestore (".concat(FS,"): ").concat(e)].concat(a(i)))}}function HS(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function WS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(FS,") INTERNAL ASSERTION FAILED: ")+e;throw zS(t),new Error(t)}function KS(e,t){e||WS()}function GS(e,t){return e}var QS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},YS=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return N(n)}(ae),$S=N((function e(){var t=this;S(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),XS=N((function e(t,n){S(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),JS=function(){function e(){S(this,e)}return N(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(MS.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ZS=function(){function e(t){S(this,e),this.token=t,this.changeListener=null}return N(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),eT=function(){function e(t){S(this,e),this.t=t,this.currentUser=MS.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new $S;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new $S,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){qS("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(qS("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $S)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(qS("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(KS("string"==typeof n.accessToken),new XS(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return KS(null===e||"string"==typeof e),new MS(e)}}]),e}(),tT=function(){function e(t,n,r,i){S(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=MS.FIRST_PARTY,this.p=new Map}return N(e,[{key:"I",value:function(){return this.g?this.g():(KS(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),nT=function(){function e(t,n,r,i){S(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return N(e,[{key:"getToken",value:function(){return Promise.resolve(new tT(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(MS.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),rT=N((function e(t){S(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),iT=function(){function e(t){S(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&qS("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,qS("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){qS("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):qS("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(KS("string"==typeof t.token),e.A=t.token,new rT(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function aT(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var oT=function(){function e(){S(this,e)}return N(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=aT(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function sT(e,t){return e<t?-1:e>t?1:0}function uT(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var lT=function(){function e(t,n){if(S(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new YS(QS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new YS(QS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new YS(QS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new YS(QS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return N(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?sT(this.nanoseconds,e.nanoseconds):sT(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),cT=function(){function e(t){S(this,e),this.timestamp=t}return N(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new lT(0,0))}},{key:"max",value:function(){return new e(new lT(253402300799,999999999))}}]),e}(),fT=function(){function e(t,n,r){S(this,e),void 0===n?n=0:n>t.length&&WS(),void 0===r?r=t.length-n:r>t.length-n&&WS(),this.segments=t,this.offset=n,this.len=r}return N(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),hT=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new YS(QS.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,a(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fT),dT=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pT=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return dT.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new YS(QS.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new YS(QS.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new YS(QS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new YS(QS.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fT),vT=function(){function e(t){S(this,e),this.path=t}return N(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===hT.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(hT.fromString(t))}},{key:"fromName",value:function(t){return new e(hT.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(hT.emptyPath())}},{key:"comparator",value:function(e,t){return hT.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new hT(t.slice()))}}]),e}(),mT=N((function e(t,n,r,i){S(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));mT.UNKNOWN_ID=-1;function yT(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cT.fromTimestamp(1e9===r?new lT(n+1,0):new lT(n,r));return new bT(i,vT.empty(),t)}function gT(e){return new bT(e.readTime,e.key,-1)}var bT=function(){function e(t,n,r){S(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return N(e,null,[{key:"min",value:function(){return new e(cT.min(),vT.empty(),-1)}},{key:"max",value:function(){return new e(cT.max(),vT.empty(),-1)}}]),e}();function kT(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=vT.comparator(e.documentKey,t.documentKey))?n:sT(e.largestBatchId,t.largestBatchId)}var wT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_T=function(){function e(){S(this,e),this.onCommittedListeners=[]}return N(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function xT(e){return ET.apply(this,arguments)}function ET(){return ET=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===QS.FAILED_PRECONDITION&&t.message===wT){e.next=2;break}throw t;case 2:qS("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ET.apply(this,arguments)}var CT=function(){function e(t){var n=this;S(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return N(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&WS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=_(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function ST(e){return"IndexedDbTransactionError"===e.name}var TT=function(){function e(t,n){var r=this;S(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return N(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();TT.at=-1;var IT=N((function e(t,n,r,i,a,o,s,u){S(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),NT=function(){function e(t,n){S(this,e),this.projectId=t,this.database=n||"(default)"}return N(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function RT(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function PT(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function OT(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function AT(e){return null==e}function LT(e){return 0===e&&1/e==-1/0}function jT(e){return"number"==typeof e&&Number.isInteger(e)&&!LT(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var DT=function(e){function t(e){S(this,t),this.binaryString=e}return N(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return sT(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();DT.EMPTY_BYTE_STRING=new DT("");var MT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function FT(e){if(KS(!!e),"string"==typeof e){var t=0,n=MT.exec(e);if(KS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:UT(e.seconds),nanos:UT(e.nanos)}}function UT(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function VT(e){return"string"==typeof e?DT.fromBase64String(e):DT.fromUint8Array(e)}function qT(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zT(e){var t=e.mapValue.fields.__previous_value__;return qT(t)?zT(t):t}function BT(e){var t=FT(e.mapValue.fields.__local_write_time__.timestampValue);return new lT(t.seconds,t.nanos)}var HT={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function WT(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qT(e)?4:aI(e)?9007199254740991:10:WS()}function KT(e,t){if(e===t)return!0;var n=WT(e);if(n!==WT(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return BT(e).isEqual(BT(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=FT(e.timestampValue),r=FT(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return VT(e.bytesValue).isEqual(VT(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return UT(e.geoPointValue.latitude)===UT(t.geoPointValue.latitude)&&UT(e.geoPointValue.longitude)===UT(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return UT(e.integerValue)===UT(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=UT(e.doubleValue),r=UT(t.doubleValue);return n===r?LT(n)===LT(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uT(e.arrayValue.values||[],t.arrayValue.values||[],KT);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(RT(n)!==RT(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!KT(n[i],r[i])))return!1;return!0}(e,t);default:return WS()}}function GT(e,t){return void 0!==(e.values||[]).find((function(e){return KT(e,t)}))}function QT(e,t){if(e===t)return 0;var n=WT(e),r=WT(t);if(n!==r)return sT(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sT(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=UT(e.integerValue||e.doubleValue),r=UT(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return YT(e.timestampValue,t.timestampValue);case 4:return YT(BT(e),BT(t));case 5:return sT(e.stringValue,t.stringValue);case 6:return function(e,t){var n=VT(e),r=VT(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=sT(n[i],r[i]);if(0!==a)return a}return sT(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=sT(UT(e.latitude),UT(t.latitude));return 0!==n?n:sT(UT(e.longitude),UT(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=QT(n[i],r[i]);if(a)return a}return sT(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===HT.mapValue&&t===HT.mapValue)return 0;if(e===HT.mapValue)return 1;if(t===HT.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=sT(r[o],a[o]);if(0!==s)return s;var u=QT(n[r[o]],i[a[o]]);if(0!==u)return u}return sT(r.length,a.length)}(e.mapValue,t.mapValue);default:throw WS()}}function YT(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sT(e,t);var n=FT(e),r=FT(t),i=sT(n.seconds,r.seconds);return 0!==i?i:sT(n.nanos,r.nanos)}function $T(e){return XT(e)}function XT(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=FT(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?VT(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vT.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=_(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=XT(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=_(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(XT(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):WS();var t,n}function JT(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ZT(e){return!!e&&"integerValue"in e}function eI(e){return!!e&&"arrayValue"in e}function tI(e){return!!e&&"nullValue"in e}function nI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rI(e){return!!e&&"mapValue"in e}function iI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return PT(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=iI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=iI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function aI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var oI=N((function e(t,n){S(this,e),this.position=t,this.inclusive=n}));function sI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?vT.comparator(vT.fromName(o.referenceValue),n.key):QT(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function uI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!KT(e.position[n],t.position[n]))return!1;return!0}var lI=N((function e(){S(this,e)})),cI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(QT(t,this.value)):null!==t&&WT(this.value)===WT(t)&&this.matchesComparison(QT(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return WS()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gI(e,t,r):"array-contains"===t?new _I(e,r):"in"===t?new xI(e,r):"not-in"===t?new EI(e,r):"array-contains-any"===t?new CI(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new bI(e,n):new kI(e,n)}}]),n}(lI),fI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return N(n,[{key:"matches",value:function(e){return hI(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=_(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(lI);function hI(e){return"and"===e.op}function dI(e){return pI(e)&&hI(e)}function pI(e){var t,n=_(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fI)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function vI(e){if(e instanceof cI)return e.field.canonicalString()+e.op.toString()+$T(e.value);var t=e.filters.map((function(e){return vI(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function mI(e,t){return e instanceof cI?function(e,t){return t instanceof cI&&e.op===t.op&&e.field.isEqual(t.field)&&KT(e.value,t.value)}(e,t):e instanceof fI?function(e,t){return t instanceof fI&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&mI(n,t.filters[r])}),!0)}(e,t):void WS()}function yI(e){return e instanceof cI?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($T(e.value))}(e):e instanceof fI?function(e){return e.op.toString()+" {"+e.getFilters().map(yI).join(" ,")+"}"}(e):"Filter"}var gI=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,i)).key=vT.fromName(i.referenceValue),a}return N(n,[{key:"matches",value:function(e){var t=vT.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(cI),bI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"in",r)).keys=wI("in",r),i}return N(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cI),kI=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"not-in",r)).keys=wI("not-in",r),i}return N(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cI);function wI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vT.fromName(e.referenceValue)}))}var _I=function(e){y(n,e);var t=w(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return eI(t)&&GT(t.arrayValue,this.value)}}]),n}(cI),xI=function(e){y(n,e);var t=w(n);function n(e,r){return S(this,n),t.call(this,e,"in",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&GT(this.value.arrayValue,t)}}]),n}(cI),EI=function(e){y(n,e);var t=w(n);function n(e,r){return S(this,n),t.call(this,e,"not-in",r)}return N(n,[{key:"matches",value:function(e){if(GT(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!GT(this.value.arrayValue,t)}}]),n}(cI),CI=function(e){y(n,e);var t=w(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains-any",r)}return N(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!eI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return GT(t.value.arrayValue,e)}))}}]),n}(cI),SI=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";S(this,e),this.field=t,this.dir=n}));function TI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var II=function(){function e(t,n){S(this,e),this.comparator=t,this.root=n||RI.EMPTY}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,RI.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,RI.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new NI(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new NI(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new NI(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new NI(this.root,e,this.comparator,!0)}}]),e}(),NI=function(){function e(t,n,r,i){S(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return N(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),RI=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw WS();if(this.right.isRed())throw WS();var e=this.left.check();if(e!==this.right.check())throw WS();return e+(this.isRed()?0:1)}}]),e}();RI.EMPTY=null,RI.RED=!0,RI.BLACK=!1,RI.EMPTY=new(function(){function e(){S(this,e),this.size=0}return N(e,[{key:"key",get:function(){throw WS()}},{key:"value",get:function(){throw WS()}},{key:"color",get:function(){throw WS()}},{key:"left",get:function(){throw WS()}},{key:"right",get:function(){throw WS()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new RI(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var PI=function(){function e(t){S(this,e),this.comparator=t,this.data=new II(this.comparator)}return N(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new OI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new OI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),OI=function(){function e(t){S(this,e),this.iter=t}return N(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var AI=function(){function e(t){S(this,e),this.fields=t,t.sort(pT.comparator)}return N(e,[{key:"unionWith",value:function(t){var n,r=new PI(pT.comparator),i=_(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=_(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=_(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return uT(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),LI=function(){function e(t){S(this,e),this.value=t}return N(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iI(t)}},{key:"setAll",value:function(e){var t=this,n=pT.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=iI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());rI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return KT(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){PT(t,(function(t,n){return e[t]=n}));var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(iI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();var jI=function(){function e(t,n,r,i,a,o,s){S(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return N(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(cT.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=LI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=LI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=cT.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,cT.min(),cT.min(),cT.min(),LI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,cT.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cT.min(),cT.min(),LI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cT.min(),cT.min(),LI.empty(),2)}}]),e}(),DI=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;S(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ft=null}));function MI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new DI(e,t,n,r,i,a,o)}function FI(e){var t=GS(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return vI(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),AT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return $T(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return $T(e)})).join(",")),t.ft=n}return t.ft}function UI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!TI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!mI(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uI(e.startAt,t.startAt)&&uI(e.endAt,t.endAt)}function VI(e){return vT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var qI=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}));function zI(e,t,n,r,i,a,o,s){return new qI(e,t,n,r,i,a,o,s)}function BI(e){return new qI(e)}function HI(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function WI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function KI(e){var t,n=_(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function GI(e){return null!==e.collectionGroup}function QI(e){var t=GS(e);if(null===t.dt){t.dt=[];var n=KI(t),r=WI(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new SI(n)),t.dt.push(new SI(pT.keyField(),"asc"));else{var i,a=!1,o=_(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new SI(pT.keyField(),u))}}}return t.dt}function YI(e){var t=GS(e);if(!t._t)if("F"===t.limitType)t._t=MI(t.path,t.collectionGroup,QI(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=_(QI(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new SI(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new oI(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new oI(t.startAt.position,t.startAt.inclusive):null;t._t=MI(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function $I(e,t){t.getFirstInequalityField(),KI(e);var n=e.filters.concat([t]);return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function XI(e,t,n){return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function JI(e,t){return UI(YI(e),YI(t))&&e.limitType===t.limitType}function ZI(e){return"".concat(FI(YI(e)),"|lt:").concat(e.limitType)}function eN(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return yI(e)})).join(", "),"]")),AT(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return $T(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return $T(e)})).join(",")),"Target(".concat(t,")")}(YI(e)),"; limitType=").concat(e.limitType,")")}function tN(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vT.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=_(QI(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=_(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,QI(e),t))&&!(e.endAt&&!function(e,t,n){var r=sI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,QI(e),t))}(e,t)}function nN(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rN(e){return function(t,n){var r,i=!1,a=_(QI(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=iN(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function iN(e,t,n){var r=e.field.isKeyField()?vT.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?QT(r,i):WS()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return WS()}}function aN(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:LT(t)?"-0":t}}function oN(e){return{integerValue:""+e}}function sN(e,t){return jT(t)?oN(t):aN(e,t)}var uN=N((function e(){S(this,e),this._=void 0}));function lN(e,t,n){return e instanceof hN?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dN?pN(e,t):e instanceof vN?mN(e,t):function(e,t){var n=fN(e,t),r=gN(n)+gN(e.gt);return ZT(n)&&ZT(e.gt)?oN(r):aN(e.yt,r)}(e,t)}function cN(e,t,n){return e instanceof dN?pN(e,t):e instanceof vN?mN(e,t):n}function fN(e,t){return e instanceof yN?ZT(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var hN=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(uN),dN=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(uN);function pN(e,t){var n,r=bN(t),i=_(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return KT(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var vN=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(uN);function mN(e,t){var n,r=bN(t),i=_(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!KT(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yN=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return N(n)}(uN);function gN(e){return UT(e.integerValue||e.doubleValue)}function bN(e){return eI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var kN=function(){function e(t,n){S(this,e),this.updateTime=t,this.exists=n}return N(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function wN(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var _N=N((function e(){S(this,e)}));function xN(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new LN(e.key,kN.none()):new TN(e.key,e.data,kN.none());var n,r=e.data,i=LI.empty(),a=new PI(pT.comparator),o=_(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new IN(e.key,i,new AI(a.toArray()),kN.none())}function EN(e,t,n){e instanceof TN?function(e,t,n){var r=e.value.clone(),i=RN(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof IN?function(e,t,n){if(wN(e.precondition,t)){var r=RN(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(NN(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function CN(e,t,n,r){return e instanceof TN?function(e,t,n,r){if(!wN(e.precondition,t))return n;var i=e.value.clone(),a=PN(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof IN?function(e,t,n,r){if(!wN(e.precondition,t))return n;var i=PN(e.fieldTransforms,r,t),a=t.data;return a.setAll(NN(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return wN(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function SN(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uT(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dN&&t instanceof dN||e instanceof vN&&t instanceof vN?uT(e.elements,t.elements,KT):e instanceof yN&&t instanceof yN?KT(e.gt,t.gt):e instanceof hN&&t instanceof hN}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var TN=function(e){y(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return S(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(_N),IN=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return S(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return N(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(_N);function NN(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function RN(e,t,n){var r=new Map;KS(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,cN(o,s,n[i]))}return r}function PN(e,t,n){var r,i=new Map,a=_(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,lN(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var ON,AN,LN=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(_N),jN=N((function e(t){S(this,e),this.count=t}));function DN(e){if(void 0===e)return zS("GRPC error has no .code"),QS.UNKNOWN;switch(e){case ON.OK:return QS.OK;case ON.CANCELLED:return QS.CANCELLED;case ON.UNKNOWN:return QS.UNKNOWN;case ON.DEADLINE_EXCEEDED:return QS.DEADLINE_EXCEEDED;case ON.RESOURCE_EXHAUSTED:return QS.RESOURCE_EXHAUSTED;case ON.INTERNAL:return QS.INTERNAL;case ON.UNAVAILABLE:return QS.UNAVAILABLE;case ON.UNAUTHENTICATED:return QS.UNAUTHENTICATED;case ON.INVALID_ARGUMENT:return QS.INVALID_ARGUMENT;case ON.NOT_FOUND:return QS.NOT_FOUND;case ON.ALREADY_EXISTS:return QS.ALREADY_EXISTS;case ON.PERMISSION_DENIED:return QS.PERMISSION_DENIED;case ON.FAILED_PRECONDITION:return QS.FAILED_PRECONDITION;case ON.ABORTED:return QS.ABORTED;case ON.OUT_OF_RANGE:return QS.OUT_OF_RANGE;case ON.UNIMPLEMENTED:return QS.UNIMPLEMENTED;case ON.DATA_LOSS:return QS.DATA_LOSS;default:return WS()}}(AN=ON||(ON={}))[AN.OK=0]="OK",AN[AN.CANCELLED=1]="CANCELLED",AN[AN.UNKNOWN=2]="UNKNOWN",AN[AN.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",AN[AN.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",AN[AN.NOT_FOUND=5]="NOT_FOUND",AN[AN.ALREADY_EXISTS=6]="ALREADY_EXISTS",AN[AN.PERMISSION_DENIED=7]="PERMISSION_DENIED",AN[AN.UNAUTHENTICATED=16]="UNAUTHENTICATED",AN[AN.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",AN[AN.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",AN[AN.ABORTED=10]="ABORTED",AN[AN.OUT_OF_RANGE=11]="OUT_OF_RANGE",AN[AN.UNIMPLEMENTED=12]="UNIMPLEMENTED",AN[AN.INTERNAL=13]="INTERNAL",AN[AN.UNAVAILABLE=14]="UNAVAILABLE",AN[AN.DATA_LOSS=15]="DATA_LOSS";var MN=function(){function e(t,n){S(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return N(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){PT(this.inner,(function(t,n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return OT(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),FN=new II(vT.comparator);function UN(){return FN}var VN=new II(vT.comparator);function qN(){for(var e=VN,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zN(e){var t=VN;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function BN(){return WN()}function HN(){return WN()}function WN(){return new MN((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}new II(vT.comparator);var KN=new PI(vT.comparator);function GN(){for(var e=KN,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var QN=new PI(sT);function YN(){return QN}var $N=function(){function e(t,n,r,i,a){S(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return N(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,XN.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(cT.min(),i,YN(),UN(),GN())}}]),e}(),XN=function(){function e(t,n,r,i,a){S(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return N(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,GN(),GN(),GN())}}]),e}(),JN=N((function e(t,n,r,i){S(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),ZN=N((function e(t,n){S(this,e),this.targetId=t,this.Et=n})),eR=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DT.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;S(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tR=function(){function e(){S(this,e),this.At=0,this.Rt=iR(),this.bt=DT.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return N(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=GN(),t=GN(),n=GN();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:WS()}})),new XN(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=iR()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),nR=function(){function e(t){S(this,e),this.$t=t,this.Bt=new Map,this.Lt=UN(),this.qt=rR(),this.Ut=new PI(sT)}return N(e,[{key:"Kt",value:function(e){var t,n=_(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=_(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:WS()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(VI(i))if(0===n){var a=new vT(i.path);this.Qt(t,a,jI.newNoDocument(a,cT.min()))}else KS(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&VI(a.target)){var o=new vT(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,jI.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=GN();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new $N(e,n,this.Ut,this.Lt,r);return this.Lt=UN(),this.qt=rR(),this.Ut=new PI(sT),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new tR,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new PI(sT),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||qS("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new tR),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function rR(){return new II(vT.comparator)}function iR(){return new II(vT.comparator)}var aR={asc:"ASCENDING",desc:"DESCENDING"},oR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sR={and:"AND",or:"OR"},uR=N((function e(t,n){S(this,e),this.databaseId=t,this.wt=n}));function lR(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function cR(e,t){return e.wt?t.toBase64():t.toUint8Array()}function fR(e){return KS(!!e),cT.fromTimestamp(function(e){var t=FT(e);return new lT(t.seconds,t.nanos)}(e))}function hR(e,t){return function(e){return new hT(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dR(e){var t=hT.fromString(e);return KS(NR(t)),t}function pR(e,t){var n=dR(t);if(n.get(1)!==e.databaseId.projectId)throw new YS(QS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new YS(QS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vT(gR(n))}function vR(e,t){return hR(e.databaseId,t)}function mR(e){var t=dR(e);return 4===t.length?hT.emptyPath():gR(t)}function yR(e){return new hT(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gR(e){return KS(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bR(e,t){return{documents:[vR(e,t.path)]}}function kR(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=vR(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=vR(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return IR(fI.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:SR(e.field),direction:xR(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.wt||AT(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wR(e){var t=mR(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){KS(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=_R(e);return t instanceof fI&&dI(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new SI(TR(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return AT(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new oI(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new oI(n,t)}(n.endAt)),zI(t,i,s,o,u,"F",l,c)}function _R(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=TR(e.unaryFilter.field);return cI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=TR(e.unaryFilter.field);return cI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=TR(e.unaryFilter.field);return cI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=TR(e.unaryFilter.field);return cI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return WS()}}(e):void 0!==e.fieldFilter?function(e){return cI.create(TR(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return WS()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fI.create(e.compositeFilter.filters.map((function(e){return _R(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return WS()}}(e.compositeFilter.op))}(e):WS()}function xR(e){return aR[e]}function ER(e){return oR[e]}function CR(e){return sR[e]}function SR(e){return{fieldPath:e.canonicalString()}}function TR(e){return pT.fromServerFormat(e.fieldPath)}function IR(e){return e instanceof cI?function(e){if("=="===e.op){if(nI(e.value))return{unaryFilter:{field:SR(e.field),op:"IS_NAN"}};if(tI(e.value))return{unaryFilter:{field:SR(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nI(e.value))return{unaryFilter:{field:SR(e.field),op:"IS_NOT_NAN"}};if(tI(e.value))return{unaryFilter:{field:SR(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:SR(e.field),op:ER(e.op),value:e.value}}}(e):e instanceof fI?function(e){var t=e.getFilters().map((function(e){return IR(e)}));return 1===t.length?t[0]:{compositeFilter:{op:CR(e.op),filters:t}}}(e):WS()}function NR(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var RR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),PR=([].concat(a(RR),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),OR=PR;[].concat(OR,["indexConfiguration","indexState","indexEntries"]);var AR=function(){function e(t,n,r,i){S(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return N(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&EN(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=_(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=CN(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=_(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=CN(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=HN();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=xN(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(cT.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),GN())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&uT(this.mutations,e.mutations,(function(e,t){return SN(e,t)}))&&uT(this.baseMutations,e.baseMutations,(function(e,t){return SN(e,t)}))}}]),e}(),LR=function(){function e(t,n){S(this,e),this.largestBatchId=t,this.mutation=n}return N(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),jR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cT.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cT.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:DT.EMPTY_BYTE_STRING;S(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return N(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),DR=N((function e(t){S(this,e),this.ie=t}));function MR(e){var t=wR({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?XI(t,t.limit,"L"):t}var FR=function(){function e(){S(this,e)}return N(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(UT(e.integerValue));else if("doubleValue"in e){var n=UT(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),LT(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(VT(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?aI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):WS()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),vT.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();FR.Ie=new FR;var UR=function(){function e(){S(this,e),this.Je=new VR}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),CT.resolve()}},{key:"getCollectionParents",value:function(e,t){return CT.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return CT.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return CT.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return CT.resolve(null)}},{key:"getIndexType",value:function(e,t){return CT.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return CT.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return CT.resolve(null)}},{key:"getMinOffset",value:function(e,t){return CT.resolve(bT.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return CT.resolve(bT.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return CT.resolve()}},{key:"updateIndexEntries",value:function(e,t){return CT.resolve()}}]),e}(),VR=function(){function e(){S(this,e),this.index={}}return N(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new PI(hT.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new PI(hT.comparator)).toArray()}}]),e}();new Uint8Array(0);var qR=function(){function e(t,n,r){S(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return N(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();qR.DEFAULT_COLLECTION_PERCENTILE=10,qR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qR.DEFAULT=new qR(41943040,qR.DEFAULT_COLLECTION_PERCENTILE,qR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qR.DISABLED=new qR(-1,0,0);var zR=function(){function e(t){S(this,e),this.bn=t}return N(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var BR=function(){function e(){S(this,e),this.changes=new MN((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return N(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,jI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?CT.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var HR=N((function e(t,n){S(this,e),this.overlayedDocument=t,this.mutatedFields=n})),WR=function(){function e(t,n,r,i){S(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return N(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&CN(r.mutation,e,AI.empty(),lT.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,GN()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GN(),i=BN();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=qN();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=BN();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,GN())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=UN(),a=WN(),o=WN();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof IN)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),CN(o.mutation,t,o.mutation.getFieldMask(),lT.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new HR(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=WN(),i=new II((function(e,t){return e-t})),a=GN();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=_(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||AI.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||GN()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=HN();l.forEach((function(e){if(!a.has(e)){var n=xN(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return CT.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return vT.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):CT.resolve(BN()),s=-1,u=a;return o.next((function(t){return CT.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?CT.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,GN())})).next((function(e){return{batchId:s,changes:zN(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new vT(t)).next((function(e){var t=qN();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=qN();return this.indexManager.getCollectionParents(e,i).next((function(o){return CT.forEach(o,(function(o){var s=function(e,t){return new qI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,jI.newInvalidDocument(n)))}));var n=qN();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&CN(a.mutation,i,AI.empty(),lT.now()),tN(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),KR=function(){function e(t){S(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return N(e,[{key:"getBundleMetadata",value:function(e,t){return CT.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:fR(n.createTime)}),CT.resolve()}},{key:"getNamedQuery",value:function(e,t){return CT.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:MR(e.bundledQuery),readTime:fR(e.readTime)}}(t)),CT.resolve()}}]),e}(),GR=function(){function e(){S(this,e),this.overlays=new II(vT.comparator),this.es=new Map}return N(e,[{key:"getOverlay",value:function(e,t){return CT.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=BN();return CT.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),CT.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),CT.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=BN(),i=t.length+1,a=new vT(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return CT.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new II((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=BN(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=BN(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return CT.resolve(u)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new LR(t,n));var a=this.es.get(t);void 0===a&&(a=GN(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),QR=function(){function e(){S(this,e),this.ns=new PI(YR.ss),this.rs=new PI(YR.os)}return N(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new YR(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new YR(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new vT(new hT([])),r=new YR(n,e),i=new YR(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new vT(new hT([])),n=new YR(t,e),r=new YR(t,e+1),i=GN();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new YR(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),YR=function(){function e(t,n){S(this,e),this.key=t,this._s=n}return N(e,null,[{key:"ss",value:function(e,t){return vT.comparator(e.key,t.key)||sT(e._s,t._s)}},{key:"os",value:function(e,t){return sT(e._s,t._s)||vT.comparator(e.key,t.key)}}]),e}(),$R=function(){function e(t,n){S(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new PI(YR.ss)}return N(e,[{key:"checkEmpty",value:function(e){return CT.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new AR(i,t,n,r);this.mutationQueue.push(a);var o,s=_(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new YR(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return CT.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return CT.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return CT.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return CT.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return CT.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new YR(t,0),i=new YR(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),CT.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new PI(sT);return t.forEach((function(e){var t=new YR(e,0),i=new YR(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),CT.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;vT.isDocumentKey(i)||(i=i.child(""));var a=new YR(new vT(i),0),o=new PI(sT);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),CT.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;KS(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return CT.forEach(t.mutations,(function(i){var a=new YR(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new YR(t,0),r=this.gs.firstAfterOrEqual(n);return CT.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,CT.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),XR=function(){function e(t){S(this,e),this.Es=t,this.docs=new II(vT.comparator),this.size=0}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return CT.resolve(n?n.document.mutableCopy():jI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=UN();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():jI.newInvalidDocument(e))})),CT.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=UN(),i=new vT(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||kT(gT(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return CT.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){WS()}},{key:"As",value:function(e,t){return CT.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new JR(this)}},{key:"getSize",value:function(e){return CT.resolve(this.size)}}]),e}(),JR=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).Yn=e,r}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),CT.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(BR),ZR=function(){function e(t){S(this,e),this.persistence=t,this.Rs=new MN((function(e){return FI(e)}),UI),this.lastRemoteSnapshotVersion=cT.min(),this.highestTargetId=0,this.bs=0,this.Ps=new QR,this.targetCount=0,this.vs=zR.Pn()}return N(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),CT.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return CT.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return CT.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),CT.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),CT.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new zR(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,CT.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),CT.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,CT.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),CT.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return CT.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return CT.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),CT.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),CT.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),CT.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return CT.resolve(n)}},{key:"containsKey",value:function(e,t){return CT.resolve(this.Ps.containsKey(t))}}]),e}(),eP=function(){function e(t,n){var r=this;S(this,e),this.Vs={},this.overlays={},this.Ss=new TT(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new ZR(this),this.indexManager=new UR,this.remoteDocumentCache=new XR((function(e){return r.referenceDelegate.xs(e)})),this.yt=new DR(n),this.Ns=new KR(this.yt)}return N(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new GR,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new $R(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;qS("MemoryPersistence","Starting transaction:",e);var i=new tP(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return CT.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),tP=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return N(n)}(_T),nP=function(){function e(t){S(this,e),this.persistence=t,this.Fs=new QR,this.$s=null}return N(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw WS()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),CT.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),CT.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),CT.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return CT.forEach(this.Ls,(function(r){var i=vT.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,cT.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return CT.or([function(){return CT.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var rP=function(){function e(t,n,r,i){S(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return N(e,null,[{key:"Ci",value:function(t,n){var r,i=GN(),a=GN(),o=_(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),iP=function(){function e(){S(this,e),this.xi=!1}return N(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(HI(t))return CT.resolve(null);var r=YI(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=XI(t,null,"F"),r=YI(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var o=GN.apply(void 0,a(i));return n.Ni.getDocuments(e,o).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var a=n.Fi(t,i);return n.$i(t,a,o,r.readTime)?n.ki(e,XI(t,null,"F")):n.Bi(e,a,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return HI(t)||r.isEqual(cT.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(VS()<=Pe.DEBUG&&qS("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eN(t)),i.Bi(e,o,t,yT(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new PI(rN(e));return t.forEach((function(t,r){tN(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return VS()<=Pe.DEBUG&&qS("QueryEngine","Using full collection scan to execute query:",eN(t)),this.Ni.getDocumentsMatchingQuery(e,t,bT.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),aP=function(){function e(t,n,r,i){S(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new II(sT),this.Ui=new MN((function(e){return FI(e)}),UI),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return N(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function oP(e,t,n,r){return new aP(e,t,n,r)}function sP(e,t){return uP.apply(this,arguments)}function uP(){return uP=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=GS(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=GN(),u=_(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,f=_(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=_(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=_(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),uP.apply(this,arguments)}function lP(e){var t=GS(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function cP(e,t){var n=GS(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(DT.EMPTY_BYTE_STRING,cT.min()).withLastLimboFreeSnapshotVersion(cT.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Cs.updateTargetData(e,l))}}));var s=UN(),u=GN();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fP(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual(cT.min())){var l=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return CT.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.qi=i,e}))}function fP(e,t,n){var r=GN(),i=GN();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=UN();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(cT.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):qS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function hP(e,t){var n=GS(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,CT.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new jR(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function dP(e,t,n){return pP.apply(this,arguments)}function pP(){return pP=C(x().mark((function e(t,n,r){var i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=GS(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ST(e.t1)){e.next=12;break}throw e.t1;case 12:qS("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pP.apply(this,arguments)}function vP(e,t,n){var r=GS(e),i=cT.min(),a=GN();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=GS(e),i=r.Ui.get(n);return void 0!==i?CT.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,YI(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:cT.min(),n?a:GN())})).next((function(e){return mP(r,nN(t),e),{documents:e,Hi:a}}))}))}function mP(e,t,n){var r=e.Ki.get(t)||cT.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var yP=function(){function e(){S(this,e),this.activeTargetIds=YN()}return N(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),gP=function(){function e(){S(this,e),this.Lr=new yP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return N(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new yP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),bP=function(){function e(){S(this,e)}return N(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kP=function(){function e(){var t=this;S(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return N(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){qS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=_(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){qS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=_(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),wP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_P=function(){function e(t){S(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return N(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),xP=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return N(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new jS;o.setWithCredentials(!0),o.listenOnce(RS.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case NS.NO_ERROR:var t=o.getResponseJson();qS("Connection","XHR received:",JSON.stringify(t)),i(t);break;case NS.TIMEOUT:qS("Connection",'RPC "'+e+'" timed out'),a(new YS(QS.DEADLINE_EXCEEDED,"Request time out"));break;case NS.HTTP_ERROR:var n=o.getStatus();if(qS("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(QS).indexOf(t)>=0?t:QS.UNKNOWN}(s.status);a(new YS(u,s.message))}else a(new YS(QS.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new YS(QS.UNAVAILABLE,"Connection failed."));break;default:WS()}}finally{qS("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=TS(),a=IS(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new AS({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");qS("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,f=new _P({Hr:function(e){c?qS("Connection","Not sending because WebChannel is closed:",e):(l||(qS("Connection","Opening WebChannel transport."),u.open(),l=!0),qS("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,LS.EventType.OPEN,(function(){c||qS("Connection","WebChannel transport opened.")})),h(u,LS.EventType.CLOSE,(function(){c||(c=!0,qS("Connection","WebChannel transport closed"),f.io())})),h(u,LS.EventType.ERROR,(function(e){c||(c=!0,BS("Connection","WebChannel transport errored:",e),f.io(new YS(QS.UNAVAILABLE,"The operation could not be completed")))})),h(u,LS.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];KS(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){qS("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ON[e];if(void 0!==t)return DN(t)}(a),s=i.message;void 0===o&&(o=QS.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,f.io(new YS(o,s)),u.close()}else qS("Connection","WebChannel received:",n),f.ro(n)}})),h(a,PS.STAT_EVENT,(function(e){e.stat===OS.PROXY?qS("Connection","Detected buffering proxy"):e.stat===OS.NOPROXY&&qS("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){S(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return N(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);qS("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return qS("RestConnection","Received: ",e),e}),(function(t){throw BS("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+FS,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=wP[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function EP(){return"undefined"!=typeof document?document:null}function CP(e){return new uR(e,!0)}var SP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;S(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return N(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&qS("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),TP=function(){function e(t,n,r,i,a,o,s,u){S(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new SP(t,n)}return N(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===QS.RESOURCE_EXHAUSTED?(zS(n.toString()),zS("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===QS.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new YS(QS.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(C(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return qS("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(qS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),IP=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return S(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).yt=o,u}return N(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:WS()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(KS(void 0===t||"string"==typeof t),DT.fromBase64String(t||"")):(KS(void 0===t||t instanceof Uint8Array),DT.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?QS.UNKNOWN:DN(e.code);return new YS(t,e.message||"")}(o);n=new eR(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=pR(e,u.document.name),c=fR(u.document.updateTime),f=u.document.createTime?fR(u.document.createTime):cT.min(),h=new LI({mapValue:{fields:u.document.fields}}),d=jI.newFoundDocument(l,c,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new JN(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=pR(e,m.document),g=m.readTime?fR(m.readTime):cT.min(),b=jI.newNoDocument(y,g),k=m.removedTargetIds||[];n=new JN([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=pR(e,w.document),x=w.removedTargetIds||[];n=new JN([],x,_,null)}else{if(!("filter"in t))return WS();t.filter;var E=t.filter;E.targetId;var C=E.count||0,S=new jN(C),T=E.targetId;n=new ZN(T,S)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return cT.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?cT.min():t.readTime?fR(t.readTime):cT.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=yR(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=VI(r)?{documents:bR(e,r)}:{query:kR(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=cR(e,t.resumeToken):t.snapshotVersion.compareTo(cT.min())>0&&(n.readTime=lR(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return WS()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=yR(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(TP),NP=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return N(n,[{key:"su",value:function(){if(this.nu)throw new YS(QS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.connection.ao(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===QS.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new YS(QS.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],l=o[1];return i.connection._o(e,t,n,s,l,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===QS.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new YS(QS.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return N((function e(){S(this,e)}))}());var RP=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return N(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(zS(t),this.ou=!1):qS("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),PP=N((function e(t,n,r,i,a){var o=this;S(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zP(o),!e.t0){e.next=5;break}return qS("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=GS(t))._u.add(4),e.next=4,LP(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,OP(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new RP(r,i)}));function OP(e){return AP.apply(this,arguments)}function AP(){return AP=C(x().mark((function e(t){var n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zP(t)){e.next=18;break}n=_(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),AP.apply(this,arguments)}function LP(e){return jP.apply(this,arguments)}function jP(){return jP=C(x().mark((function e(t){var n,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),jP.apply(this,arguments)}function DP(e,t){var n=GS(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),qP(n)?VP(n):nO(n).ko()&&FP(n,t))}function MP(e,t){var n=GS(e),r=nO(n);n.du.delete(t),r.ko()&&UP(n,t),0===n.du.size&&(r.ko()?r.Fo():zP(n)&&n.gu.set("Unknown"))}function FP(e,t){e.yu.Ot(t.targetId),nO(e).zo(t)}function UP(e,t){e.yu.Ot(t),nO(e).Ho(t)}function VP(e){e.yu=new nR({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),nO(e).start(),e.gu.uu()}function qP(e){return zP(e)&&!nO(e).No()&&e.du.size>0}function zP(e){return 0===GS(e)._u.size}function BP(e){e.yu=void 0}function HP(e){return WP.apply(this,arguments)}function WP(){return WP=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){FP(t,e)}));case 1:case"end":return e.stop()}}),e)}))),WP.apply(this,arguments)}function KP(e,t){return GP.apply(this,arguments)}function GP(){return GP=C(x().mark((function e(t,n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:BP(t),qP(t)?(t.gu.hu(n),VP(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),GP.apply(this,arguments)}function QP(e,t,n){return YP.apply(this,arguments)}function YP(){return YP=C(x().mark((function e(t,n,r){var i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof eR&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=C(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=_(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),qS("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$P(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof JN?t.yu.Kt(n):n instanceof ZN?t.yu.Jt(n):t.yu.jt(n),r.isEqual(cT.min())){e.next=29;break}return e.prev=14,e.next=17,lP(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(DT.EMPTY_BYTE_STRING,n.snapshotVersion)),UP(e,t);var r=new jR(n.target,t,1,n.sequenceNumber);FP(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),qS("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$P(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),YP.apply(this,arguments)}function $P(e,t,n){return XP.apply(this,arguments)}function XP(){return XP=C(x().mark((function e(t,n,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ST(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,LP(t);case 5:t.gu.set("Offline"),r||(r=function(){return lP(t.localStore)}),t.asyncQueue.enqueueRetryable(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qS("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,OP(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),XP.apply(this,arguments)}function JP(e,t){return ZP.apply(this,arguments)}function ZP(){return ZP=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=GS(t)).asyncQueue.verifyOperationInProgress(),qS("RemoteStore","RemoteStore received new credentials"),i=zP(r),r._u.add(3),e.next=6,LP(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,OP(r);case 12:case"end":return e.stop()}}),e)}))),ZP.apply(this,arguments)}function eO(e,t){return tO.apply(this,arguments)}function tO(){return tO=C(x().mark((function e(t,n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GS(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,OP(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,LP(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tO.apply(this,arguments)}function nO(e){return e.pu||(e.pu=function(e,t,n){var r=GS(e);return r.su(),new IP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:HP.bind(null,e),Zr:KP.bind(null,e),Wo:QP.bind(null,e)}),e.wu.push(function(){var t=C(x().mark((function t(n){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),qP(e)?VP(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:BP(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var rO=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new $S,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return N(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new YS(QS.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function iO(e,t){if(zS("AsyncQueue","".concat(t,": ").concat(e)),ST(e))return new YS(QS.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var aO=function(){function e(t){S(this,e),this.comparator=t?function(e,n){return t(e,n)||vT.comparator(e.key,n.key)}:function(e,t){return vT.comparator(e.key,t.key)},this.keyedMap=qN(),this.sortedSet=new II(this.comparator)}return N(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oO=function(){function e(){S(this,e),this.Tu=new II(vT.comparator)}return N(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):WS():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sO=function(){function e(t,n,r,i,a,o,s,u,l){S(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return N(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&JI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,aO.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),uO=N((function e(){S(this,e),this.Au=void 0,this.listeners=[]})),lO=N((function e(){S(this,e),this.queries=new MN((function(e){return ZI(e)}),JI),this.onlineState="Unknown",this.Ru=new Set}));function cO(e,t){return fO.apply(this,arguments)}function fO(){return fO=C(x().mark((function e(t,n){var r,i,a,o,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GS(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uO),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=iO(e.t0,"Initialization of query '".concat(eN(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&mO(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fO.apply(this,arguments)}function hO(e,t){return dO.apply(this,arguments)}function dO(){return dO=C(x().mark((function e(t,n){var r,i,a,o,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GS(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dO.apply(this,arguments)}function pO(e,t){var n,r=GS(e),i=!1,a=_(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=_(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Pu(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}u.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&mO(r)}function vO(e,t,n){var r=GS(e),i=r.queries.get(t);if(i){var a,o=_(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function mO(e){e.Ru.forEach((function(e){e.next()}))}var yO=function(){function e(t,n,r){S(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return N(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=_(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sO(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=sO.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var gO=N((function e(t){S(this,e),this.key=t})),bO=N((function e(t){S(this,e),this.key=t})),kO=function(){function e(t,n){S(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=GN(),this.mutatedKeys=GN(),this.Gu=rN(t),this.Qu=new aO(this.Gu)}return N(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new oO,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=tN(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(c,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||l&&n.Gu(f,l)<0)&&(s=!0)):!c&&f?(r.track({type:0,doc:f}),p=!0):c&&!f&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Qu:o,zu:r,$i:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return WS()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==a.length||u?{snapshot:new sO(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=GN(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new bO(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new gO(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=GN();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return sO.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),wO=N((function e(t,n,r){S(this,e),this.query=t,this.targetId=n,this.view=r})),_O=N((function e(t){S(this,e),this.key=t,this.nc=!1})),xO=function(){function e(t,n,r,i,a,o){S(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new MN((function(e){return ZI(e)}),JI),this.rc=new Map,this.oc=new Set,this.uc=new II(vT.comparator),this.cc=new Map,this.ac=new QR,this.hc={},this.lc=new Map,this.fc=zR.vn(),this.onlineState="Unknown",this.dc=void 0}return N(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function EO(e,t){return CO.apply(this,arguments)}function CO(){return CO=C(x().mark((function e(t,n){var r,i,a,o,s,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WO(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,hP(r.localStore,YI(n));case 8:return s=e.sent,r.isPrimaryClient&&DP(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,SO(r,n,i,"current"===u,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),CO.apply(this,arguments)}function SO(e,t,n,r,i){return TO.apply(this,arguments)}function TO(){return TO=C(x().mark((function e(t,n,r,i,a){var o,s,u,l,c,f;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=C(x().mark((function e(t,n,r,i){var a,o,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,vP(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(MO(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,vP(t.localStore,n,!0);case 3:return o=e.sent,s=new kO(n,o.Hi),u=s.Wu(o.documents),l=XN.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),c=s.applyChanges(u,t.isPrimaryClient,l),MO(t,r,c.Xu),f=new wO(n,r,s),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),TO.apply(this,arguments)}function IO(e,t){return NO.apply(this,arguments)}function NO(){return NO=C(x().mark((function e(t,n){var r,i,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GS(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!JI(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,dP(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),MP(r.remoteStore,i.targetId),jO(r,i.targetId)})).catch(xT);case 9:e.next=14;break;case 11:return jO(r,i.targetId),e.next=14,dP(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),NO.apply(this,arguments)}function RO(e,t){return PO.apply(this,arguments)}function PO(){return PO=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=GS(t),e.prev=1,e.next=4,cP(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(KS(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?KS(n.nc):e.removedDocuments.size>0&&(KS(n.nc),n.nc=!1))})),e.next=8,VO(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,xT(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),PO.apply(this,arguments)}function OO(e,t,n){var r=GS(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=GS(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=_(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&mO(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function AO(e,t,n){return LO.apply(this,arguments)}function LO(){return LO=C(x().mark((function e(t,n,r){var i,a,o,s,u,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=GS(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new II(vT.comparator)).insert(o,jI.newNoDocument(o,cT.min())),u=GN().add(o),l=new $N(cT.min(),new Map,new PI(sT),s,u),e.next=9,RO(i,l);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),UO(i),e.next=16;break;case 14:return e.next=16,dP(i.localStore,n,!1).then((function(){return jO(i,n,r)})).catch(xT);case 16:case"end":return e.stop()}}),e)}))),LO.apply(this,arguments)}function jO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=_(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||DO(e,t)}))}function DO(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(MP(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),UO(e))}function MO(e,t,n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gO?(e.ac.addReference(a.key,t),FO(e,a)):a instanceof bO?(qS("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||DO(e,a.key)):WS()}}catch(o){i.e(o)}finally{i.f()}}function FO(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(qS("SyncEngine","New document in limbo: "+n),e.oc.add(r),UO(e))}function UO(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new vT(hT.fromString(t)),r=e.fc.next();e.cc.set(r,new _O(n)),e.uc=e.uc.insert(n,r),DP(e.remoteStore,new jR(YI(BI(n.path)),r,2,TT.at))}}function VO(e,t,n){return qO.apply(this,arguments)}function qO(){return qO=C(x().mark((function e(t,n,r){var i,a,o,s;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=GS(t),a=[],o=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){s.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=rP.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=C(x().mark((function e(t,n){var r,i,a,o,s,u,l,c;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=GS(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return CT.forEach(n,(function(t){return CT.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return CT.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ST(e.t0)){e.next=10;break}throw e.t0;case 10:qS("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=_(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qi.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.qi=r.qi.insert(s,c))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),qO.apply(this,arguments)}function zO(e,t){return BO.apply(this,arguments)}function BO(){return BO=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=GS(t)).currentUser.isEqual(n)){e.next=11;break}return qS("SyncEngine","User change. New user:",n.toKey()),e.next=5,sP(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new YS(QS.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,VO(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),BO.apply(this,arguments)}function HO(e,t){var n=GS(e),r=n.cc.get(t);if(r&&r.nc)return GN().add(r.key);var i=GN(),a=n.rc.get(t);if(!a)return i;var o,s=_(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.ic.get(u);i=i.unionWith(l.view.ju)}}catch(c){s.e(c)}finally{s.f()}return i}function WO(e){var t=GS(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=RO.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AO.bind(null,t),t.sc.Wo=pO.bind(null,t.eventManager),t.sc.wc=vO.bind(null,t.eventManager),t}var KO=function(){function e(){S(this,e),this.synchronizeTabs=!1}return N(e,[{key:"initialize",value:function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=CP(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return oP(this.persistence,new iP,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new eP(nP.Bs,this.yt)}},{key:"gc",value:function(e){return new gP}},{key:"terminate",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),GO=function(){function e(){S(this,e)}return N(e,[{key:"initialize",value:function(){var e=C(x().mark((function e(t,n){var r=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return OO(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zO.bind(null,this.syncEngine),e.next=12,eO(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lO}},{key:"createDatastore",value:function(e){var t,n=CP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new xP(t));return function(e,t,n,r){return new NP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return OO(o.syncEngine,e,0)},a=kP.C()?new kP:new bP,new PP(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new xO(e,t,n,r,i,a);return o&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=C(x().mark((function e(t){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GS(t),qS("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,LP(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function QO(e,t,n){if(!n)throw new YS(QS.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function YO(e){if(vT.isDocumentKey(e))throw new YS(QS.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function $O(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":WS()}function XO(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new YS(QS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$O(e);throw new YS(QS.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var JO=new Map,ZO=function(){function e(t){var n;if(S(this,e),void 0===t.host){if(void 0!==t.ssl)throw new YS(QS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new YS(QS.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new YS(QS.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return N(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),eA=function(){function e(t,n,r,i){S(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZO({}),this._settingsFrozen=!1}return N(e,[{key:"app",get:function(){if(!this._app)throw new YS(QS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new YS(QS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZO(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new JS;switch(e.type){case"gapi":var t=e.client;return new nT(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new YS(QS.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=JO.get(e);t&&(qS("ComponentProvider","Removing Datastore"),JO.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function tA(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=XO(e,eA))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&BS("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=MS.MOCK_USER;else{o=ie(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new YS(QS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new MS(u)}e._authCredentials=new ZS(new XS(o,s))}}var nA=function(){function e(t,n,r){S(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return N(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new iA(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),rA=function(){function e(t,n,r){S(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return N(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),iA=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,BI(i)))._path=i,a.type="collection",a}return N(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new nA(this.firestore,null,new vT(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(rA);var aA=function(){function e(t){S(this,e),this.observer=t,this.muted=!1}return N(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):zS("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),oA=function(){function e(t,n,r,i){var a=this;S(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=MS.UNAUTHENTICATED,this.clientId=oT.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qS("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return qS("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return N(e,[{key:"getConfiguration",value:function(){var e=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new YS(QS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new $S;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(C(x().mark((function n(){var r;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=iO(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function sA(e,t){return uA.apply(this,arguments)}function uA(){return uA=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),qS("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,sP(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),uA.apply(this,arguments)}function lA(e,t){return cA.apply(this,arguments)}function cA(){return cA=C(x().mark((function e(t,n){var r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fA(t);case 3:return r=e.sent,qS("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return JP(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return JP(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cA.apply(this,arguments)}function fA(e){return hA.apply(this,arguments)}function hA(){return hA=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return qS("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,sA(t,new KO);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),hA.apply(this,arguments)}function dA(e){return pA.apply(this,arguments)}function pA(){return pA=C(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return qS("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,lA(t,new GO);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),pA.apply(this,arguments)}function vA(e){return mA.apply(this,arguments)}function mA(){return mA=C(x().mark((function e(t){var n,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dA(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=EO.bind(null,n.syncEngine),r.onUnlisten=IO.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mA.apply(this,arguments)}function yA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new $S;return e.asyncQueue.enqueueAndForget(C(x().mark((function i(){return x().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new aA({next:function(n){t.enqueueAndForget((function(){return hO(e,o)})),n.fromCache&&"server"===r.source?i.reject(new YS(QS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new yO(n,a,{includeMetadataChanges:!0,Nu:!0});return cO(e,o)},i.next=3,vA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var gA=function(){function e(){var t=this;S(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new SP(this,"async_queue_retry"),this.Wc=function(){var e=EP();e&&qS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=EP();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return N(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=EP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new $S;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=C(x().mark((function e(){var t=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ST(e.t0)){e.next=12;break}throw e.t0;case 12:qS("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw zS("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=rO.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&WS()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=C(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=_(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=_(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();var bA=function(e){y(n,e);var t=w(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new gA,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return N(n,[{key:"_terminate",value:function(){return this._firestoreClient||wA(this),this._firestoreClient.terminate()}}]),n}(eA);function kA(e){return e._firestoreClient||wA(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wA(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new IT(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new oA(e._authCredentials,e._appCheckCredentials,e._queue,r)}var _A=function(){function e(t){S(this,e),this._byteString=t}return N(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(DT.fromBase64String(t))}catch(t){throw new YS(QS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(DT.fromUint8Array(t))}}]),e}(),xA=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new YS(QS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pT(n)}return N(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var EA=N((function e(t){S(this,e),this._methodName=t})),CA=function(){function e(t,n){if(S(this,e),!isFinite(t)||t<-90||t>90)throw new YS(QS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new YS(QS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return N(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return sT(this._lat,e._lat)||sT(this._long,e._long)}}]),e}(),SA=/^__.*__$/;function TA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw WS()}}var IA=function(){function e(t,n,r,i,a,o){S(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return N(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return FA(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(TA(this.sa)&&SA.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),NA=function(){function e(t,n,r){S(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||CP(t)}return N(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new IA({sa:e,methodName:t,fa:n,path:pT.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function RA(e){var t=e._freezeSettings(),n=CP(e._databaseId);return new NA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function PA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return OA(n,e.da(r?4:3,t))}function OA(e,t){if(LA(e=Se(e)))return jA("Unsupported field value:",t,e),AA(e,t);if(e instanceof EA)return function(e,t){if(!TA(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=_(e);try{for(a.s();!(n=a.n()).done;){var o=OA(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Se(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sN(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=lT.fromDate(e);return{timestampValue:lR(t.yt,n)}}if(e instanceof lT){var r=new lT(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lR(t.yt,r)}}if(e instanceof CA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _A)return{bytesValue:cR(t.yt,e._byteString)};if(e instanceof nA){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:hR(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat($O(e)))}(e,t)}function AA(e,t){var n={};return OT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):PT(e,(function(e,r){var i=OA(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function LA(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lT||e instanceof CA||e instanceof _A||e instanceof nA||e instanceof EA)}function jA(e,t,n){if(!LA(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=$O(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}var DA=new RegExp("[~\\*/\\[\\]]");function MA(e,t,n){if(t.search(DA)>=0)throw FA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return P(xA,a(t.split(".")))._internalPath}catch(r){throw FA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function FA(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new YS(QS.INVALID_ARGUMENT,s+e+u)}var UA=function(){function e(t,n,r,i,a){S(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return N(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new nA(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new VA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),VA=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){return p(h(n.prototype),"data",this).call(this)}}]),n}(UA);function qA(e,t){return"string"==typeof t?MA(e,t):t instanceof xA?t._internalPath:t._delegate._internalPath}function zA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new YS(QS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var BA=N((function e(){S(this,e)})),HA=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(BA);function WA(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof BA&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof QA})).length,n=e.filter((function(e){return e instanceof KA})).length;if(t>1||t>0&&n>0)throw new YS(QS.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=_(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;e=u._apply(e)}}catch(l){s.e(l)}finally{s.f()}return e}var KA=function(e){y(n,e);var t=w(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return N(n,[{key:"_apply",value:function(e){var t=this._parse(e);return XA(e._query,t),new rA(e.firestore,e.converter,$I(e._query,t))}},{key:"_parse",value:function(e){var t=RA(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new YS(QS.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){$A(o,a);var u,l=[],c=_(o);try{for(c.s();!(u=c.n()).done;){var f=u.value;l.push(YA(r,e,f))}}catch(h){c.e(h)}finally{c.f()}s={arrayValue:{values:l}}}else s=YA(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||$A(o,a),s=PA(n,"where",o,"in"===a||"not-in"===a);return cI.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(HA);function GA(e,t,n){var r=t,i=qA("where",e);return KA._create(i,r,n)}var QA=function(e){y(n,e);var t=w(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return N(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fI.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=_(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;XA(r,a),r=$I(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new rA(e.firestore,e.converter,$I(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(BA);function YA(e,t,n){if("string"==typeof(n=Se(n))){if(""===n)throw new YS(QS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GI(t)&&-1!==n.indexOf("/"))throw new YS(QS.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(hT.fromString(n));if(!vT.isDocumentKey(r))throw new YS(QS.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return JT(e,new vT(r))}if(n instanceof nA)return JT(e,n._key);throw new YS(QS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat($O(n),"."))}function $A(e,t){if(!Array.isArray(e)||0===e.length)throw new YS(QS.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new YS(QS.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function XA(e,t){if(t.isInequality()){var n=KI(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new YS(QS.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=WI(e);null!==i&&JA(e,r,i)}var a=function(e,t){var n,r=_(e);try{for(r.s();!(n=r.n()).done;){var i,a=_(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new YS(QS.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new YS(QS.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function JA(e,t,n){if(!n.isEqual(t))throw new YS(QS.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ZA=function(){function e(){S(this,e)}return N(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(WT(e)){case 0:return null;case 1:return e.booleanValue;case 2:return UT(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(VT(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw WS()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return PT(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new CA(UT(e.latitude),UT(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=zT(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(BT(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=FT(e);return new lT(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=hT.fromString(e);KS(NR(n));var r=new NT(n.get(1),n.get(3)),i=new vT(n.popFirst(5));return r.isEqual(t)||zS("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();var eL=function(){function e(t,n){S(this,e),this.hasPendingWrites=t,this.fromCache=n}return N(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),tL=function(e){y(n,e);var t=w(n);function n(e,r,i,a,o,s){var u;return S(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return N(n,[{key:"exists",value:function(){return p(h(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new nL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(UA),nL=function(e){y(n,e);var t=w(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(h(n.prototype),"data",this).call(this,e)}}]),n}(tL),rL=function(){function e(t,n,r,i){S(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new eL(i.hasPendingWrites,i.fromCache),this.query=r}return N(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new nL(n._firestore,n._userDataWriter,r.key,r,new eL(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new YS(QS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new nL(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new nL(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:iL(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function iL(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return WS()}}var aL=function(e){y(n,e);var t=w(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new _A(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new nA(this.firestore,null,t)}}]),n}(ZA);function oL(e){e=XO(e,rA);var t=XO(e.firestore,bA),n=kA(t),r=new aL(t);return zA(e._query),yA(n,e._query).then((function(n){return new rL(t,r,e,n)}))}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){FS=e}(bt),pt(new Te("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new bA(new eT(e.getProvider("auth-internal")),new iT(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new YS(QS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new NT(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),_t(DS,"3.8.0",e),_t(DS,"3.8.0","esm2017")}();var sL=function(e,t){var n="string"==typeof e?e:t||"(default)",r=vt("object"==typeof e?e:wt(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=ee("firestore");i&&tA.apply(void 0,[r].concat(a(i)))}return r}(Es),uL=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Se(e),QO("collection","path",t),e instanceof eA){var a=hT.fromString.apply(hT,[t].concat(r));return YO(a),new iA(e,null,a)}if(!(e instanceof nA||e instanceof iA))throw new YS(QS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hT.fromString.apply(hT,[t].concat(r)));return YO(o),new iA(e.firestore,null,o)}(sL,"users"),lL=function(){var e=C(x().mark((function e(t,n){var r,i,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WA(uL,GA("uid","==",t)),e.prev=1,e.next=4,oL(r);case 4:if(!((i=e.sent).size>0)){e.next=12;break}if(void 0===(a=i.docs[0].data())){e.next=11;break}return o={isLogged:!0,name:a.name,role:a.role},console.log(o),e.abrupt("return",o);case 11:throw new Error("No results for user with uid: "+t);case 12:throw new Error("No match for user with uid: "+t);case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),null===n||void 0===n||n.addMessage(e.t0,ks.Error);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}(),cL={isLogged:!1,name:"",role:""},fL=(0,l.createContext)(cL),hL=(0,l.createContext)(void 0),dL=function(){var e=u((0,l.useState)((0,Ps.jsx)(Tc,{})),2),t=e[0],n=e[1],r=u($a(Cs),1)[0],i=u((0,l.useState)(cL),2),o=i[0],s=i[1],c=u((0,l.useState)([]),2),f=c[0],h=c[1],d=(0,l.useRef)(f);d.current=f;var p={getMessages:function(){return f},addMessage:function(e,t){var n=new xs(e,t),r=[].concat(a(f),[n]);h(r),setTimeout((function(){var e=a(d.current);e=e.filter((function(e){return e.id!==n.id})),h(e)}),4e3)},hideMessage:function(e){var t=a(d.current);t=t.filter((function(t){return t.id!==e})),h(t)}};return(0,l.useEffect)((function(){r?lL(r.uid,p).then((function(e){void 0!==e&&(s(e),n((0,Ps.jsx)(O_,{})))})):n((0,Ps.jsx)(O_,{}))}),[r]),(0,Ps.jsx)(hL.Provider,{value:p,children:(0,Ps.jsx)(fL.Provider,{value:o,children:t})})};f.createRoot(document.getElementById("root")).render((0,Ps.jsx)(l.StrictMode,{children:(0,Ps.jsx)(dL,{})})),A_()}()}();
//# sourceMappingURL=main.6dec5ef5.js.map